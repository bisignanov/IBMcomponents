import{p as Ee,j as n,T as Jt,B as Nt}from"./settings-Bk-Ww79A.js";import{R as q,r as b}from"./index-BwDkhjyp.js";import{useMDXComponents as $t}from"./index-DlpNa54Y.js";import"./chunk-HLWAVYOI-Dpubv1Qy.js";import{e as Qt,i as en,C as tn}from"./index-wBCg0-F9.js";import{u as $e,_ as ie,c as F,d as nn,C as At,J as kt}from"./useMergedRefs-DoviDd4t.js";import{T as Ot}from"./TextInput-BkGoUNvH.js";import{P as t}from"./index-Dk74W0Oi.js";import{aV as Pt}from"./bucket-5-VXADWwuF.js";import{ap as It}from"./bucket-6-GhvU-pGQ.js";import{W as on,a as Dt,ai as Y}from"./bucket-18-D3Jjo1Sn.js";import{W as Re}from"./bucket-7-B5iqIa9B.js";import{v as Rt,aP as Bt,t as Lt}from"./bucket-4-CVgtr9ST.js";import{T as Ft}from"./bucket-17-CI5600gi.js";import{B as rn,C as qe}from"./bucket-1-tyIf4h66.js";import{u as A}from"./uuidv4-BQrI85uz.js";import{s as an}from"./index-g07FazYc.js";import{g as sn}from"./devtools-jK7s13u1.js";import{L as ln}from"./index-Cnj8eq3S.js";import{P as cn,a as dn}from"./index-8ToAQMOn.js";import{A as Ht,t as pn}from"./bucket-0-W33F5V9e.js";import{S as Gt}from"./Search-C6T7hozM.js";import{e as un,C as Et,aX as mn,aV as fn}from"./events-CiqBCP_Q.js";import{N as hn}from"./NumberInput-DTzyAg2C.js";import{T as gn}from"./TextArea-C-5lSOxu.js";import{D as et,a as Pe}from"./DatePicker-Cu2Bsrxt.js";import{S as Ie}from"./SelectItem-3oTozfJK.js";import{a1 as Vt}from"./bucket-16-BPBZChqC.js";import"./_commonjsHelpers-BosuxZz1.js";import"./index-CJvxHwuA.js";import"./iframe-r8cxUnT0.js";import"../sb-preview/runtime.js";import"./react-18-Dd3bHtks.js";import"./index-BONylQH5.js";import"./extends-CCbyfPlC.js";import"./index-C2eUe6cH.js";import"./index-BjQFKvNH.js";import"./isSymbol-BZYRlrjc.js";import"./index-DrFu-skq.js";import"./useNormalizedInputProps-Dn7BTqs3.js";import"./Text-BVB9JT_I.js";import"./FormContext-C7kRVu4t.js";import"./useAnnouncer-MW4fVOqQ.js";import"./LayerContext-DbU-6VX4.js";import"./bucket-14-BWqht3cs.js";import"./bucket-15-CXFcKitp.js";const Wt=e=>{let{hideLabel:o,className:r,...s}=e;const l=$e();return q.createElement("div",ie({className:F(`${l}--form-item`,r)},s),!o&&q.createElement("span",{className:`${l}--label ${l}--skeleton`}),q.createElement("div",{className:`${l}--select ${l}--skeleton`},q.createElement("div",{className:`${l}--select-input`})))};Wt.propTypes={className:t.string,hideLabel:t.bool};const bn=Array.from({length:an.length-1}).map((e,o)=>o+1),Mt=q.forwardRef(function(o,r){const{as:s="div",children:l,className:a,gap:c,orientation:d="vertical",...u}=o,p=$e(),m=F(a,{[`${p}--stack-${d}`]:!0,[`${p}--stack-scale-${c}`]:typeof c=="number"}),f={};return typeof c=="string"&&(f[`--${p}-stack-gap`]=c),q.createElement(s,ie({},u,{ref:r,className:m,style:f}),l)});Mt.propTypes={as:t.elementType,children:t.node,className:t.string,gap:t.oneOfType([t.string,t.oneOf(bn)]),orientation:t.oneOf(["horizontal","vertical"])};const yn=q.forwardRef(function(o,r){return q.createElement(Mt,ie({},o,{ref:r,orientation:"vertical"}))}),zt=q.forwardRef(function(o,r){let{children:s,className:l,disabled:a=!1,hideLabel:c,id:d,invalidText:u="Invalid time format.",invalid:p=!1,warningText:m="Warning message.",warning:f=!1,labelText:h,light:y=!1,maxLength:C=5,onChange:g=()=>{},onClick:N=()=>{},onBlur:S=()=>{},pattern:O="(1[012]|[1-9]):[0-5][0-9](\\s)?",placeholder:H="hh:mm",readOnly:_,size:w="md",type:$="text",value:k,...D}=o;const P=$e(),[K,z]=q.useState(k),[R,J]=q.useState(k);k!==R&&(z(k),J(k));function v(E){a||(_||z(K),N(E))}function x(E){!a&&!_&&(z(K),g(E))}function T(E){a||(_||z(K),S(E))}const j=F(`${P}--time-picker__input-field`,`${P}--text-input`,[l],{[`${P}--text-input--light`]:y,[`${P}--time-picker__input-field-error`]:p||f}),I=F({[`${P}--time-picker`]:!0,[`${P}--time-picker--light`]:y,[`${P}--time-picker--invalid`]:p,[`${P}--time-picker--warning`]:f,[`${P}--time-picker--readonly`]:_,[`${P}--time-picker--${w}`]:w,...l&&{[l]:!0}}),G=F(`${P}--label`,{[`${P}--visually-hidden`]:c,[`${P}--label--disabled`]:a}),X=h?q.createElement("label",{htmlFor:d,className:G},h):null;function se(){const E={onMouseDown:V=>{_&&(V.preventDefault(),V.target.focus())},onKeyDown:V=>{_&&["ArrowDown","ArrowUp"," "].includes(V.key)&&V.preventDefault()}};return q.Children.map(s,V=>{const U=V;if(U)return q.cloneElement(U,{...U.props,disabled:U.props.disabled??a,readOnly:_,...E})})}const le={readOnly:_};return q.createElement("div",{className:F(`${P}--form-item`,l)},X,q.createElement("div",{className:I},q.createElement("div",{className:`${P}--time-picker__input`},q.createElement("input",ie({className:j,"data-invalid":p||void 0,disabled:a,id:d,maxLength:C,onClick:v,onChange:x,onBlur:T,placeholder:H,pattern:O,ref:r,type:$,value:k},D,le)),(p||f)&&q.createElement("div",{className:`${P}--time-picker__error__icon`},p?q.createElement(on,{className:`${P}--checkbox__invalid-icon`,size:16}):q.createElement(Dt,{className:`${P}--text-input__invalid-icon--warning`,size:16}))),se()),(p||f)&&q.createElement("div",{className:`${P}--form-requirement`},p?u:m))});zt.propTypes={children:t.node,className:t.string,disabled:t.bool,hideLabel:t.bool,id:t.string.isRequired,invalid:t.bool,invalidText:t.node,labelText:t.node,light:nn(t.bool),maxLength:t.number,onBlur:t.func,onChange:t.func,onClick:t.func,pattern:t.string,placeholder:t.string,readOnly:t.bool,size:t.oneOf(["sm","md","lg"]),type:t.string,value:t.string,warning:t.bool,warningText:t.node};const Be=q.forwardRef(function(o,r){let{["aria-label"]:s="open list of options",children:l,id:a,disabled:c=!1,className:d,...u}=o;const p=$e(),m=F({[`${p}--select`]:!0,[`${p}--time-picker__select`]:!0,...d&&{[d]:!0}});return q.createElement("div",{className:m},q.createElement("select",ie({"aria-label":s,className:`${p}--select-input`,disabled:c,id:a,ref:r},u),l),q.createElement(un,{className:`${p}--select__arrow`,"aria-hidden":"true"}))});Be.propTypes={children:t.node,className:t.string,defaultValue:t.any,disabled:t.bool,id:t.string.isRequired};const Le=q.createContext(1),Ve=q.forwardRef(function(o,r){let{as:s="section",level:l,...a}=o;const c=q.useContext(Le),d=l??c+1,u=s;return q.createElement(Le.Provider,{value:Math.min(d,6)},q.createElement(u,ie({ref:r},a)))});Ve.propTypes={as:t.elementType,children:t.node,className:t.string,level:t.number};const We=q.forwardRef(function(o,r){const s=`h${q.useContext(Le)}`;return q.createElement(s,ie({ref:r},o))});We.propTypes={children:t.node,className:t.string};const Fe=[{label:"if",id:"if",connector:"and"},{label:"excl.if",id:"excl_if",connector:"or"}],Kt=[{label:"and",id:"and"},{label:"or",id:"or"}],vn=[{label:"is",id:"is",type:"all"},{label:"is greater than",id:"greater",type:"number"},{label:"is greater than or equal to",id:"greaterEqual",type:"number"},{label:"is lower than",id:"lower",type:"number"},{label:"is lower than or equal to",id:"lowerEqual",type:"number"},{label:"starts with",id:"startsWith",type:"text,textarea"},{label:"ends with",id:"endsWith",type:"text,textarea"},{label:"contains",id:"contains",type:"text,textarea"},{label:"is one of",id:"oneOf",type:"option"},{label:"is before",id:"before",type:"date,time"},{label:"is after",id:"after",type:"date,time"},{label:"is between",id:"between",type:"date"}],i=`${Ee.prefix}--condition-builder`,De=e=>{const o=String(e.getDate()).padStart(2,"0"),r=String(e.getMonth()+1).padStart(2,"0"),s=e.getFullYear();return`${o}/${r}/${s}`},xn={text:e=>e,textarea:e=>e,time:e=>e,number:e=>e,option:e=>e&&typeof e!="string"?(Array.isArray(e)?e:[e]).map(r=>r.label).join(", "):e,date:e=>{if(Array.isArray(e)&&e.length>1){const o=e!=null&&e[0]&&!isNaN(new Date(e[0]))?De(new Date(e[0])):"",r=e!=null&&e[1]&&!isNaN(new Date(e[1]))?De(new Date(e[1])):"";return`${o} To ${r}`}else return Array.isArray(e)&&!isNaN(new Date(e[0]))?De(new Date(e[0])):e},custom:e=>e},oe=({className:e,label:o,hideLabel:r,tooltipAlign:s,renderIcon:l,onClick:a,showToolTip:c,wrapperProps:d,onBlur:u,onFocus:p,onMouseEnter:m,onMouseLeave:f,isInvalid:h,wrapperClassName:y,tabIndex:C,...g})=>{const N=()=>{const S=g["data-name"]??"";return n.jsxs("button",{tabIndex:C??-1,className:F([e,`${i}__button`,{[`${i}__text-ellipsis`]:c&&!r&&!h},{[`${i}__invalid-input`]:h}]),type:"button",onClick:a,onBlur:u,onFocus:p,onMouseEnter:m,onMouseLeave:f,"data-name":S,...g,children:[l&&n.jsx(l,{}),!r&&n.jsx("span",{children:o}),h&&n.jsx(Dt,{})]})};return r||c?n.jsx(Jt,{label:o,align:s,className:`${y}`,...d,children:N()}):n.jsx(n.Fragment,{children:N()})};oe.propTypes={className:t.string,hideLabel:t.bool,isInvalid:t.bool,label:t.string,onBlur:t.func,onClick:t.func,onFocus:t.func,onMouseEnter:t.func,onMouseLeave:t.func,renderIcon:t.oneOfType([t.func,t.object]),showToolTip:t.bool,tabIndex:t.number,tooltipAlign:t.string,wrapperClassName:t.string,wrapperProps:t.object};oe.__docgenInfo={description:"",methods:[],displayName:"ConditionBuilderButton",props:{className:{description:"Provide an optional class to be applied to the containing node.",type:{name:"string"},required:!1},hideLabel:{description:"decides if label and tooltip to be hidden",type:{name:"bool"},required:!1},isInvalid:{description:"boolean to know the updated value in not valid",type:{name:"bool"},required:!1},label:{description:"label of the button",type:{name:"string"},required:!1},onBlur:{description:"mouse events callbacks",type:{name:"func"},required:!1},onClick:{description:"callback triggered on click of add button",type:{name:"func"},required:!1},onFocus:{description:"",type:{name:"func"},required:!1},onMouseEnter:{description:"",type:{name:"func"},required:!1},onMouseLeave:{description:"",type:{name:"func"},required:!1},renderIcon:{description:"Optional prop to allow overriding the icon rendering.",type:{name:"union",value:[{name:"func"},{name:"object"}]},required:!1},showToolTip:{description:"decides if  tooltip to be shown",type:{name:"bool"},required:!1},tabIndex:{description:"Tab index",type:{name:"number"},required:!1},tooltipAlign:{description:"tooltip position",type:{name:"string"},required:!1},wrapperClassName:{description:"classname applies to the wrapper of popover",type:{name:"string"},required:!1},wrapperProps:{description:"optional props for tree grid to add role and aria-label to wrapper span",type:{name:"object"},required:!1}}};const Cn={operator:"or",groups:[{groupOperator:"and",statement:"if",id:A(),conditions:[{property:void 0,operator:"",value:"",popoverToOpen:"propertyField",id:A()}]}]},Z=b.createContext(),Me=e=>{const[o,r]=b.useState({groups:[]}),[s,l]=b.useState([]);return n.jsx(Z.Provider,{value:{rootState:o,setRootState:r,actionState:s,setActionState:l,inputConfig:e.inputConfig,popOverSearchThreshold:e.popOverSearchThreshold,getOptions:e.getOptions,variant:e.variant,translateWithId:e.translateWithId,conditionBuilderRef:e.conditionBuilderRef},children:e.children})};Me.propTypes={children:t.node.isRequired,conditionBuilderRef:t.object,getOptions:t.func,inputConfig:t.shape({properties:t.arrayOf(t.shape({id:t.string.isRequired,label:t.string.isRequired,icon:t.oneOfType([t.func,t.object]),type:t.oneOf(["text","textarea","number","date","option","time","custom"]).isRequired,config:t.shape({options:t.arrayOf(t.shape({id:t.string.isRequired,label:t.string.isRequired,icon:t.oneOfType([t.func,t.object])})),component:t.func,operators:t.arrayOf(t.shape({id:t.string.isRequired,label:t.string.isRequired})),long:t.bool})}))}).isRequired,popOverSearchThreshold:t.number.isRequired,translateWithId:t.func,variant:t.string.isRequired};Me.__docgenInfo={description:"",methods:[],displayName:"ConditionBuilderProvider",props:{children:{description:"Provide the contents of the ConditionBuilder.",type:{name:"node"},required:!0},conditionBuilderRef:{description:"ref of condition builder",type:{name:"object"},required:!1},getOptions:{description:`This is an optional callback function that will be triggered when options array is not passed in the inputConfig against a property. 
This can be a asynchronous function that need  to  return a promise, so it will allow to fetch options from API call.
options has to be in valid format
[{
          label: 'label',
          id: 'id',
        },...]`,type:{name:"func"},required:!1},inputConfig:{description:"This is a mandatory prop that defines the input to the condition builder.",type:{name:"shape",value:{properties:{name:"arrayOf",value:{name:"shape",value:{id:{name:"string",required:!0},label:{name:"string",required:!0},icon:{name:"union",value:[{name:"func"},{name:"object"}],required:!1},type:{name:"enum",value:[{value:"'text'",computed:!1},{value:"'textarea'",computed:!1},{value:"'number'",computed:!1},{value:"'date'",computed:!1},{value:"'option'",computed:!1},{value:"'time'",computed:!1},{value:"'custom'",computed:!1}],required:!0},config:{name:"shape",value:{options:{name:"arrayOf",value:{name:"shape",value:{id:{name:"string",required:!0},label:{name:"string",required:!0},icon:{name:"union",value:[{name:"func"},{name:"object"}],required:!1}}},required:!1},component:{name:"func",required:!1},operators:{name:"arrayOf",value:{name:"shape",value:{id:{name:"string",required:!0},label:{name:"string",required:!0}}},required:!1},long:{name:"bool",required:!1}},required:!1}}},required:!1}}},required:!0},popOverSearchThreshold:{description:"Provide an mandatory numeric value that will be used to enable search option in the popovers with list.",type:{name:"number"},required:!0},translateWithId:{description:`Optional prop if you want to pass translation to the texts used . Otherwise this will the defined defaults.
This callback function will receive the message id and you need to return the corresponding text for that id.
The message key will be one of [   "ifText",   "addConditionText",   "addConditionGroupText",   "addSubgroupText",   "conditionText",   "propertyText",   "operatorText",   "valueText",   "connectorText",   "conditionRowText",   "removeConditionText",   "addConditionRowText",   "startText",   "endText",   "clearSearchText",   "actionsText",   "then",   "removeActionText",   "addActionText",   "invalidText",   "invalidNumberWarnText"
]`,type:{name:"func"},required:!1},variant:{description:"Provide the condition builder variant: sentence/ tree",type:{name:"string"},required:!0}}};const tt={ifText:"if",excl_if:"excl.if",and:"and",or:"or",is:"is",greater:"is greater than",greaterEqual:"is greater than or equal to",lower:"is lower than",lowerEqual:"is lower than or equal to",startsWith:"starts with",endsWith:"ends with",contains:"contains",oneOf:"is one of",before:"is before",after:"is after",between:"is between",addConditionText:"Add condition",addConditionGroupText:"Add condition group",addSubgroupText:"Add subgroup",conditionText:"Condition",propertyText:"Property",operatorText:"Operator",valueText:"Value",connectorText:"Connector",conditionRowText:"Condition row",conditionRowGroupText:"Condition row group",removeConditionText:"Remove condition",addConditionRowText:"Add condition row",startText:"Start",endText:"End",clearSearchText:"Clear search input",actionsText:"Actions",then:"then",removeActionText:"Remove Action",addActionText:"Add action",invalidText:"Incomplete",invalidNumberWarnText:"Invalid number, must be 0 or greater",conditionBuilderText:"Condition Builder",actionSectionText:"Action Section",conditionHeadingText:"Condition"},M=e=>{const{translateWithId:o}=b.useContext(Z);return e.map(r=>o!=null&&o(r)?o(r):tt[r]?tt[r]:r)},ye=(e,o)=>{e&&setTimeout(()=>{var r,s,l,a,c;W((r=e.target.closest('[role="gridcell"]'))==null?void 0:r.querySelector("button"),o),(l=(s=e.target.closest('[role="gridcell"]'))==null?void 0:s.querySelector("button"))==null||l.click(),(c=(a=e.target.closest('[role="gridcell"]'))==null?void 0:a.querySelector("button"))==null||c.focus()},0)},te=(e,o)=>{setTimeout(()=>{W(e,o)},0)},He=(e,o,r,s,l,a)=>{e==document.activeElement?o!==r.length-1?te(r[o+1],a):te(r[s?0:r.length-1],a):Array.from(r).indexOf(document.activeElement)==-1&&l&&te(r[0],a)},Ge=(e,o,r,s,l,a)=>{e==document.activeElement?te(o!==0?r[o-1]:r[s?r.length-1:0],a):Array.from(r).indexOf(document.activeElement)==-1&&l&&te(r[r.length-1],a)},_n=(e,o)=>e[o],pe=e=>e&&e!=="INVALID",W=(e,o)=>{var s,l;const r=(e==null?void 0:e.closest(`.${i}__content-container`))??(e==null?void 0:e.closest(`.${i}__actions-container`));r&&Array.from(r.querySelectorAll('[tabindex="0"]')).map(a=>a==null?void 0:a.setAttribute("tabindex","-1")),e==null||e.setAttribute("tabindex","0"),(l=(s=o.current)==null?void 0:s.querySelector(`.${i}__statement-button`))==null||l.setAttribute("tabindex","1"),e==null||e.focus()},Tn=(e,o,r)=>{var l;(l=document.activeElement.closest(`.${i}__popover`))!=null&&l.querySelector('[role="dialog"]')||Sn(e,o,r)},wn=(e,o,r)=>{jn(e)||qn(e,r==null?void 0:r.current,o)},jn=e=>!["Escape"].includes(e.key)&&(e.target.closest(`.${i}__item-date`)||e.target.closest(`.${i}__item-time`)),qn=(e,o,r)=>{var d,u,p;const s=e.key,l=_n(e,"shiftKey"),a=(d=o.querySelector("ul"))==null?void 0:d.dataset.multiSelect;let c=[];switch(s){case"ArrowUp":o.querySelectorAll('[role="option"]').forEach((m,f,h)=>{Ge(m,f,h,null,null,r)});break;case"ArrowDown":o.querySelectorAll('[role="option"]').forEach((m,f,h)=>{He(m,f,h,null,null,r)});break;case"Tab":c=[...Array.from(o.querySelectorAll(`.${i}__selectAll-button,[role="searchbox"]`)),o.querySelector('[role="option"]')],c.forEach((m,f,h)=>{l?Ge(m,f,h,!0,!0,r):He(m,f,h,!0,!0,r)}),e.preventDefault();break;case" ":a==="true"&&(document.activeElement.type!=="button"&&((u=document.activeElement)==null||u.click()),e.preventDefault());break;case"Enter":a!=="true"&&document.activeElement.type!=="button"&&(ye(e,r),(p=document.activeElement)==null||p.click());break;case"Escape":ye(e,r);break}},Sn=(e,o,r)=>{var s,l,a,c,d,u;switch(e.key){case"ArrowRight":if(e.preventDefault(),r=="tree"){let p=Array.from((s=e.target.closest('[role="row"]'))==null?void 0:s.querySelectorAll('[role="gridcell"] button'));if(p.length===1)e.target=e.target.closest('[role="row"]'),nt(e,o,r);else if(e.target.getAttribute("role")=="row")W(p[0],o);else{let m=p.indexOf(e.target);m<p.length-1&&te(p[m+1],o)}}else ot(e,o);break;case"ArrowLeft":if(e.preventDefault(),r=="tree"){if(e.target.getAttribute("role")!=="row"){let p=Array.from((l=e.target.closest('[role="row"]'))==null?void 0:l.querySelectorAll('[role="gridcell"] button')),m=p.indexOf(e.target);if(m>0)te(p[m-1],o);else{let f=e.target.closest('[role="row"]');W(f,o)}}}else ot(e,o);break;case"ArrowUp":case"ArrowDown":e.preventDefault(),r=="tree"?nt(e,o,r):Nn(e,o,r);break;case"Enter":((c=(a=document.activeElement)==null?void 0:a.querySelectorAll("button"))==null?void 0:c.length)===1&&((u=(d=document.activeElement)==null?void 0:d.querySelectorAll("button")[0])==null||u.click());break}},ze=e=>{var o;return Array.from((o=e.current)==null?void 0:o.querySelectorAll('[role="row"]'))},Ut=(e,o)=>ze(o).findIndex(s=>s.contains(e)),Nn=(e,o,r)=>{const s=ze(o),l=Ut(e.target,o);Zt(e,l,s,r,o)},nt=(e,o,r)=>{const s=ze(o),l=Ut(e.target,o);let a=l;e.target.getAttribute("role")=="row"?(["ArrowDown","ArrowRight"].includes(e.key)?a+=1:e.key==="ArrowUp"&&(a-=1),a<0?a=0:a>=s.length&&(a=s.length-1),a!==l&&W(s[a],o)):Zt(e,l,s,r,o)},Zt=(e,o,r,s,l)=>{let a=o;e.key==="ArrowUp"&&(a=o==0?o:o-1),e.key==="ArrowDown"&&(a=o===r.length-1?r.length-1:o+1);const c=r[a],d=e.target.dataset.name;c!=null&&c.querySelector(`[data-name="${d}"]`)?W(c==null?void 0:c.querySelector(`[data-name="${d}"]`),l):s==="tree"&&W(c,l)},ot=(e,o)=>{o.current.querySelectorAll('[role="gridcell"] button').forEach((r,s,l)=>{e.key==="ArrowRight"?He(r,s,l,null,null,o):Ge(r,s,l,null,null,o)})},L=({children:e,className:o,label:r,renderIcon:s,title:l,type:a,showToolTip:c,condition:d,popOverClassName:u,config:p,renderChildren:m,onChange:f,...h})=>{const y=b.useRef(null),[C,g]=b.useState(!1),[N,S,O]=M(["invalidText","addConditionText",r]),{conditionBuilderRef:H}=b.useContext(Z),_=()=>{const{property:R,operator:J}=d||{};return r==="INVALID"||h["data-name"]==="propertyField"&&R==="INVALID"||h["data-name"]==="operatorField"&&J==="INVALID"?{propertyLabel:N,isInvalid:!0}:{isInvalid:!1,propertyLabel:h["data-name"]=="valueField"&&a?xn[a](r,p):O}},{propertyLabel:w,isInvalid:$}=_();b.useEffect(()=>{if(d){const R=h["data-name"];(d.popoverToOpen&&R!==d.popoverToOpen||R=="valueField"&&a=="option"&&d.operator!=="oneOf")&&D(),d.popoverToOpen==R&&P()}else D()},[d,r]),b.useEffect(()=>{if(C&&y.current){const R=y.current.querySelector("input,textarea");R&&setTimeout(()=>R.focus(),0)}},[y,C]);const k=()=>{(h["data-name"]==="propertyField"&&!(d!=null&&d.property)||h["data-name"]==="operatorField"&&!(d!=null&&d.operator)||h["data-name"]==="valueField"&&!(d!=null&&d.value))&&(f==null||f("INVALID"))},D=()=>{C&&k(),g(!1)},P=()=>g(!0),K=()=>{(e||m)&&g(!C)},z=R=>{wn(R,H,y),R.key==="Escape"&&k()};return n.jsxs(cn,{open:C,isTabTip:!0,role:"gridcell",className:`${u} ${i}__popover`,ref:y,onRequestClose:D,children:[n.jsx(oe,{label:w??S,hideLabel:!r,onClick:K,className:o,"aria-haspopup":!0,"aria-expanded":C,renderIcon:s||(r==null?Ht:null),showToolTip:c,isInvalid:$,condition:d,...h}),C&&n.jsx(dn,{className:`${i}__popover-content-wrapper`,role:"dialog","aria-label":l,onKeyDown:z,children:n.jsxs(ln,{children:[n.jsx("h1",{className:`${i}__item__title`,children:l}),n.jsx("div",{className:`${i}__popover-content`,children:m?m(y):e})]})})]})};L.propTypes={children:t.node,className:t.string,condition:t.object,config:t.object,label:t.oneOfType([t.string,t.array,t.object]),onChange:t.func,popOverClassName:t.string,renderChildren:t.func,renderIcon:t.oneOfType([t.func,t.object]),showToolTip:t.bool,title:t.string,type:t.string};L.__docgenInfo={description:"",methods:[],displayName:"ConditionBuilderItem",props:{children:{description:"provide the contents of the popover",type:{name:"node"},required:!1},className:{description:"Provide an optional class to be applied to the containing node.",type:{name:"string"},required:!1},condition:{description:"current condition state object",type:{name:"object"},required:!1},config:{description:"this is the config object again the current property from inputConfig",type:{name:"object"},required:!1},label:{description:"text to be displayed in the field",type:{name:"union",value:[{name:"string"},{name:"array"},{name:"object"}]},required:!1},onChange:{description:"callback to update the current condition of the state tree",type:{name:"func"},required:!1},popOverClassName:{description:"class name for popover",type:{name:"string"},required:!1},renderChildren:{description:"callback prop that returns the jsx for children",type:{name:"func"},required:!1},renderIcon:{description:"Optional prop to allow overriding the icon rendering.",type:{name:"union",value:[{name:"func"},{name:"object"}]},required:!1},showToolTip:{description:"show tool tip",type:{name:"bool"},required:!1},title:{description:"title of the popover",type:{name:"string"},required:!1},type:{description:"input type",type:{name:"string"},required:!1}}};const ne=({conditionState:e={},config:o={},onChange:r})=>{const{popOverSearchThreshold:s}=b.useContext(Z),l=b.useRef(),[a,c]=M(["propertyText","clearSearchText"]),d=o.options,[u,p]=b.useState(""),m=e.value,f=d==null?void 0:d.filter(g=>g.label.toLowerCase().includes(u.toLowerCase()));b.useEffect(()=>{if(l.current){const g=l.current.querySelector("input, button,li");g&&g.focus()}},[d]);const h=(g,N)=>{r(N.id,g)},y=g=>{const{value:N}=g.target;p(N)},C=()=>e.label?e.label:e.property?e.property:a;if(d)return n.jsxs("div",{className:`${i}__item-option`,ref:l,children:[d.length>s&&n.jsx("div",{className:`${i}__item-option__search`,children:n.jsx(Gt,{size:"sm",labelText:c,closeButtonLabelText:c,onChange:y})}),n.jsx("ul",{"aria-label":C(),role:"listbox",children:f==null?void 0:f.map(g=>{const N=m===g.id,S=g.icon;return n.jsx("li",{tabIndex:0,role:"option","aria-selected":N,className:`${i}__item-option__option`,onKeyUp:()=>!1,onClick:O=>h(O,g),children:n.jsxs("div",{className:`${i}__item-option__option-content`,children:[n.jsxs("span",{className:`${i}__item-option__option-label`,children:[S&&n.jsx(S,{}),g.label]}),N&&n.jsx(Et,{className:`${i}__checkmark`})]})},g.id)})})]})};ne.propTypes={conditionState:t.object,config:t.object,onChange:t.func};ne.__docgenInfo={description:"",methods:[],displayName:"ItemOption",props:{conditionState:{defaultValue:{value:"{}",computed:!1},description:"current condition object",type:{name:"object"},required:!1},config:{defaultValue:{value:"{}",computed:!1},description:"current config object that this property is part of",type:{name:"object"},required:!1},onChange:{description:"callback to update state oin date change",type:{name:"func"},required:!1}}};const Te=({operator:e,className:o,onChange:r,...s})=>{const{variant:l,conditionBuilderRef:a}=b.useContext(Z),[c]=M(["connectorText"]),d=b.useCallback((f,h)=>{h?f.classList.add("hoveredConnector"):f.classList.remove("hoveredConnector")},[]),u=f=>{let h=f.currentTarget.closest(".eachGroup");d(h,!0)},p=f=>{let h=f.currentTarget.closest(".eachGroup");d(h,!1)},m=(f,h)=>{r(f),ye(h,a)};return l=="tree"?n.jsx("span",{className:`${o} ${i}__connector--disabled`,children:e}):n.jsx(L,{label:e,title:c,"data-name":"connectorField",onMouseEnter:u,onMouseLeave:p,onFocus:u,onBlur:p,...s,popOverClassName:o,className:`${i}__connector-button `,children:n.jsx(ne,{config:{options:Kt},conditionState:{value:e,label:c},onChange:m})})};Te.propTypes={className:t.string,onChange:t.func,operator:t.string};Te.__docgenInfo={description:"",methods:[],displayName:"ConditionConnector",props:{className:{description:"Provide an optional class to be applied to the containing node.",type:{name:"string"},required:!1},onChange:{description:"callback to update the current condition of the state tree",type:{name:"func"},required:!1},operator:{description:"string that defines the connector operator (and/or)",type:{name:"string"},required:!1}}};const Ke=({conditionState:e,config:o,onChange:r})=>{var d;const[s]=M(["invalidNumberWarnText"]),l=(u,{value:p})=>{p!==""&&!isNaN(p)&&a(p)?r(`${p} ${o.unit??""}`):r("INVALID")},a=u=>!(u>o.max||u<o.min),c=()=>{var u,p;return((p=(u=e.value)==null?void 0:u.split(" "))==null?void 0:p[0])??""};return n.jsx("div",{className:`${i}__item-number`,children:n.jsx(hn,{label:e.property,hideLabel:!0,id:(d=e.property)==null?void 0:d.replace(/\s/g,""),invalidText:s,allowEmpty:!0,onChange:l,...o,defaultValue:c()})})};Ke.propTypes={conditionState:t.object,config:t.object,onChange:t.func};Ke.__docgenInfo={description:"",methods:[],displayName:"ConditionBuilderItemNumber",props:{conditionState:{description:"current condition object",type:{name:"object"},required:!1},config:{description:"current config object that this property is part of",type:{name:"object"},required:!1},onChange:{description:"callback to update state oin date change",type:{name:"func"},required:!1}}};const Se=({conditionState:e,onChange:o,config:r,type:s})=>{var a;const l={labelText:e.property,hideLabel:!0,value:pe(e.value)?e.value:"",id:(a=e.property)==null?void 0:a.replace(/\s/g,""),onChange:c=>{o(c.target.value)},...r};return n.jsx("div",{className:`${i}__item-text`,children:s=="textarea"?n.jsx(gn,{...l}):n.jsx(Ot,{...l})})};Se.propTypes={conditionState:t.object,config:t.object,onChange:t.func,type:t.string};Se.__docgenInfo={description:"",methods:[],displayName:"ConditionBuilderItemText",props:{conditionState:{description:"current condition object",type:{name:"object"},required:!1},config:{description:"config of the current property",type:{name:"object"},required:!1},onChange:{description:"callback to update state oin date change",type:{name:"func"},required:!1},type:{description:"current input type",type:{name:"string"},required:!1}}};const $n=`${Ee.prefix}--condition-builder`,Ue=({conditionState:e,onChange:o,parentRef:r})=>{const s=b.useRef(),[l,a]=M(["startText","endText"]),c=e.operator=="between"?"range":"single",d=u=>{o(u&&u.length>0?u:"INVALID")};return n.jsxs("div",{className:`${$n}__item-date `,children:[c=="single"&&n.jsx(et,{ref:s,dateFormat:"d/m/Y",datePickerType:"single",value:e.value,onClose:d,appendTo:r==null?void 0:r.current,children:n.jsx(Pe,{id:"datePicker",placeholder:"dd/mm/yyyy",labelText:e.property})}),c=="range"&&n.jsxs(et,{ref:s,dateFormat:"d/m/Y",datePickerType:c,onClose:d,value:e.value,appendTo:r==null?void 0:r.current,children:[n.jsx(Pe,{id:"datePickerStart",placeholder:"dd/mm/yyyy",labelText:l}),n.jsx(Pe,{id:"datePickerEnd",placeholder:"dd/mm/yyyy",labelText:a})]})]})};Ue.propTypes={conditionState:t.object,onChange:t.func,parentRef:t.object};Ue.__docgenInfo={description:"",methods:[],displayName:"ConditionBuilderItemDate",props:{conditionState:{description:"current condition object",type:{name:"object"},required:!1},onChange:{description:"callback to update state oin date change",type:{name:"func"},required:!1},parentRef:{description:"reference to the popover node",type:{name:"object"},required:!1}}};const Ze=({onChange:e,config:o})=>{var f,h;const[r,s]=b.useState(""),[l,a]=b.useState("AM"),[c,d]=b.useState((f=o==null?void 0:o.timeZones)==null?void 0:f[0]);b.useEffect(()=>{let y=`${r??""} ${l??""} ${c??""}`;e(r?y:void 0)},[r,l,c]);const u=y=>{d(y.target.value)},p=y=>{a(y.target.value)},m=y=>{s(y.target.value)};return n.jsx("div",{className:`${i}__item-time`,children:n.jsxs(zt,{id:"time-picker",labelText:"Select a time",onChange:m,children:[n.jsxs(Be,{id:"time-picker-day-zone",onChange:p,children:[n.jsx(Ie,{value:"AM",text:"AM"}),n.jsx(Ie,{value:"PM",text:"PM"})]}),n.jsx(Be,{id:"time-picker-time-zone",onChange:u,children:(h=o==null?void 0:o.timeZones)==null?void 0:h.map((y,C)=>n.jsx(Ie,{value:y,text:y},C))})]})})};Ze.propTypes={config:t.object,onChange:t.func};Ze.__docgenInfo={description:"",methods:[],displayName:"ConditionBuilderItemTime",props:{config:{description:"current config object that this property is part of",type:{name:"object"},required:!1},onChange:{description:"callback to update state oin date change",type:{name:"func"},required:!1}}};const Ce=({className:e,onClick:o,addConditionSubGroupHandler:r,showConditionSubGroupPreviewHandler:s,hideConditionSubGroupPreviewHandler:l,showConditionPreviewHandler:a,hideConditionPreviewHandler:c,enableSubGroup:d,buttonLabel:u,tabIndex:p})=>{const[m,f]=b.useState(!1),[h,y,C]=M(["addConditionText","addConditionRowText","addSubgroupText"]),g=()=>{f(!0)},N=()=>{f(!1)},S=()=>{c==null||c(),o()},O=()=>d?{onMouseEnter:a,onMouseLeave:c,onFocus:a,onBlur:c}:{},H=()=>({onMouseEnter:s,onMouseLeave:l,onFocus:s,onBlur:l}),_=()=>u||(d?void 0:y),w=d?{role:"gridcell"}:{};return n.jsxs("div",{className:`${e} ${i}__add-button-wrapper`,role:d?"none":"gridcell","aria-label":_(),onMouseEnter:g,onMouseLeave:N,onFocus:g,onBlur:N,children:[n.jsx(oe,{renderIcon:pn,onClick:S,...O(),wrapperProps:w,className:`${i}__add-button`,hideLabel:!0,"data-name":"addButton",label:u??h,tabIndex:p}),d&&n.jsx(oe,{renderIcon:Vt,onClick:r,className:F(`${i}__add-condition-sub-group ${i}__gap-left`),hideLabel:!0,label:C,wrapperProps:w,wrapperClassName:F(`${i}__add-condition-sub-group-wrapper`,{[`${i}__add-condition-sub-group-wrapper--show`]:m}),...H()})]})};Ce.propTypes={addConditionSubGroupHandler:t.func,buttonLabel:t.string,className:t.string,enableSubGroup:t.bool,hideConditionPreviewHandler:t.func,hideConditionSubGroupPreviewHandler:t.func,onClick:t.func,showConditionPreviewHandler:t.func,showConditionSubGroupPreviewHandler:t.func,tabIndex:t.number};Ce.__docgenInfo={description:"",methods:[],displayName:"ConditionBuilderAdd",props:{addConditionSubGroupHandler:{description:"handler for hiding sub group preview",type:{name:"func"},required:!1},buttonLabel:{description:"tooltip label for plus button",type:{name:"string"},required:!1},className:{description:"Provide an optional class to be applied to the containing node.",type:{name:"string"},required:!1},enableSubGroup:{description:"boolean to enable sub groups for the tree variant",type:{name:"bool"},required:!1},hideConditionPreviewHandler:{description:"handler for hiding sub group preview",type:{name:"func"},required:!1},hideConditionSubGroupPreviewHandler:{description:"",type:{name:"func"},required:!1},onClick:{description:"callback triggered on click of add button",type:{name:"func"},required:!1},showConditionPreviewHandler:{description:"",type:{name:"func"},required:!1},showConditionSubGroupPreviewHandler:{description:"",type:{name:"func"},required:!1},tabIndex:{description:"Tab index",type:{name:"number"},required:!1}}};const Ae=({conditionState:e={},config:o={},onChange:r})=>{const s=e.operator==="oneOf",{popOverSearchThreshold:l,getOptions:a,rootState:c}=b.useContext(Z),[d,u]=M(["propertyText","clearSearchText"]),p=b.useRef(),[m,f]=b.useState(o.options),[h,y]=b.useState(""),C=m==null?void 0:m.filter(_=>_.label.toLowerCase().includes(h.toLowerCase())),g=Array.isArray(e.value)?e.value:e.value!==void 0?[e.value]:[];b.useEffect(()=>{!m&&a&&(async()=>{const w=await a(c,e);(w==null?void 0:w.length)>0&&Object.keys(w[0]).includes("label")&&Object.keys(w[0]).includes("id")&&f(w)})()},[]),b.useEffect(()=>{if(p.current){const _=p.current.querySelector("input, button,li");_&&_.focus()}},[m]);const N=_=>{_.currentTarget.dataset.selectedAll=="false"?r(void 0):r(m)},S=_=>{const{value:w}=_.target;y(w)},O=(_,w,$)=>{const k=g.filter(D=>D!=="INVALID");if(s)if($){let D=k.filter(P=>P.id!==w.id);r(D.length>0?D:void 0)}else r([...k,w]);else r(w,_)},H=()=>e.label?e.label:e.property?e.property:d;return m?n.jsxs("div",{className:`${i}__item-option`,ref:p,children:[m.length>l&&n.jsx("div",{className:`${i}__item-option__search`,children:n.jsx(Gt,{size:"sm",labelText:u,closeButtonLabelText:u,onChange:S})}),s&&n.jsxs("div",{className:`${i}__multiselectSelectionStatusContainer`,children:[n.jsx("h4",{children:n.jsxs("label",{children:[g.length,"/",m.length," Selected"]})}),n.jsx(Nt,{kind:"ghost",size:"sm","data-selected-all":`${g.length==0}`,onClick:N,className:`${i}__selectAll-button`,children:g.length==0?"Select all":"Deselect all"})]}),n.jsx("ul",{"aria-label":H(),role:"listbox","data-multi-select":s,children:C==null?void 0:C.map(_=>{const w=g.map(k=>k.id).includes(_.id),$=_.icon;return n.jsx("li",{tabIndex:0,role:"option","aria-selected":w,className:`${i}__item-option__option`,onKeyUp:()=>!1,onClick:k=>O(k,_,w),children:n.jsx("div",{className:`${i}__item-option__option-content`,children:s?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:`${i}__option-check-box`,children:w?n.jsx(mn,{}):n.jsx(fn,{})}),n.jsx("span",{className:`${i}__item-option__option-label`,children:_.label}),$&&n.jsx("span",{className:`${i}__option-icon`,children:n.jsx($,{})})]}):n.jsxs(n.Fragment,{children:[n.jsxs("span",{className:`${i}__item-option__option-label`,children:[$&&n.jsx($,{}),_.label]}),w&&n.jsx(Et,{className:`${i}__checkmark`})]})})},_.id)})})]}):n.jsx(Wt,{})};Ae.propTypes={conditionState:t.object,config:t.object,onChange:t.func};Ae.__docgenInfo={description:"",methods:[],displayName:"ItemOptionForValueField",props:{conditionState:{defaultValue:{value:"{}",computed:!1},description:"current condition object",type:{name:"object"},required:!1},config:{defaultValue:{value:"{}",computed:!1},description:"current config object that this property is part of",type:{name:"object"},required:!1},onChange:{description:"callback to update state oin date change",type:{name:"func"},required:!1}}};const Ne=e=>{const{property:o,value:r,operator:s}=e.condition,{onRemove:l,onChange:a,condition:c,conjunction:d,onConnectorOperatorChange:u,isStatement:p,group:m,onStatementChange:f,conditionIndex:h,addConditionHandler:y,addConditionSubGroupHandler:C,aria:g,hideConditionSubGroupPreviewHandler:N,showConditionSubGroupPreviewHandler:S,hideConditionPreviewHandler:O,showConditionPreviewHandler:H,isLastCondition:_}=e,{inputConfig:w,variant:$,conditionBuilderRef:k}=b.useContext(Z),[D,P]=b.useState(!1),[K,z,R,J,v]=M(["conditionRowText","conditionText","propertyText","operatorText","removeConditionText"]),x=B=>{var de;return((de=w.properties)==null?void 0:de.find(je=>je.id==B))??{}},{icon:T,type:j,config:I,label:G}=x(o),X={text:Se,number:Ke,date:Ue,time:Ze,option:Ae,custom:I==null?void 0:I.component,textarea:Se},se=o?X[j]:null,le=(B,de)=>{ye(de,k),f(B)},E=B=>{a({...c,property:B,operator:void 0,value:"",popoverToOpen:pe(B)?"operatorField":""})},ce=B=>{a({...c,operator:B,value:void 0,popoverToOpen:pe(B)?"valueField":""})},V=(B,de)=>{const je={...c};delete je.popoverToOpen,ye(de,k),a({...je,value:B})},U=()=>{P(!0)},Q=()=>{P(!1)},xe=()=>I!=null&&I.operators?I.operators:vn.filter(B=>B.type.indexOf(j)!=-1||B.type=="all"),we=()=>$=="tree"?{"aria-level":g.level,"aria-posinset":g.posinset,"aria-setsize":g.setsize}:{},Oe=B=>n.jsx(se,{conditionState:{property:o,operator:s,value:r},onChange:V,config:I,"data-name":"valueField",parentRef:B,type:j});return n.jsxs("div",{className:F(`${i}__condition-block`,{[`${i}__condition__deletion-preview`]:D},{[`${i}__gap-bottom`]:$=="tree"&&!(h+1>=m.conditions.length)},{[`${i}__gap ${i}__gap-bottom`]:$=="sentence"}),role:"row","aria-label":K,...we(),children:[d?n.jsx(Te,{className:`${i}__gap`,operator:d,onChange:B=>u(B)}):n.jsx("div",{role:"gridcell"}),p&&n.jsx(L,{label:m.statement,title:z,"data-name":"connectorField",popOverClassName:`${i}__gap`,className:`${i}__statement-button`,children:n.jsx(ne,{conditionState:{value:m.statement,label:z},onChange:le,config:{options:Fe}})}),n.jsx(L,{label:G??(c==null?void 0:c.property),title:R,renderIcon:T??null,className:`${i}__property-field`,"data-name":"propertyField",condition:c,type:j,onChange:E,children:n.jsx(ne,{conditionState:{value:o,label:R},onChange:E,config:{options:w.properties}})}),pe(o)&&n.jsx(L,{label:s,title:J,"data-name":"operatorField",condition:c,type:j,onChange:ce,children:n.jsx(ne,{config:{options:xe()},conditionState:{value:s,label:J},onChange:ce})}),pe(o)&&pe(s)&&n.jsx(L,{label:r,type:j,title:G,showToolTip:!0,"data-name":"valueField",condition:c,config:I,onChange:V,renderChildren:Oe}),n.jsx("span",{role:"gridcell","aria-label":v,children:n.jsx(oe,{hideLabel:!0,label:v,onClick:l,onMouseEnter:U,onMouseLeave:Q,onFocus:U,onBlur:Q,renderIcon:At,className:`${i}__close-condition`,"data-name":"closeCondition"})}),_(h,m.conditions)&&n.jsx(Ce,{onClick:()=>{y(h)},addConditionSubGroupHandler:()=>{C(h)},showConditionSubGroupPreviewHandler:S,hideConditionSubGroupPreviewHandler:N,enableSubGroup:$=="tree",showConditionPreviewHandler:H,hideConditionPreviewHandler:O,className:`${i}__gap ${i}__gap-left`})]})};Ne.propTypes={addConditionHandler:t.func,addConditionSubGroupHandler:t.func,aria:t.object,condition:t.object,conditionIndex:t.number,conjunction:t.string,group:t.object,hideConditionPreviewHandler:t.func,hideConditionSubGroupPreviewHandler:t.func,isLastCondition:t.func,isStatement:t.bool,onChange:t.func,onConnectorOperatorChange:t.func,onRemove:t.func,onStatementChange:t.func,showConditionPreviewHandler:t.func,showConditionSubGroupPreviewHandler:t.func,state:t.object};Ne.__docgenInfo={description:"This component build each block of condition consisting of property, operator value and close button.",methods:[],displayName:"ConditionBlock",props:{addConditionHandler:{description:"callback to add a new condition",type:{name:"func"},required:!1},addConditionSubGroupHandler:{description:"callback to add a new condition subgroup",type:{name:"func"},required:!1},aria:{description:"object hold aria attributes",type:{name:"object"},required:!1},condition:{description:"",type:{name:"object"},required:!1},conditionIndex:{description:"",type:{name:"number"},required:!1},conjunction:{description:"string that decides to show the condition connector",type:{name:"string"},required:!1},group:{description:"object that hold the current group object where is condition is part of",type:{name:"object"},required:!1},hideConditionPreviewHandler:{description:"handler for hiding sub group preview",type:{name:"func"},required:!1},hideConditionSubGroupPreviewHandler:{description:"handler for hiding sub group preview",type:{name:"func"},required:!1},isLastCondition:{description:"",type:{name:"func"},required:!1},isStatement:{description:"boolean that decides to show the statement(if/ excl.if)",type:{name:"bool"},required:!1},onChange:{description:"callback to update the current condition of the state tree",type:{name:"func"},required:!1},onConnectorOperatorChange:{description:"callback to handle the connector(and/or) change",type:{name:"func"},required:!1},onRemove:{description:"callback for Remove a condition",type:{name:"func"},required:!1},onStatementChange:{description:"callback to handle the statement(if/ excl.if) change",type:{name:"func"},required:!1},showConditionPreviewHandler:{description:"handler for showing add condition preview",type:{name:"func"},required:!1},showConditionSubGroupPreviewHandler:{description:"handler for showing sub group preview",type:{name:"func"},required:!1},state:{description:"object that hold the current condition",type:{name:"object"},required:!1}}};const _e=({previewType:e,group:o})=>{const[r,s]=b.useState(!1),[l,a,c,d]=M(["valueText","operatorText","propertyText","ifText"]);b.useEffect(()=>{s(!0)},[]);const u=()=>n.jsxs("div",{className:`${i}__preview-condition`,children:[n.jsx(L,{label:l,renderIcon:rn}),n.jsx(L,{label:a}),n.jsx(L,{label:c})]});return n.jsxs(n.Fragment,{children:[e=="newGroup"&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:F([`${i}__group__row ${i}__group-preview `,{[`${i}__group-preview-animate`]:r}]),children:n.jsx(L,{className:`${i}__statement-button`,label:o.groupOperator})}),n.jsxs("div",{"aria-hidden":!0,className:F([`${i}__group ${i}__condition-wrapper ${i}__group-preview ${i}__group-wrapper `,{[`${i}__group-preview-animate`]:r}]),children:[n.jsx("div",{className:`${i}__gap`,children:n.jsx(L,{className:`${i}__statement-button`,label:d})}),u()]})]}),e=="subGroup"&&n.jsx("div",{className:F([`${i}__group__row ${i}__group-preview `,{[`${i}__group-preview-animate`]:r}]),children:n.jsxs("div",{className:`${i}__condition-block  ${i}__gap`,children:[n.jsx(L,{label:o.groupOperator,className:`${i}__statement-button`,popOverClassName:`${i}__gap`}),n.jsxs("div",{className:`${i}__group ${i}__condition-wrapper`,children:[n.jsx(Te,{className:`${i}__gap ${i}__groupConnector`,operator:d}),u()]})]})}),e=="condition"&&n.jsx("div",{className:F([`${i}__group__row ${i}__group-preview `,{[`${i}__group-preview-animate`]:r}]),children:n.jsxs("div",{className:`${i}__condition-block  ${i}__gap`,children:[n.jsx(L,{label:o.groupOperator,className:`${i}__statement-button`,popOverClassName:`${i}__gap`}),u()]})})]})};_e.propTypes={group:t.object,previewType:t.oneOf(["condition","subGroup","newGroup"])};_e.__docgenInfo={description:"",methods:[],displayName:"ConditionPreview",props:{group:{description:"current conditional group",type:{name:"object"},required:!1},previewType:{description:"type of review to be displayed",type:{name:"enum",value:[{value:"'condition'",computed:!1},{value:"'subGroup'",computed:!1},{value:"'newGroup'",computed:!1}]},required:!1}}};const ke=({group:e,aria:o,onRemove:r,onChange:s,className:l})=>{const[a,c,d]=M(["conditionBuilderGroupText","conditionText","conditionBuilderText"]),{variant:u,conditionBuilderRef:p}=b.useContext(Z),[m,f]=b.useState(-1),[h,y]=b.useState(-1),C=b.useRef(),g=(v,x,T)=>{if(e.conditions.length>1)if(u=="tree"?H(x):O(x,T),e.conditions[1].conditions&&e.conditions[1].id!==v){const j=e.conditions.reduce((G,X)=>X.conditions?G.concat(X.conditions):G,[]),I={groups:[],conditions:[]};j.forEach(G=>{G.conditions?I.groups.push(G):I.conditions.push(G)}),s({...e,conditions:[...I.conditions,...I.groups]})}else s({...e,conditions:e.conditions.filter(j=>v!==j.id)});else r(x)},N=(v,x)=>{const T=[...e.conditions.slice(0,x),v,...e.conditions.slice(x+1)];s({...e,conditions:T})},S=v=>{let x={property:void 0,operator:"",value:"",popoverToOpen:"propertyField",id:A()};s({...e,conditions:[...e.conditions.slice(0,v+1),x,...e.conditions.slice(v+1)]})},O=(v,x)=>{var j;const T=(j=v.currentTarget.closest(`.${i}__group`))==null?void 0:j.querySelectorAll('[data-name="closeCondition"]');x==T.length-1?W(T[x-1],p):W(T[x+1],p)},H=v=>{var G,X,se,le,E,ce,V,U;const x=(X=(G=v.currentTarget)==null?void 0:G.closest('[role="row"]'))==null?void 0:X.getAttribute("aria-level"),T=(le=(se=v.currentTarget)==null?void 0:se.closest('[role="row"]'))==null?void 0:le.getAttribute("aria-posinset"),j=(E=C.current)==null?void 0:E.querySelector(`[aria-level="${x}"][aria-posinset="${Number(T)+1}"]`),I=(ce=C.current)==null?void 0:ce.querySelector(`[aria-level="${x}"][aria-posinset="${Number(T)-1}"]`);if(j!=null&&j.classList.contains(`${i}__condition-block`))W(j==null?void 0:j.querySelector('[data-name="closeCondition"]'),p);else if(I!=null&&I.classList.contains(`${i}__condition-block`))W(I==null?void 0:I.querySelector('[data-name="closeCondition"]'),p);else{const Q=(V=C.current)==null?void 0:V.querySelectorAll(`[aria-level="${Number(x)-1}"][role="row"]`),xe=(U=C.current)==null?void 0:U.querySelector(`[aria-level="${Number(x)+1}"][role="row"]`);if(xe){const we={ariaLevel:Number(xe.ariaLevel)-1,ariaPosInSet:xe.ariaPosInSet};setTimeout(()=>{const Oe=C.current.querySelector(`[role="row"][aria-level="${we.ariaLevel}"][aria-posinset="${we.ariaPosInSet}"]`);W(Oe,p)},0)}else(Q==null?void 0:Q.length)>1&&W(Q[Q.length-2],p)}},_=v=>{s({...e,conditions:[...e.conditions.slice(0,v+1),{groupOperator:"and",statement:"if",conditions:[{property:void 0,operator:"",value:"",popoverToOpen:"propertyField",id:A()}],id:A()},...e.conditions.slice(v+1)]})},w=(v,x)=>v+1>=x.length||x.length-1!=v&&x[v+1].conditions,$=v=>{y(v)},k=()=>{y(-1)},D=v=>{f(v)},P=()=>{f(-1)},K=v=>{var T;const x=(T=Fe.find(j=>j.id==v))==null?void 0:T.connector;s({...e,groupOperator:x,statement:v})},z=v=>{s({...e,groupOperator:v})},R=()=>{var v;return n.jsx("div",{className:`${l}  eachGroup`,children:n.jsx("div",{className:`${i}__condition-wrapper`,role:"grid","aria-label":d,children:(v=e==null?void 0:e.conditions)==null?void 0:v.map((x,T)=>n.jsx("div",{className:`${i}__group-wrapper`,children:n.jsx(Ne,{conjunction:T>0?e.groupOperator:void 0,aria:{level:o.level+1,posinset:T+1,setsize:e.conditions.length},isStatement:T==0,condition:x,group:e,conditionIndex:T,onChange:j=>{N(j,T)},addConditionHandler:S,onRemove:j=>{g(x.id,j,T)},onConnectorOperatorChange:z,onStatementChange:K,isLastCondition:w})},x.id))})})},J=()=>{var v;return n.jsxs("div",{className:`${l} ${i}__condition-wrapper`,role:o.level===1?"rowgroup":void 0,"aria-label":o.level==1?a:void 0,ref:C,children:[n.jsx("div",{tabIndex:0,role:"row","aria-level":o.level,"aria-posinset":o.posinset,"aria-setsize":o.setsize,children:n.jsx(L,{label:e.statement,title:c,"data-name":"connectorField",popOverClassName:`${i}__gap`,className:`${i}__statement-button`,children:n.jsx(ne,{conditionState:{value:e.statement,label:c},onChange:(x,T)=>{ye(T,p),K(x)},config:{options:Fe}})})}),(v=e==null?void 0:e.conditions)==null?void 0:v.map((x,T)=>n.jsxs(b.Fragment,{children:[x.conditions?n.jsxs("div",{className:F(`${i}__condition-block subgroup  ${i}__gap`,{[`${i}__gap-bottom`]:e.conditions.length<T+1}),children:[n.jsx(Te,{className:`${i}__gap ${i}__gap-bottom ${i}__groupConnector`,operator:e.groupOperator,"aria-hidden":!0}),n.jsx(ke,{aria:{level:o.level+1,posinset:T+1,setsize:e.conditions.length},className:`${i}__group`,group:x,onChange:j=>{N(j,T)},onRemove:j=>{g(x.id,j)}})]}):n.jsx("div",{children:n.jsx(Ne,{conjunction:T>0?e.groupOperator:void 0,aria:{level:o.level+1,posinset:T+1,setsize:e.conditions.length},isStatement:!1,condition:x,group:e,conditionIndex:T,addConditionHandler:S,addConditionSubGroupHandler:_,onChange:j=>{N(j,T)},onRemove:j=>{g(x.id,j)},onConnectorOperatorChange:z,onStatementChange:K,showConditionSubGroupPreviewHandler:()=>{$(T)},hideConditionSubGroupPreviewHandler:k,showConditionPreviewHandler:()=>{D(T)},hideConditionPreviewHandler:P,isLastCondition:w})}),T==h&&n.jsx(_e,{previewType:"subGroup",group:e}),T==m&&n.jsx(_e,{previewType:"condition",group:e})]},x.id))]})};return n.jsxs(n.Fragment,{children:[u=="tree"&&J(),u=="sentence"&&R()]})};ke.propTypes={aria:t.object,className:t.string,group:t.object,onChange:t.func,onRemove:t.func};ke.__docgenInfo={description:`state - this is the current group that is being rendered . This can be a inner group or outer group
All the inner components of group are called from here.
@returns`,methods:[],displayName:"ConditionGroupBuilder",props:{aria:{description:"object contains the aria attributes",type:{name:"object"},required:!1},className:{description:"Provide an optional class to be applied to the containing node.",type:{name:"string"},required:!1},group:{description:"",type:{name:"object"},required:!1},onChange:{description:"callback to update the current condition of the state tree",type:{name:"func"},required:!1},onRemove:{description:"call back to remove the particular group from the state tree",type:{name:"func"},required:!1}}};const Xt=()=>{const{rootState:e,setRootState:o}=b.useContext(Z),[r]=M(["conditionText"]),s=l=>{o({...e,operator:l})};return n.jsx("div",{className:`${i}__group-separator ${i}__group-separator-row`,role:"row",tabIndex:-1,"aria-level":1,children:n.jsx(L,{label:e.operator,title:r,"data-name":"connectorField",popOverClassName:`${i}__gap`,className:`${i}__statement-button`,children:n.jsx(ne,{conditionState:{value:e.operator,label:r},onChange:s,config:{options:Kt}})})})};Xt.__docgenInfo={description:"",methods:[],displayName:"GroupConnector"};const Xe=({actions:e,className:o})=>{const{actionState:r,setActionState:s}=b.useContext(Z),[l,a]=b.useState(-1),[c,d,u,p,m,f]=M(["actionsText","then","and","removeActionText","addActionText","actionSectionText"]),h=()=>{const S={id:A(),label:void 0,popoverToOpen:"valueField"};s([...r,S])},y=(S,O)=>{const _={...e.find(w=>w.id===S),id:r[O].id};s([...r.slice(0,O),_,...r.slice(O+1)])},C=S=>{s(r.filter(O=>O.id!==S))},g=S=>{a(S)},N=()=>{a(-1)};return n.jsxs("div",{className:o,children:[n.jsx(Ve,{className:`${i}__heading`,level:4,children:n.jsx(We,{children:c})}),n.jsxs("div",{className:`${i}__condition-wrapper`,role:"grid","aria-label":f,children:[r==null?void 0:r.map((S,O)=>n.jsxs("div",{role:"row",className:F(`${i}__condition-block ${i}__gap ${i}__gap-bottom`,{[`${i}__condition__deletion-preview`]:l==O}),children:[n.jsx(L,{className:`${i}__statement-button`,tabIndex:0,popOverClassName:`${i}__gap`,label:O===0?d:u}),n.jsx(L,{label:S.label,title:c,condition:S,"data-name":"valueField",type:"option",children:n.jsx(Ae,{conditionState:{value:S.label},onChange:H=>y(H.id,O),config:{options:e}})}),n.jsx("span",{role:"gridcell","aria-label":p,children:n.jsx(oe,{hideLabel:!0,label:p,onClick:()=>C(S.id),onMouseEnter:()=>g(O),onMouseLeave:N,onFocus:()=>g(O),onBlur:N,renderIcon:At,className:`${i}__close-condition`,"data-name":"closeCondition"})}),r.length===O+1&&n.jsx(Ce,{onClick:h,className:`${i}__gap ${i}__gap-left`,buttonLabel:m,tabIndex:0})]},S.id)),r.length===0&&n.jsx(Ce,{onClick:h,className:`${i}__gap ${i}__gap-left`,buttonLabel:m,tabIndex:0})]})]})};Xe.propTypes={actions:t.arrayOf(t.shape({id:t.oneOfType([t.string,t.number]).isRequired,label:t.string.isRequired})),className:t.string};Xe.__docgenInfo={description:"",methods:[],displayName:"ConditionBuilderActions",props:{actions:{description:"optional array of object that give the list of actions.",type:{name:"arrayOf",value:{name:"shape",value:{id:{name:"union",value:[{name:"string"},{name:"number"}],required:!0},label:{name:"string",required:!0}}}},required:!1},className:{description:"Provide an optional class to be applied to the containing node.",type:{name:"string"},required:!1}}};const Ye=({startConditionLabel:e,getConditionState:o,getActionsState:r,initialState:s,actions:l})=>{var w;const{rootState:a,setRootState:c,variant:d,actionState:u}=b.useContext(Z),[p,m]=b.useState(!1),[f,h]=b.useState(!1),[y,C]=M(["addConditionGroupText","conditionHeadingText"]),g=()=>{h(!0)},N=()=>{h(!1)};b.useEffect(()=>{var $;($=a==null?void 0:a.groups)!=null&&$.length?m(!0):m(!1),o&&o(a)},[a]),b.useEffect(()=>{r==null||r(u)},[u]);const S=()=>{m(!0),c(s??Cn)},O=b.useCallback($=>{c({...a,groups:a.groups.filter(k=>$!==k.id)})},[c,a]),H=($,k)=>{const D=[...a.groups.slice(0,k),$,...a.groups.slice(k+1)];c({...a,groups:D})},_=()=>{const $={groupOperator:"and",statement:"if",id:A(),conditions:[{property:void 0,operator:"",value:"",popoverToOpen:"propertyField",id:A()}]};c({...a,groups:[...a.groups,$]})};return p?n.jsxs(n.Fragment,{children:[n.jsx(Ve,{className:`${i}__heading`,level:4,children:n.jsx(We,{children:C})}),n.jsxs("div",{className:`${i}__content-container`,role:"treegrid","aria-label":"condition builder tree",children:[a&&((w=a==null?void 0:a.groups)==null?void 0:w.map(($,k)=>n.jsxs("div",{className:`${i}__group-wrapper`,children:[n.jsx(ke,{className:`${i}__group`,aria:{level:1,posinset:k*2+1,setsize:a.groups.length*2},group:$,onRemove:()=>{O($.id)},onChange:D=>{H(D,k)}}),k<a.groups.length-1&&n.jsx(Xt,{})]},$.id))),d=="tree"&&n.jsx("div",{role:"row",tabIndex:-1,"aria-level":1,className:`${i}__add-group`,children:n.jsx(oe,{renderIcon:Vt,onClick:_,onMouseEnter:g,onMouseLeave:N,onFocus:g,onBlur:N,className:`${i}__add-condition-group `,hideLabel:!0,label:y,wrapperProps:{role:"gridcell","aria-label":y}})}),f&&n.jsx(_e,{previewType:"newGroup",group:{groupOperator:a.operator}})]}),l&&n.jsx(Xe,{actions:l,className:`${i}__actions-container`,variant:d})]}):n.jsx(Nt,{className:`${i}__addConditionText-button`,renderIcon:$=>n.jsx(Ht,{...$}),iconDescription:e,kind:"ghost",size:"sm",onClick:S,children:e})};Ye.propTypes={actions:t.arrayOf(t.shape({id:t.oneOfType([t.string,t.number]).isRequired,label:t.string.isRequired})),getActionsState:t.func,getConditionState:t.func.isRequired,initialState:t.shape({groups:t.arrayOf(t.shape({groupOperator:t.string.isRequired,statement:t.string.isRequired,conditions:t.arrayOf(t.oneOfType([t.shape({property:t.string.isRequired,operator:t.string.isRequired,value:t.oneOfType([t.string,t.arrayOf(t.shape({id:t.string,label:t.string})),t.shape({id:t.string,label:t.string})])}),t.object]))})),operator:t.string}),startConditionLabel:t.string.isRequired};Ye.__docgenInfo={description:"",methods:[],displayName:"ConditionBuilderContent",props:{actions:{description:"optional array of object that give the list of actions.",type:{name:"arrayOf",value:{name:"shape",value:{id:{name:"union",value:[{name:"string"},{name:"number"}],required:!0},label:{name:"string",required:!0}}}},required:!1},getActionsState:{description:"callback functions that will provide the updated action state back.",type:{name:"func"},required:!1},getConditionState:{description:"This is a callback function that returns the updated state",type:{name:"func"},required:!0},initialState:{description:"Optional prop if the condition building need to start from a predefined initial state",type:{name:"shape",value:{groups:{name:"arrayOf",value:{name:"shape",value:{groupOperator:{name:"string",required:!0},statement:{name:"string",required:!0},conditions:{name:"arrayOf",value:{name:"union",value:[{name:"shape",value:{property:{name:"string",required:!0},operator:{name:"string",required:!0},value:{name:"union",value:[{name:"string"},{name:"arrayOf",value:{name:"shape",value:{id:{name:"string",required:!1},label:{name:"string",required:!1}}}},{name:"shape",value:{id:{name:"string",required:!1},label:{name:"string",required:!1}}}],required:!1}}},{name:"object"}]},required:!1}}},required:!1},operator:{name:"string",required:!1}}},required:!1},startConditionLabel:{description:"",type:{name:"string"},required:!0}}};const Je="ConditionBuilder";let re=q.forwardRef(({className:e,inputConfig:o,startConditionLabel:r,popOverSearchThreshold:s,getOptions:l,initialState:a,getConditionState:c,getActionsState:d,variant:u="sentence",actions:p,translateWithId:m,...f},h)=>{const y=b.useRef(),C=h||y,g=N=>{Tn(N,C,u)};return n.jsx(Me,{inputConfig:o,popOverSearchThreshold:s,getOptions:l,variant:u,translateWithId:m,conditionBuilderRef:C,children:n.jsx("div",{...f,className:F(i,e,{}),role:"main",ref:C,...sn(Je),children:n.jsx(yn,{className:`${i}__${u}`,onKeyDown:g,children:n.jsx(Ye,{startConditionLabel:r,getConditionState:c,getActionsState:d,initialState:a,actions:p})})})})});re=Ee.checkComponentEnabled(re,Je);re.displayName=Je;re.propTypes={actions:t.arrayOf(t.shape({id:t.oneOfType([t.string,t.number]).isRequired,label:t.string.isRequired})),className:t.string,getActionsState:t.func,getConditionState:t.func.isRequired,getOptions:t.func,initialState:t.shape({groups:t.arrayOf(t.shape({groupOperator:t.string.isRequired,statement:t.string.isRequired,conditions:t.arrayOf(t.oneOfType([t.shape({property:t.string.isRequired,operator:t.string.isRequired,value:t.oneOfType([t.string,t.arrayOf(t.shape({id:t.string,label:t.string})),t.shape({id:t.string,label:t.string})])}),t.object]))})),operator:t.string}),inputConfig:t.shape({properties:t.arrayOf(t.shape({id:t.string.isRequired,label:t.string.isRequired,icon:t.oneOfType([t.func,t.object]),type:t.oneOf(["text","textarea","number","date","option","time","custom"]).isRequired,config:t.shape({options:t.arrayOf(t.shape({id:t.string.isRequired,label:t.string.isRequired,icon:t.oneOfType([t.func,t.object])})),component:t.func,operators:t.arrayOf(t.shape({id:t.string.isRequired,label:t.string.isRequired}))})}))}).isRequired,popOverSearchThreshold:t.number.isRequired,startConditionLabel:t.string.isRequired,translateWithId:t.func,variant:t.oneOf(["tree","sentence"])};re.__docgenInfo={description:"TODO: A description of the component.",methods:[],displayName:"ConditionBuilder",props:{variant:{defaultValue:{value:"'sentence'",computed:!1},description:"Provide the condition builder variant: sentence/ tree",type:{name:"enum",value:[{value:"'tree'",computed:!1},{value:"'sentence'",computed:!1}]},required:!1},actions:{description:"optional array of actions",type:{name:"arrayOf",value:{name:"shape",value:{id:{name:"union",value:[{name:"string"},{name:"number"}],required:!0},label:{name:"string",required:!0}}}},required:!1},className:{description:"Provide an optional class to be applied to the containing node.",type:{name:"string"},required:!1},getActionsState:{description:"This is a callback that gives back the updated action state",type:{name:"func"},required:!1},getConditionState:{description:"This is a callback that gives back updated condition state",type:{name:"func"},required:!0},getOptions:{description:`This is a callback that get triggered when  you want to dynamically fetch options.
 Component call this when the option array is not passed against a property with type as option in the input config.
This is an asynchronous callback that can return a promise , and you need to resolve the promise with options array in the valid format.
You will receive the root condition state and current condition as the 2 arguments.
eg: const getOptions = async (conditionState,condition) => {
  switch (condition.property) {
    case 'continent':
      return new Promise((resolve) => {
        const continents=[{
      label: 'Africa',
      id: 'Africa',
    },...]
          resolve(continents);
      });
      default:
      return [];
  }
};`,type:{name:"func"},required:!1},initialState:{description:`Optional prop if you want to pass a saved condition state.
 This object should respect the structure of condition state that is available in getConditionState callback`,type:{name:"shape",value:{groups:{name:"arrayOf",value:{name:"shape",value:{groupOperator:{name:"string",required:!0},statement:{name:"string",required:!0},conditions:{name:"arrayOf",value:{name:"union",value:[{name:"shape",value:{property:{name:"string",required:!0},operator:{name:"string",required:!0},value:{name:"union",value:[{name:"string"},{name:"arrayOf",value:{name:"shape",value:{id:{name:"string",required:!1},label:{name:"string",required:!1}}}},{name:"shape",value:{id:{name:"string",required:!1},label:{name:"string",required:!1}}}],required:!1}}},{name:"object"}]},required:!1}}},required:!1},operator:{name:"string",required:!1}}},required:!1},inputConfig:{description:"This is a mandatory prop that defines the input to the condition builder.",type:{name:"shape",value:{properties:{name:"arrayOf",value:{name:"shape",value:{id:{name:"string",required:!0},label:{name:"string",required:!0},icon:{name:"union",value:[{name:"func"},{name:"object"}],required:!1},type:{name:"enum",value:[{value:"'text'",computed:!1},{value:"'textarea'",computed:!1},{value:"'number'",computed:!1},{value:"'date'",computed:!1},{value:"'option'",computed:!1},{value:"'time'",computed:!1},{value:"'custom'",computed:!1}],required:!0},config:{name:"shape",value:{options:{name:"arrayOf",value:{name:"shape",value:{id:{name:"string",required:!0},label:{name:"string",required:!0},icon:{name:"union",value:[{name:"func"},{name:"object"}],required:!1}}},required:!1},component:{name:"func",required:!1},operators:{name:"arrayOf",value:{name:"shape",value:{id:{name:"string",required:!0},label:{name:"string",required:!0}}},required:!1}},required:!1}}},required:!1}}},required:!0},popOverSearchThreshold:{description:"Provide an mandatory numeric value that will be used to enable search option in the popovers with list.",type:{name:"number"},required:!0},startConditionLabel:{description:"Provide a label to the button that starts condition builder",type:{name:"string"},required:!0},translateWithId:{description:`Optional prop, if you need to pass translations to the texts on the component instead of the defined defaults.
This callback function will receive the message id and you need to return the corresponding text for that id.
The message id will be one of [   "ifText","addConditionText",   "addConditionGroupText",   "addSubgroupText",   "conditionText",   "propertyText",   "operatorText",   "valueText",   "connectorText",   "conditionRowText","conditionRowGroupText","conditionBuilderText","actionSectionText",   "removeConditionText",   "addConditionRowText",   "startText",   "endText",   "clearSearchText",   "actionsText",   "then",   "removeActionText",   "addActionText",   "invalidText",  "invalidNumberWarnText"]
]`,type:{name:"func"},required:!1}}};function rt(e){const o={a:"a",h1:"h1",h2:"h2",li:"li",ul:"ul",...$t(),...e.components};return n.jsxs(n.Fragment,{children:[n.jsx(o.h1,{id:"conditionbuilder",children:"ConditionBuilder"}),`
`,n.jsx(o.h2,{id:"table-of-contents",children:"Table of Contents"}),`
`,n.jsxs(o.ul,{children:[`
`,n.jsx(o.li,{children:n.jsx(o.a,{href:"#overview",children:"Overview"})}),`
`,n.jsx(o.li,{children:n.jsx(o.a,{href:"#example-usage",children:"Example usage"})}),`
`,n.jsx(o.li,{children:n.jsx(o.a,{href:"#component-api",children:"Component API"})}),`
`]}),`
`,n.jsx(o.h2,{id:"overview",children:"Overview"}),`
`,`
`,n.jsx(o.h2,{id:"example-usage",children:"Example usage"}),`
`,`
`,n.jsx(Qt,{children:n.jsx(en,{of:ee})}),`
`,n.jsx(o.h2,{id:"code-sample",children:"Code sample"}),`
`,`
`,n.jsx(o.h2,{id:"component-api",children:"Component API"}),`
`,n.jsx(tn,{})]})}function An(e={}){const{wrapper:o}={...$t(),...e.components};return o?n.jsx(o,{...e,children:n.jsx(rt,{...e})}):rt(e)}const kn="",Qe=({onChange:e,conditionState:o})=>{const r=s=>{e(s.target.value)};return n.jsx("div",{className:"custom-component",children:n.jsx(Ot,{labelText:"labelText",hideLabel:!0,value:o.value??"",id:"customInput",onChange:r})})};Qe.propTypes={conditionState:t.object,onChange:t.func};Qe.__docgenInfo={description:"",methods:[],displayName:"CustomInput",props:{conditionState:{description:"current condition state",type:{name:"object"},required:!1},onChange:{description:"This function need to be called that provides a label which should be shown in the condition after a user has made their selection / set their value",type:{name:"func"},required:!1}}};const On=[{label:"is greater than",id:"greater"},{label:"is greater than or equal to",id:"greaterEqual"}],ve={properties:[{id:"continent",label:"Continent",icon:Pt,type:"option",config:{options:[{label:"Africa",id:"Africa"},{label:"Antarctica",id:"Antarctica"},{label:"Asia",id:"Asia"},{label:"Australia",id:"Australia"},{label:"Europe",id:"Europe"}]}},{id:"region",label:"Region",icon:It,type:"option",config:{options:[{label:"Afghanistan",id:"AF",icon:Y},{label:"Albania",id:"AL",icon:Y},{label:"Algeria",id:"AG",icon:Y},{label:"Andorra",id:"AN",icon:Y},{label:"India",id:"India",icon:Y}]}},{id:"color",label:"Color",icon:kt,type:"option",config:{options:[{label:"black",id:"black"},{label:"silver",id:"silver"},{label:"gray",id:"gray"},{label:"white",id:"white"},{label:"maroon",id:"maroon"},{label:"red",id:"red"},{label:"purple",id:"purple"},{label:"fuchsia",id:"fuchsia"},{label:"green",id:"green"},{label:"lime",id:"lime"},{label:"olive",id:"olive"},{label:"yellow",id:"yellow"},{label:"navy",id:"navy"},{label:"blue",id:"blue"},{label:"teal",id:"teal"},{label:"aqua",id:"aqua"}]}},{id:"id",label:"ID",icon:Re,type:"text",config:{}},{id:"id_long",label:"Id Long",icon:Re,type:"textarea",config:{}},{id:"price",label:"Price",icon:Rt,type:"number",config:{min:0,step:1,unit:"Dollars"}},{id:"date",label:"Date",icon:qe,type:"date",config:{}},{id:"time",label:"Time",icon:qe,type:"time",config:{timeZones:["IST","CET","UTC","LOCAL"]}},{id:"delivery",label:"Delivery",icon:Bt,type:"option",config:{options:[{label:"Processing",id:"Processing"},{label:"Preparing for dispatch",id:"Preparing for dispatch"},{label:"Dispatched",id:"Dispatched"},{label:"In delivery",id:"In delivery"},{label:"Delivered",id:"Delivered"}]}},{id:"season",label:"Season",icon:Ft,type:"option",config:{options:[{label:"Winter",id:"Winter"},{label:"Spring",id:"Spring"},{label:"Summer",id:"Summer"},{label:"Fall",id:"Fall"}]}},{id:"product",label:"Product",icon:Lt,type:"custom",config:{component:Qe,operators:On}}]},Pn={properties:[{id:"continent",label:"Continent",icon:Pt,type:"option",config:{}},{id:"region",label:"Region",icon:It,type:"option",config:{}},{id:"color",label:"Color",icon:kt,type:"option",config:{}},{id:"id",label:"ID",icon:Re,type:"text",config:{}},{id:"price",label:"Price",icon:Rt,type:"number",config:{min:0,step:1,unit:"Dollars"}},{id:"date",label:"Date",icon:qe,type:"date",config:{}},{id:"time",label:"Time",icon:qe,type:"time",config:{timeZones:["IST","CET","UTC","LOCAL"]}},{id:"product",label:"Product",icon:Lt,type:"text",config:{}},{id:"delivery",label:"Delivery",icon:Bt,type:"option",config:{options:[{label:"Processing",id:"Processing"},{label:"Preparing for dispatch",id:"Preparing for dispatch"},{label:"Dispatched",id:"Dispatched"},{label:"In delivery",id:"In delivery"},{label:"Delivered",id:"Delivered"}]}},{id:"season",label:"Season",icon:Ft,type:"option",config:{options:[{label:"Winter",id:"Winter"},{label:"Spring",id:"Spring"},{label:"Summer",id:"Summer"},{label:"Fall",id:"Fall"}]}}]},In={operator:"or",groups:[{groupOperator:"and",statement:"if",id:A(),conditions:[{property:"region",operator:"is",value:"IL",id:A()},{property:"delivery",operator:"is",value:"processing",id:A()},{property:"delivery",operator:"is",value:"processing",id:A()},{property:"delivery",operator:"is",value:"processing",id:A()},{groupOperator:"and",statement:"if",id:A(),conditions:[{property:"region",operator:"is",value:"IL",id:A()},{property:"delivery",operator:"is",value:"processing",id:A()},{property:"delivery",operator:"is",value:"processing",id:A()},{property:"delivery",operator:"is",value:"processing",id:A()},{groupOperator:"and",statement:"if",id:A(),conditions:[{property:"region",operator:"is",value:"IL",id:A()},{property:"delivery",operator:"is",value:"processing",id:A()},{property:"delivery",operator:"is",value:"processing",id:A()}]}]}]},{groupOperator:"and",statement:"if",id:A(),conditions:[{property:"continent",operator:"is",value:"Asia",id:A()},{property:"region",operator:"is",value:"India",id:A()},{property:"price",operator:"is",value:"20",id:A()}]}]},Dn={groups:[{groupOperator:"and",statement:"if",id:A(),conditions:[{property:"region",operator:"oneOf",value:[{label:"Africa",id:"Africa"},{label:"India",id:"Ind"}],id:A()},{property:"delivery",operator:"is",value:"processing",id:A()},{property:"price",operator:"is",value:"3 Dollars",id:A()}]}]},Do={title:"IBM Products/Components/ConditionBuilder",component:re,tags:["autodocs"],parameters:{layout:"fullscreen",styles:kn,docs:{page:An}}},Rn=()=>[{label:"Africa",id:"Africa"},{label:"Antarctica",id:"Antarctica"},{label:"Asia",id:"Asia"},{label:"Australia",id:"Australia"},{label:"Europe",id:"Europe"}],Bn=()=>[{label:"Afghanistan",id:"AF",icon:Y},{label:"Albania",id:"AL",icon:Y},{label:"Algeria",id:"AG",icon:Y},{label:"Andorra",id:"AN",icon:Y}],Ln=()=>[{label:"black",id:"black"},{label:"silver",id:"silver"},{label:"gray",id:"gray"},{label:"white",id:"white"},{label:"maroon",id:"maroon"},{label:"red",id:"red"},{label:"purple",id:"purple"},{label:"fuchsia",id:"fuchsia"},{label:"green",id:"green"},{label:"lime",id:"lime"},{label:"olive",id:"olive"},{label:"yellow",id:"yellow"},{label:"navy",id:"navy"},{label:"blue",id:"blue"},{label:"teal",id:"teal"},{label:"aqua",id:"aqua"}],Fn=async(e,{property:o})=>{switch(o){case"continent":return new Promise(r=>{setTimeout(()=>{r(Rn())},2e3)});case"region":return new Promise(r=>{setTimeout(()=>{r(Bn())},2e3)});case"color":return new Promise(r=>{setTimeout(()=>{r(Ln())},2e3)});default:return[]}},Hn={startConditionLabel:"Add condition",popOverSearchThreshold:4,getConditionState:e=>{console.log(e)}},Yt=[{id:A(),label:"Add item to cart"},{id:A(),label:"Proceed item to checkout"}],Gn=e=>({ifText:"if",addConditionText:"Add condition",addConditionGroupText:"Add condition group",addSubgroupText:"Add subgroup"})[e],ae=e=>{const o=b.useRef();return n.jsx(re,{...e,ref:o,...Hn})},ee=ae.bind({});ee.storyName="Condition Builder";ee.args={inputConfig:ve,variant:"sentence"};const ue=ae.bind({});ue.storyName="With dynamic options";ue.args={inputConfig:Pn,getOptions:Fn,variant:"sentence"};const me=ae.bind({});me.storyName="With initial state";me.args={initialState:Dn,inputConfig:ve,variant:"sentence",translateWithId:Gn};const fe=ae.bind({});fe.storyName="With Actions";fe.args={inputConfig:ve,variant:"sentence",actions:Yt,getActionsState:e=>{console.log("action state",e)}};const he=ae.bind({});he.storyName="Condition Builder(Tree)";he.args={inputConfig:ve,variant:"tree"};const ge=ae.bind({});ge.storyName="With initial state(Tree)";ge.args={initialState:In,inputConfig:ve,variant:"tree"};const be=ae.bind({});be.storyName="With Actions(Tree)";be.args={inputConfig:ve,variant:"tree",actions:Yt,getActionsState:e=>{}};var it,at,st,lt,ct;ee.parameters={...ee.parameters,docs:{...(it=ee.parameters)==null?void 0:it.docs,source:{originalSource:`args => {
  const ref = useRef();
  return <ConditionBuilder {...args} ref={ref} {...requiredProps} />;
}`,...(st=(at=ee.parameters)==null?void 0:at.docs)==null?void 0:st.source},description:{story:`TODO: Declare one or more stories, generally one per design scenario.
NB no need for a 'Playground' because all stories have all controls anyway.`,...(ct=(lt=ee.parameters)==null?void 0:lt.docs)==null?void 0:ct.description}}};var dt,pt,ut;ue.parameters={...ue.parameters,docs:{...(dt=ue.parameters)==null?void 0:dt.docs,source:{originalSource:`args => {
  const ref = useRef();
  return <ConditionBuilder {...args} ref={ref} {...requiredProps} />;
}`,...(ut=(pt=ue.parameters)==null?void 0:pt.docs)==null?void 0:ut.source}}};var mt,ft,ht;me.parameters={...me.parameters,docs:{...(mt=me.parameters)==null?void 0:mt.docs,source:{originalSource:`args => {
  const ref = useRef();
  return <ConditionBuilder {...args} ref={ref} {...requiredProps} />;
}`,...(ht=(ft=me.parameters)==null?void 0:ft.docs)==null?void 0:ht.source}}};var gt,bt,yt;fe.parameters={...fe.parameters,docs:{...(gt=fe.parameters)==null?void 0:gt.docs,source:{originalSource:`args => {
  const ref = useRef();
  return <ConditionBuilder {...args} ref={ref} {...requiredProps} />;
}`,...(yt=(bt=fe.parameters)==null?void 0:bt.docs)==null?void 0:yt.source}}};var vt,xt,Ct;he.parameters={...he.parameters,docs:{...(vt=he.parameters)==null?void 0:vt.docs,source:{originalSource:`args => {
  const ref = useRef();
  return <ConditionBuilder {...args} ref={ref} {...requiredProps} />;
}`,...(Ct=(xt=he.parameters)==null?void 0:xt.docs)==null?void 0:Ct.source}}};var _t,Tt,wt;ge.parameters={...ge.parameters,docs:{...(_t=ge.parameters)==null?void 0:_t.docs,source:{originalSource:`args => {
  const ref = useRef();
  return <ConditionBuilder {...args} ref={ref} {...requiredProps} />;
}`,...(wt=(Tt=ge.parameters)==null?void 0:Tt.docs)==null?void 0:wt.source}}};var jt,qt,St;be.parameters={...be.parameters,docs:{...(jt=be.parameters)==null?void 0:jt.docs,source:{originalSource:`args => {
  const ref = useRef();
  return <ConditionBuilder {...args} ref={ref} {...requiredProps} />;
}`,...(St=(qt=be.parameters)==null?void 0:qt.docs)==null?void 0:St.source}}};const Ro=["conditionBuilder","conditionBuilderDynamicOptions","conditionBuilderWithInitialState","conditionBuilderWithActions","conditionBuilderTree","conditionBuilderWithInitialStateTree","conditionBuilderWithActionsTree"];export{Ro as __namedExportsOrder,ee as conditionBuilder,ue as conditionBuilderDynamicOptions,he as conditionBuilderTree,fe as conditionBuilderWithActions,be as conditionBuilderWithActionsTree,me as conditionBuilderWithInitialState,ge as conditionBuilderWithInitialStateTree,Do as default};
