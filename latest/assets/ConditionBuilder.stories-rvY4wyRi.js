import{p as Ve,j as n,T as on,B as $t}from"./settings-DDDiKwEV.js";import{R as S,r as b}from"./index-BwDkhjyp.js";import{useMDXComponents as At}from"./index-DlpNa54Y.js";import"./chunk-HLWAVYOI-BawhmmPz.js";import{e as rn,i as an,C as sn}from"./index-Cfxh4ZWR.js";import{a as Se,_ as se,c as H,d as ln,C as Ot,M as kt}from"./floating-ui.react-BgNs4SA8.js";import{T as Pt}from"./TextInput-Hd7J5_5S.js";import{P as t}from"./index-Dk74W0Oi.js";import{aV as It}from"./bucket-5-BlAGcMmC.js";import{ap as Dt}from"./bucket-6-CS7rNrxx.js";import{W as cn,a as Rt,ai as X}from"./bucket-18-D_XNNF5i.js";import{W as Le}from"./bucket-7-BeNly0-7.js";import{v as Lt,aP as Bt,t as Ht}from"./bucket-4-C3qExA3L.js";import{T as Ft}from"./bucket-17-B2E3mTyd.js";import{B as dn,C as $e}from"./bucket-1-DMFHDXY9.js";import{u as $}from"./uuidv4-BQrI85uz.js";import{s as pn}from"./index-g07FazYc.js";import{g as un}from"./devtools-C7Iu0rt6.js";import{L as mn}from"./index-Bd0eoXr0.js";import{P as fn,a as hn}from"./index-BLdp044m.js";import{A as Gt,t as gn}from"./bucket-0-Cw-xsoio.js";import{S as Et}from"./Search-DEO4IeZ8.js";import{d as bn,C as Vt,aX as yn,aV as vn}from"./events-Dp3Lalez.js";import{N as xn}from"./NumberInput-NTFTuQL2.js";import{T as _n}from"./TextArea-86CqcBzM.js";import{D as tt,a as Ie}from"./DatePicker-Dr8agIg8.js";import{S as De}from"./SelectItem-CxQTInqA.js";import{a1 as Wt}from"./bucket-16-DFCeQRVG.js";import"./_commonjsHelpers-BosuxZz1.js";import"./index-CJvxHwuA.js";import"./iframe-D1NHqrr9.js";import"../sb-preview/runtime.js";import"./react-18-Dd3bHtks.js";import"./index-BONylQH5.js";import"./extends-CCbyfPlC.js";import"./index-C2eUe6cH.js";import"./index-C0xX6qoh.js";import"./index-DrFu-skq.js";import"./useNormalizedInputProps-DtF50Ia0.js";import"./Text-DpcC0Z3Y.js";import"./FormContext-C7kRVu4t.js";import"./useAnnouncer-Dwt0jqXi.js";import"./LayerContext-DbU-6VX4.js";import"./bucket-14-BmSAzvkd.js";import"./bucket-15-DqJqYgDY.js";const Mt=e=>{let{hideLabel:o,className:r,...s}=e;const l=Se();return S.createElement("div",se({className:H(`${l}--form-item`,r)},s),!o&&S.createElement("span",{className:`${l}--label ${l}--skeleton`}),S.createElement("div",{className:`${l}--select ${l}--skeleton`},S.createElement("div",{className:`${l}--select-input`})))};Mt.propTypes={className:t.string,hideLabel:t.bool};const Cn=Array.from({length:pn.length-1}).map((e,o)=>o+1),zt=S.forwardRef(function(o,r){const{as:s="div",children:l,className:a,gap:c,orientation:d="vertical",...u}=o,p=Se(),h=H(a,{[`${p}--stack-${d}`]:!0,[`${p}--stack-scale-${c}`]:typeof c=="number"}),g={};return typeof c=="string"&&(g[`--${p}-stack-gap`]=c),S.createElement(s,se({},u,{ref:r,className:h,style:g}),l)});zt.propTypes={as:t.elementType,children:t.node,className:t.string,gap:t.oneOfType([t.string,t.oneOf(Cn)]),orientation:t.oneOf(["horizontal","vertical"])};const Tn=S.forwardRef(function(o,r){return S.createElement(zt,se({},o,{ref:r,orientation:"vertical"}))}),Kt=S.forwardRef(function(o,r){let{children:s,className:l,disabled:a=!1,hideLabel:c,id:d,invalidText:u="Invalid time format.",invalid:p=!1,warningText:h="Warning message.",warning:g=!1,labelText:m,light:y=!1,maxLength:C=5,onChange:v=()=>{},onClick:k=()=>{},onBlur:j=()=>{},pattern:O="(1[012]|[1-9]):[0-5][0-9](\\s)?",placeholder:G="hh:mm",readOnly:T,size:A="md",type:I="text",value:q,...P}=o;const N=Se(),[K,F]=S.useState(q),[J,Q]=S.useState(q);q!==J&&(F(q),Q(q));function ee(M){a||(T||F(K),k(M))}function x(M){!a&&!T&&(F(K),v(M))}function f(M){a||(T||F(K),j(M))}const _=H(`${N}--time-picker__input-field`,`${N}--text-input`,[l],{[`${N}--text-input--light`]:y,[`${N}--time-picker__input-field-error`]:p||g}),w=H({[`${N}--time-picker`]:!0,[`${N}--time-picker--light`]:y,[`${N}--time-picker--invalid`]:p,[`${N}--time-picker--warning`]:g,[`${N}--time-picker--readonly`]:T,[`${N}--time-picker--${A}`]:A,...l&&{[l]:!0}}),D=H(`${N}--label`,{[`${N}--visually-hidden`]:c,[`${N}--label--disabled`]:a}),B=m?S.createElement("label",{htmlFor:d,className:D},m):null;function ie(){const M={onMouseDown:E=>{T&&(E.preventDefault(),E.target.focus())},onKeyDown:E=>{T&&["ArrowDown","ArrowUp"," "].includes(E.key)&&E.preventDefault()}};return S.Children.map(s,E=>{const U=E;if(U)return S.cloneElement(U,{...U.props,disabled:U.props.disabled??a,readOnly:T,...M})})}const ce={readOnly:T};return S.createElement("div",{className:H(`${N}--form-item`,l)},B,S.createElement("div",{className:w},S.createElement("div",{className:`${N}--time-picker__input`},S.createElement("input",se({className:_,"data-invalid":p||void 0,disabled:a,id:d,maxLength:C,onClick:ee,onChange:x,onBlur:f,placeholder:G,pattern:O,ref:r,type:I,value:q},P,ce)),(p||g)&&S.createElement("div",{className:`${N}--time-picker__error__icon`},p?S.createElement(cn,{className:`${N}--checkbox__invalid-icon`,size:16}):S.createElement(Rt,{className:`${N}--text-input__invalid-icon--warning`,size:16}))),ie()),(p||g)&&S.createElement("div",{className:`${N}--form-requirement`},p?u:h))});Kt.propTypes={children:t.node,className:t.string,disabled:t.bool,hideLabel:t.bool,id:t.string.isRequired,invalid:t.bool,invalidText:t.node,labelText:t.node,light:ln(t.bool),maxLength:t.number,onBlur:t.func,onChange:t.func,onClick:t.func,pattern:t.string,placeholder:t.string,readOnly:t.bool,size:t.oneOf(["sm","md","lg"]),type:t.string,value:t.string,warning:t.bool,warningText:t.node};const Be=S.forwardRef(function(o,r){let{["aria-label"]:s="open list of options",children:l,id:a,disabled:c=!1,className:d,...u}=o;const p=Se(),h=H({[`${p}--select`]:!0,[`${p}--time-picker__select`]:!0,...d&&{[d]:!0}});return S.createElement("div",{className:h},S.createElement("select",se({"aria-label":s,className:`${p}--select-input`,disabled:c,id:a,ref:r},u),l),S.createElement(bn,{className:`${p}--select__arrow`,"aria-hidden":"true"}))});Be.propTypes={children:t.node,className:t.string,defaultValue:t.any,disabled:t.bool,id:t.string.isRequired};const He=S.createContext(1),We=S.forwardRef(function(o,r){let{as:s="section",level:l,...a}=o;const c=S.useContext(He),d=l??c+1,u=s;return S.createElement(He.Provider,{value:Math.min(d,6)},S.createElement(u,se({ref:r},a)))});We.propTypes={as:t.elementType,children:t.node,className:t.string,level:t.number};const Me=S.forwardRef(function(o,r){const s=`h${S.useContext(He)}`;return S.createElement(s,se({ref:r},o))});Me.propTypes={children:t.node,className:t.string};const Fe=[{label:"if",id:"if",connector:"and"},{label:"excl.if",id:"excl_if",connector:"or"}],Ut=[{label:"and",id:"and"},{label:"or",id:"or"}],wn=[{label:"is",id:"is",type:"all"},{label:"is greater than",id:"greater",type:"number"},{label:"is greater than or equal to",id:"greaterEqual",type:"number"},{label:"is lower than",id:"lower",type:"number"},{label:"is lower than or equal to",id:"lowerEqual",type:"number"},{label:"starts with",id:"startsWith",type:"text,textarea"},{label:"ends with",id:"endsWith",type:"text,textarea"},{label:"contains",id:"contains",type:"text,textarea"},{label:"is one of",id:"oneOf",type:"option"},{label:"is before",id:"before",type:"date,time"},{label:"is after",id:"after",type:"date,time"},{label:"is between",id:"between",type:"date"}],i=`${Ve.prefix}--condition-builder`,Re=e=>{const o=String(e.getDate()).padStart(2,"0"),r=String(e.getMonth()+1).padStart(2,"0"),s=e.getFullYear();return`${o}/${r}/${s}`},jn={text:e=>e,textarea:e=>e,time:e=>e,number:e=>e,option:e=>e&&typeof e!="string"?(Array.isArray(e)?e:[e]).map(r=>r.label).join(", "):e,date:e=>{if(Array.isArray(e)&&e.length>1){const o=e!=null&&e[0]&&!isNaN(new Date(e[0]))?Re(new Date(e[0])):"",r=e!=null&&e[1]&&!isNaN(new Date(e[1]))?Re(new Date(e[1])):"";return`${o} To ${r}`}else return Array.isArray(e)&&!isNaN(new Date(e[0]))?Re(new Date(e[0])):e},custom:e=>e},Y=({className:e,label:o,hideLabel:r,tooltipAlign:s,renderIcon:l,onClick:a,showToolTip:c,wrapperProps:d,onBlur:u,onFocus:p,onMouseEnter:h,onMouseLeave:g,isInvalid:m,wrapperClassName:y,tabIndex:C,...v})=>{const k=Se(),j=()=>{const O=v["data-name"]??"";return n.jsxs("button",{tabIndex:C??-1,className:H([e,`${i}__button`,{[`${i}__text-ellipsis`]:c&&!r&&!m},{[`${i}__invalid-input`]:m}]),type:"button",onClick:a,onBlur:u,onFocus:p,onMouseEnter:h,onMouseLeave:g,"data-name":O,...v,children:[l&&n.jsx(l,{}),!r&&n.jsx("span",{children:o}),m&&n.jsx(Rt,{})]})};return r||c?n.jsx(on,{label:o,align:s,className:`${y} ${i}__tooltip ${k}--icon-tooltip`,...d,leaveDelayMs:0,children:j()}):n.jsx(n.Fragment,{children:j()})};Y.propTypes={className:t.string,hideLabel:t.bool,isInvalid:t.bool,label:t.string,onBlur:t.func,onClick:t.func,onFocus:t.func,onMouseEnter:t.func,onMouseLeave:t.func,renderIcon:t.oneOfType([t.func,t.object]),showToolTip:t.bool,tabIndex:t.number,tooltipAlign:t.string,wrapperClassName:t.string,wrapperProps:t.object};Y.__docgenInfo={description:"",methods:[],displayName:"ConditionBuilderButton",props:{className:{description:"Provide an optional class to be applied to the containing node.",type:{name:"string"},required:!1},hideLabel:{description:"decides if label and tooltip to be hidden",type:{name:"bool"},required:!1},isInvalid:{description:"boolean to know the updated value in not valid",type:{name:"bool"},required:!1},label:{description:"label of the button",type:{name:"string"},required:!1},onBlur:{description:"mouse events callbacks",type:{name:"func"},required:!1},onClick:{description:"callback triggered on click of add button",type:{name:"func"},required:!1},onFocus:{description:"",type:{name:"func"},required:!1},onMouseEnter:{description:"",type:{name:"func"},required:!1},onMouseLeave:{description:"",type:{name:"func"},required:!1},renderIcon:{description:"Optional prop to allow overriding the icon rendering.",type:{name:"union",value:[{name:"func"},{name:"object"}]},required:!1},showToolTip:{description:"decides if  tooltip to be shown",type:{name:"bool"},required:!1},tabIndex:{description:"Tab index",type:{name:"number"},required:!1},tooltipAlign:{description:"tooltip position",type:{name:"string"},required:!1},wrapperClassName:{description:"classname applies to the wrapper of popover",type:{name:"string"},required:!1},wrapperProps:{description:"optional props for tree grid to add role and aria-label to wrapper span",type:{name:"object"},required:!1}}};const qn={operator:"or",groups:[{groupOperator:"and",statement:"if",id:$(),conditions:[{property:void 0,operator:"",value:"",popoverToOpen:"propertyField",id:$()}]}]},z=b.createContext(),ze=e=>{const[o,r]=b.useState({groups:[]}),[s,l]=b.useState([]);return n.jsx(z.Provider,{value:{rootState:o,setRootState:r,actionState:s,setActionState:l,inputConfig:e.inputConfig,popOverSearchThreshold:e.popOverSearchThreshold,getOptions:e.getOptions,variant:e.variant,translateWithId:e.translateWithId,conditionBuilderRef:e.conditionBuilderRef},children:e.children})};ze.propTypes={children:t.node.isRequired,conditionBuilderRef:t.object,getOptions:t.func,inputConfig:t.shape({properties:t.arrayOf(t.shape({id:t.string.isRequired,label:t.string.isRequired,icon:t.oneOfType([t.func,t.object]),type:t.oneOf(["text","textarea","number","date","option","time","custom"]).isRequired,config:t.shape({options:t.arrayOf(t.shape({id:t.string.isRequired,label:t.string.isRequired,icon:t.oneOfType([t.func,t.object])})),component:t.func,operators:t.arrayOf(t.shape({id:t.string.isRequired,label:t.string.isRequired})),long:t.bool})}))}).isRequired,popOverSearchThreshold:t.number.isRequired,translateWithId:t.func,variant:t.string.isRequired};ze.__docgenInfo={description:"",methods:[],displayName:"ConditionBuilderProvider",props:{children:{description:"Provide the contents of the ConditionBuilder.",type:{name:"node"},required:!0},conditionBuilderRef:{description:"ref of condition builder",type:{name:"object"},required:!1},getOptions:{description:`This is an optional callback function that will be triggered when options array is not passed in the inputConfig against a property. 
This can be a asynchronous function that need  to  return a promise, so it will allow to fetch options from API call.
options has to be in valid format
[{
          label: 'label',
          id: 'id',
        },...]`,type:{name:"func"},required:!1},inputConfig:{description:"This is a mandatory prop that defines the input to the condition builder.",type:{name:"shape",value:{properties:{name:"arrayOf",value:{name:"shape",value:{id:{name:"string",required:!0},label:{name:"string",required:!0},icon:{name:"union",value:[{name:"func"},{name:"object"}],required:!1},type:{name:"enum",value:[{value:"'text'",computed:!1},{value:"'textarea'",computed:!1},{value:"'number'",computed:!1},{value:"'date'",computed:!1},{value:"'option'",computed:!1},{value:"'time'",computed:!1},{value:"'custom'",computed:!1}],required:!0},config:{name:"shape",value:{options:{name:"arrayOf",value:{name:"shape",value:{id:{name:"string",required:!0},label:{name:"string",required:!0},icon:{name:"union",value:[{name:"func"},{name:"object"}],required:!1}}},required:!1},component:{name:"func",required:!1},operators:{name:"arrayOf",value:{name:"shape",value:{id:{name:"string",required:!0},label:{name:"string",required:!0}}},required:!1},long:{name:"bool",required:!1}},required:!1}}},required:!1}}},required:!0},popOverSearchThreshold:{description:"Provide an mandatory numeric value that will be used to enable search option in the popovers with list.",type:{name:"number"},required:!0},translateWithId:{description:`Optional prop if you want to pass translation to the texts used . Otherwise this will the defined defaults.
This callback function will receive the message id and you need to return the corresponding text for that id.
The message key will be one of [   "ifText",   "addConditionText",   "addConditionGroupText",   "addSubgroupText",   "conditionText",   "propertyText",   "operatorText",   "valueText",   "connectorText",   "conditionRowText",   "removeConditionText",   "addConditionRowText",   "startText",   "endText",   "clearSearchText",   "actionsText",   "then",   "removeActionText",   "addActionText",   "invalidText",   "invalidNumberWarnText"
]`,type:{name:"func"},required:!1},variant:{description:"Provide the condition builder variant: sentence/ tree",type:{name:"string"},required:!0}}};const nt={ifText:"if",excl_if:"excl.if",and:"and",or:"or",is:"is",greater:"is greater than",greaterEqual:"is greater than or equal to",lower:"is lower than",lowerEqual:"is lower than or equal to",startsWith:"starts with",endsWith:"ends with",contains:"contains",oneOf:"is one of",before:"is before",after:"is after",between:"is between",addConditionText:"Add condition",addConditionGroupText:"Add condition group",addSubgroupText:"Add subgroup",conditionText:"Condition",propertyText:"Property",operatorText:"Operator",valueText:"Value",connectorText:"Connector",conditionRowText:"Condition row",conditionRowGroupText:"Condition row group",removeConditionText:"Delete condition",addConditionRowText:"Add condition row",startText:"Start",endText:"End",clearSearchText:"Clear search input",actionsText:"Actions",then:"then",removeActionText:"Remove Action",addActionText:"Add action",invalidText:"Incomplete",invalidNumberWarnText:"Invalid number, must be 0 or greater",conditionBuilderText:"Condition Builder",actionSectionText:"Action Section",conditionHeadingText:"Condition",addPropertyText:"Add property",addOperatorText:"Add operator",addValueText:"Add value"},W=e=>{const{translateWithId:o}=b.useContext(z);return e.map(r=>o!=null&&o(r)?o(r):nt[r]?nt[r]:r)},we=(e,o)=>{e&&setTimeout(()=>{var r,s,l,a,c;V((r=e.target.closest('[role="gridcell"]'))==null?void 0:r.querySelector("button"),o),(l=(s=e.target.closest('[role="gridcell"]'))==null?void 0:s.querySelector("button"))==null||l.click(),(c=(a=e.target.closest('[role="gridcell"]'))==null?void 0:a.querySelector("button"))==null||c.focus()},0)},oe=(e,o)=>{setTimeout(()=>{V(e,o)},0)},Ge=(e,o,r,s,l,a)=>{e==document.activeElement?o!==r.length-1?oe(r[o+1],a):oe(r[s?0:r.length-1],a):Array.from(r).indexOf(document.activeElement)==-1&&l&&oe(r[0],a)},Ee=(e,o,r,s,l,a)=>{e==document.activeElement?oe(o!==0?r[o-1]:r[s?r.length-1:0],a):Array.from(r).indexOf(document.activeElement)==-1&&l&&oe(r[r.length-1],a)},Sn=(e,o)=>e[o],pe=e=>e&&e!=="INVALID",V=(e,o)=>{var s,l;const r=(e==null?void 0:e.closest(`.${i}__content-container`))??(e==null?void 0:e.closest(`.${i}__actions-container`));r&&Array.from(r.querySelectorAll('[tabindex="0"]')).map(a=>a==null?void 0:a.setAttribute("tabindex","-1")),e==null||e.setAttribute("tabindex","0"),(l=(s=o.current)==null?void 0:s.querySelector(`.${i}__statement-button`))==null||l.setAttribute("tabindex","1"),e==null||e.focus()},Nn=(e,o,r)=>{var l;(l=document.activeElement.closest(`.${i}__popover`))!=null&&l.querySelector('[role="dialog"]')||kn(e,o,r)},$n=(e,o,r)=>{An(e)||On(e,r==null?void 0:r.current,o)},An=e=>!["Escape"].includes(e.key)&&(e.target.closest(`.${i}__item-date`)||e.target.closest(`.${i}__item-time`)),On=(e,o,r)=>{var d,u,p,h;const s=e.key,l=Sn(e,"shiftKey"),a=(d=o.querySelector("ul"))==null?void 0:d.dataset.multiSelect;let c=[];switch(s){case"ArrowUp":e.preventDefault(),o.querySelectorAll('[role="option"]').forEach((g,m,y)=>{Ee(g,m,y,null,null,r)}),Array.from(e.target.closest("ul").querySelectorAll("li")).indexOf(e.target)===1&&(o.querySelector(`.${i}__popover-content-wrapper`).scrollTop=0);break;case"ArrowDown":e.preventDefault(),o.querySelectorAll('[role="option"]').forEach((g,m,y)=>{Ge(g,m,y,null,null,r)});break;case"Tab":c=[...Array.from(o.querySelectorAll(`.${i}__selectAll-button,[role="searchbox"]`)),o.querySelector('[role="option"]')],c.forEach((g,m,y)=>{l?Ee(g,m,y,!0,!0,r):Ge(g,m,y,!0,!0,r)}),e.preventDefault();break;case" ":a==="true"&&(document.activeElement.type!=="button"&&((u=document.activeElement)==null||u.click()),e.preventDefault());break;case"Enter":a==="true"?(document.activeElement.type!=="button"&&((p=document.activeElement)==null||p.click()),e.preventDefault()):document.activeElement.type!=="button"&&(we(e,r),(h=document.activeElement)==null||h.click());break;case"Escape":we(e,r);break}},kn=(e,o,r)=>{var s,l,a,c,d,u;switch(e.key){case"ArrowRight":if(e.preventDefault(),r=="tree"){let p=Array.from((s=e.target.closest('[role="row"]'))==null?void 0:s.querySelectorAll('[role="gridcell"] button'));if(p.length===1)e.target=e.target.closest('[role="row"]'),ot(e,o,r);else if(e.target.getAttribute("role")=="row")V(p[0],o);else{let h=p.indexOf(e.target);h<p.length-1&&oe(p[h+1],o)}}else rt(e,o);break;case"ArrowLeft":if(e.preventDefault(),r=="tree"){if(e.target.getAttribute("role")!=="row"){let p=Array.from((l=e.target.closest('[role="row"]'))==null?void 0:l.querySelectorAll('[role="gridcell"] button')),h=p.indexOf(e.target);if(h>0)oe(p[h-1],o);else{let g=e.target.closest('[role="row"]');V(g,o)}}}else rt(e,o);break;case"ArrowUp":case"ArrowDown":e.preventDefault(),r=="tree"?ot(e,o,r):Pn(e,o,r);break;case"Enter":((c=(a=document.activeElement)==null?void 0:a.querySelectorAll("button"))==null?void 0:c.length)===1&&((u=(d=document.activeElement)==null?void 0:d.querySelectorAll("button")[0])==null||u.click());break}},Ke=e=>{var o;return Array.from((o=e.current)==null?void 0:o.querySelectorAll('[role="row"]'))},Zt=(e,o)=>Ke(o).findIndex(s=>s.contains(e)),Pn=(e,o,r)=>{const s=Ke(o),l=Zt(e.target,o);Xt(e,l,s,r,o)},ot=(e,o,r)=>{const s=Ke(o),l=Zt(e.target,o);let a=l;e.target.getAttribute("role")=="row"?(["ArrowDown","ArrowRight"].includes(e.key)?a+=1:e.key==="ArrowUp"&&(a-=1),a<0?a=0:a>=s.length&&(a=s.length-1),a!==l&&V(s[a],o)):Xt(e,l,s,r,o)},Xt=(e,o,r,s,l)=>{let a=o;e.key==="ArrowUp"&&(a=o==0?o:o-1),e.key==="ArrowDown"&&(a=o===r.length-1?r.length-1:o+1);const c=r[a],d=e.target.dataset.name;c!=null&&c.querySelector(`[data-name="${d}"]`)?V(c==null?void 0:c.querySelector(`[data-name="${d}"]`),l):s==="tree"&&V(c,l)},rt=(e,o)=>{o.current.querySelectorAll('[role="gridcell"] button').forEach((r,s,l)=>{e.key==="ArrowRight"?Ge(r,s,l,null,null,o):Ee(r,s,l,null,null,o)})},L=({children:e,className:o,label:r,renderIcon:s,title:l,type:a,showToolTip:c,condition:d,popOverClassName:u,config:p,renderChildren:h,onChange:g,...m})=>{const y=b.useRef(null),[C,v]=b.useState(!1),[k,j,O,G,T,A]=W(["invalidText","addConditionText","addPropertyText","addOperatorText","addValueText",r]),{conditionBuilderRef:I}=b.useContext(z),q=()=>{const{property:f,operator:_}=d||{};return r==="INVALID"||m["data-name"]==="propertyField"&&f==="INVALID"||m["data-name"]==="operatorField"&&_==="INVALID"?{propertyLabel:k,isInvalid:!0}:{isInvalid:!1,propertyLabel:m["data-name"]=="valueField"&&a?jn[a](r,p):A}},{propertyLabel:P,isInvalid:N}=q();b.useEffect(()=>{if(d){const f=m["data-name"];(d.popoverToOpen&&f!==d.popoverToOpen||f=="valueField"&&a=="option"&&d.operator!=="oneOf")&&F(),d.popoverToOpen==f&&J()}else F()},[d,r]),b.useEffect(()=>{if(C&&y.current){const f=y.current.querySelector("input,textarea");f&&setTimeout(()=>f.focus(),0)}},[y,C]);const K=()=>{(m["data-name"]==="propertyField"&&!(d!=null&&d.property)||m["data-name"]==="operatorField"&&!(d!=null&&d.operator)||m["data-name"]==="valueField"&&!(d!=null&&d.value))&&(g==null||g("INVALID"))},F=()=>{C&&K(),v(!1)},J=()=>v(!0),Q=()=>{(e||h)&&v(!C)},ee=f=>{$n(f,I,y),f.key==="Escape"&&K()},x=()=>P||(m["data-name"]==="propertyField"?O:m["data-name"]==="operatorField"?G:m["data-name"]==="valueField"?T:j);return n.jsxs(fn,{open:C,isTabTip:!0,role:"gridcell",className:`${u} ${i}__popover`,ref:y,onRequestClose:F,children:[n.jsx(Y,{label:x(),hideLabel:!r,onClick:Q,className:o,"aria-haspopup":!0,"aria-expanded":C,renderIcon:s||(r==null?Gt:null),showToolTip:c,isInvalid:N,condition:d,...m}),C&&n.jsx(hn,{className:`${i}__popover-content-wrapper`,role:"dialog","aria-label":l,onKeyDown:ee,children:n.jsxs(mn,{children:[n.jsx("h1",{className:`${i}__item__title`,children:l}),n.jsx("div",{className:`${i}__popover-content`,children:h?h(y):e})]})})]})};L.propTypes={children:t.node,className:t.string,condition:t.object,config:t.object,label:t.oneOfType([t.string,t.array,t.object]),onChange:t.func,popOverClassName:t.string,renderChildren:t.func,renderIcon:t.oneOfType([t.func,t.object]),showToolTip:t.bool,title:t.string,type:t.string};L.__docgenInfo={description:"",methods:[],displayName:"ConditionBuilderItem",props:{children:{description:"provide the contents of the popover",type:{name:"node"},required:!1},className:{description:"Provide an optional class to be applied to the containing node.",type:{name:"string"},required:!1},condition:{description:"current condition state object",type:{name:"object"},required:!1},config:{description:"this is the config object again the current property from inputConfig",type:{name:"object"},required:!1},label:{description:"text to be displayed in the field",type:{name:"union",value:[{name:"string"},{name:"array"},{name:"object"}]},required:!1},onChange:{description:"callback to update the current condition of the state tree",type:{name:"func"},required:!1},popOverClassName:{description:"class name for popover",type:{name:"string"},required:!1},renderChildren:{description:"callback prop that returns the jsx for children",type:{name:"func"},required:!1},renderIcon:{description:"Optional prop to allow overriding the icon rendering.",type:{name:"union",value:[{name:"func"},{name:"object"}]},required:!1},showToolTip:{description:"show tool tip",type:{name:"bool"},required:!1},title:{description:"title of the popover",type:{name:"string"},required:!1},type:{description:"input type",type:{name:"string"},required:!1}}};const re=({conditionState:e={},config:o={},onChange:r})=>{const{popOverSearchThreshold:s}=b.useContext(z),l=b.useRef(),[a,c]=W(["propertyText","clearSearchText"]),d=o.options,[u,p]=b.useState(""),h=e.value,g=d==null?void 0:d.filter(v=>v.label.toLowerCase().includes(u.toLowerCase()));b.useEffect(()=>{if(l.current){const v=l.current.querySelector("input, button,li");v&&v.focus()}},[d]);const m=(v,k)=>{r(k.id,v)},y=v=>{const{value:k}=v.target;p(k)},C=()=>e.label?e.label:e.property?e.property:a;if(d)return n.jsxs("div",{className:`${i}__item-option`,ref:l,children:[d.length>s&&n.jsx("div",{className:`${i}__item-option__search`,children:n.jsx(Et,{size:"sm",labelText:c,closeButtonLabelText:c,onChange:y})}),n.jsx("ul",{"aria-label":C(),role:"listbox",children:g==null?void 0:g.map(v=>{const k=h===v.id,j=v.icon;return n.jsx("li",{tabIndex:0,role:"option","aria-selected":k,className:`${i}__item-option__option`,onKeyUp:()=>!1,onClick:O=>m(O,v),children:n.jsxs("div",{className:`${i}__item-option__option-content`,children:[n.jsxs("span",{className:`${i}__item-option__option-label`,children:[j&&n.jsx(j,{}),v.label]}),k&&n.jsx(Vt,{className:`${i}__checkmark`})]})},v.id)})})]})};re.propTypes={conditionState:t.object,config:t.object,onChange:t.func};re.__docgenInfo={description:"",methods:[],displayName:"ItemOption",props:{conditionState:{defaultValue:{value:"{}",computed:!1},description:"current condition object",type:{name:"object"},required:!1},config:{defaultValue:{value:"{}",computed:!1},description:"current config object that this property is part of",type:{name:"object"},required:!1},onChange:{description:"callback to update state oin date change",type:{name:"func"},required:!1}}};const Ne=({operator:e,className:o,onChange:r,...s})=>{const{variant:l,conditionBuilderRef:a}=b.useContext(z),[c]=W(["connectorText"]),d=b.useCallback((g,m)=>{m?g.classList.add("hoveredConnector"):g.classList.remove("hoveredConnector")},[]),u=g=>{let m=g.currentTarget.closest(".eachGroup");d(m,!0)},p=g=>{let m=g.currentTarget.closest(".eachGroup");d(m,!1)},h=(g,m)=>{r(g),we(m,a)};return l=="tree"?n.jsx("span",{className:`${o} ${i}__connector--disabled`,children:n.jsx(Y,{label:e})}):n.jsx(L,{label:e,title:c,"data-name":"connectorField",onMouseEnter:u,onMouseLeave:p,onFocus:u,onBlur:p,...s,popOverClassName:o,className:`${i}__connector-button `,children:n.jsx(re,{config:{options:Ut},conditionState:{value:e,label:c},onChange:h})})};Ne.propTypes={className:t.string,onChange:t.func,operator:t.string};Ne.__docgenInfo={description:"",methods:[],displayName:"ConditionConnector",props:{className:{description:"Provide an optional class to be applied to the containing node.",type:{name:"string"},required:!1},onChange:{description:"callback to update the current condition of the state tree",type:{name:"func"},required:!1},operator:{description:"string that defines the connector operator (and/or)",type:{name:"string"},required:!1}}};const Ue=({conditionState:e,config:o,onChange:r})=>{var d;const[s]=W(["invalidNumberWarnText"]),l=(u,{value:p})=>{p!==""&&!isNaN(p)&&a(p)?r(`${p} ${o.unit??""}`):r("INVALID")},a=u=>!(u>o.max||u<o.min),c=()=>{var u,p;return((p=(u=e.value)==null?void 0:u.split(" "))==null?void 0:p[0])??""};return n.jsx("div",{className:`${i}__item-number`,children:n.jsx(xn,{label:e.property,hideLabel:!0,id:(d=e.property)==null?void 0:d.replace(/\s/g,""),invalidText:s,allowEmpty:!0,onChange:l,...o,defaultValue:c()})})};Ue.propTypes={conditionState:t.object,config:t.object,onChange:t.func};Ue.__docgenInfo={description:"",methods:[],displayName:"ConditionBuilderItemNumber",props:{conditionState:{description:"current condition object",type:{name:"object"},required:!1},config:{description:"current config object that this property is part of",type:{name:"object"},required:!1},onChange:{description:"callback to update state oin date change",type:{name:"func"},required:!1}}};const Ae=({conditionState:e,onChange:o,config:r,type:s})=>{var a;const l={labelText:e.property,hideLabel:!0,value:pe(e.value)?e.value:"",id:(a=e.property)==null?void 0:a.replace(/\s/g,""),onChange:c=>{o(c.target.value)},...r};return n.jsx("div",{className:`${i}__item-text`,children:s=="textarea"?n.jsx(_n,{...l}):n.jsx(Pt,{...l})})};Ae.propTypes={conditionState:t.object,config:t.object,onChange:t.func,type:t.string};Ae.__docgenInfo={description:"",methods:[],displayName:"ConditionBuilderItemText",props:{conditionState:{description:"current condition object",type:{name:"object"},required:!1},config:{description:"config of the current property",type:{name:"object"},required:!1},onChange:{description:"callback to update state oin date change",type:{name:"func"},required:!1},type:{description:"current input type",type:{name:"string"},required:!1}}};const In=`${Ve.prefix}--condition-builder`,Ze=({conditionState:e,onChange:o,parentRef:r})=>{const s=b.useRef(),[l,a]=W(["startText","endText"]),c=e.operator=="between"?"range":"single",d=u=>{o(u&&u.length>0?u:"INVALID")};return n.jsxs("div",{className:`${In}__item-date `,children:[c=="single"&&n.jsx(tt,{ref:s,dateFormat:"d/m/Y",datePickerType:"single",value:e.value,onClose:d,appendTo:r==null?void 0:r.current,children:n.jsx(Ie,{id:"datePicker",placeholder:"dd/mm/yyyy",labelText:e.property})}),c=="range"&&n.jsxs(tt,{ref:s,dateFormat:"d/m/Y",datePickerType:c,onClose:d,value:e.value,appendTo:r==null?void 0:r.current,children:[n.jsx(Ie,{id:"datePickerStart",placeholder:"dd/mm/yyyy",labelText:l}),n.jsx(Ie,{id:"datePickerEnd",placeholder:"dd/mm/yyyy",labelText:a})]})]})};Ze.propTypes={conditionState:t.object,onChange:t.func,parentRef:t.object};Ze.__docgenInfo={description:"",methods:[],displayName:"ConditionBuilderItemDate",props:{conditionState:{description:"current condition object",type:{name:"object"},required:!1},onChange:{description:"callback to update state oin date change",type:{name:"func"},required:!1},parentRef:{description:"reference to the popover node",type:{name:"object"},required:!1}}};const Xe=({onChange:e,config:o})=>{var g,m;const[r,s]=b.useState(""),[l,a]=b.useState("AM"),[c,d]=b.useState((g=o==null?void 0:o.timeZones)==null?void 0:g[0]);b.useEffect(()=>{let y=`${r??""} ${l??""} ${c??""}`;e(r?y:void 0)},[r,l,c]);const u=y=>{d(y.target.value)},p=y=>{a(y.target.value)},h=y=>{s(y.target.value)};return n.jsx("div",{className:`${i}__item-time`,children:n.jsxs(Kt,{id:"time-picker",labelText:"Select a time",onChange:h,children:[n.jsxs(Be,{id:"time-picker-day-zone",onChange:p,children:[n.jsx(De,{value:"AM",text:"AM"}),n.jsx(De,{value:"PM",text:"PM"})]}),n.jsx(Be,{id:"time-picker-time-zone",onChange:u,children:(m=o==null?void 0:o.timeZones)==null?void 0:m.map((y,C)=>n.jsx(De,{value:y,text:y},C))})]})})};Xe.propTypes={config:t.object,onChange:t.func};Xe.__docgenInfo={description:"",methods:[],displayName:"ConditionBuilderItemTime",props:{config:{description:"current config object that this property is part of",type:{name:"object"},required:!1},onChange:{description:"callback to update state oin date change",type:{name:"func"},required:!1}}};const je=({className:e,onClick:o,addConditionSubGroupHandler:r,showConditionSubGroupPreviewHandler:s,hideConditionSubGroupPreviewHandler:l,showConditionPreviewHandler:a,hideConditionPreviewHandler:c,enableSubGroup:d,buttonLabel:u,tabIndex:p})=>{const[h,g,m]=W(["addConditionText","addConditionRowText","addSubgroupText"]),y=()=>{c==null||c(),o()},C=()=>d?{onMouseEnter:a,onMouseLeave:c,onFocus:a,onBlur:c}:{},v=()=>({onMouseEnter:s,onMouseLeave:l,onFocus:s,onBlur:l}),k=()=>u||(d?void 0:g),j=d?{role:"gridcell"}:{};return n.jsxs("div",{className:`${e} ${i}__add-button-wrapper`,role:d?"none":"gridcell","aria-label":k(),children:[n.jsx(Y,{renderIcon:gn,onClick:y,...C(),wrapperProps:j,className:`${i}__add-button`,hideLabel:!0,"data-name":"addButton",label:u??h,tabIndex:p,wrapperClassName:`${i}__add-condition-wrapper`}),d&&n.jsx(Y,{renderIcon:Wt,onClick:r,className:H(`${i}__add-condition-sub-group`),hideLabel:!0,label:m,wrapperProps:j,wrapperClassName:`${i}__add-condition-sub-group-wrapper ${i}__gap-left`,...v()})]})};je.propTypes={addConditionSubGroupHandler:t.func,buttonLabel:t.string,className:t.string,enableSubGroup:t.bool,hideConditionPreviewHandler:t.func,hideConditionSubGroupPreviewHandler:t.func,onClick:t.func,showConditionPreviewHandler:t.func,showConditionSubGroupPreviewHandler:t.func,tabIndex:t.number};je.__docgenInfo={description:"",methods:[],displayName:"ConditionBuilderAdd",props:{addConditionSubGroupHandler:{description:"handler for hiding sub group preview",type:{name:"func"},required:!1},buttonLabel:{description:"tooltip label for plus button",type:{name:"string"},required:!1},className:{description:"Provide an optional class to be applied to the containing node.",type:{name:"string"},required:!1},enableSubGroup:{description:"boolean to enable sub groups for the tree variant",type:{name:"bool"},required:!1},hideConditionPreviewHandler:{description:"handler for hiding sub group preview",type:{name:"func"},required:!1},hideConditionSubGroupPreviewHandler:{description:"",type:{name:"func"},required:!1},onClick:{description:"callback triggered on click of add button",type:{name:"func"},required:!1},showConditionPreviewHandler:{description:"",type:{name:"func"},required:!1},showConditionSubGroupPreviewHandler:{description:"",type:{name:"func"},required:!1},tabIndex:{description:"Tab index",type:{name:"number"},required:!1}}};const ke=({conditionState:e={},config:o={},onChange:r})=>{const s=e.operator==="oneOf",{popOverSearchThreshold:l,getOptions:a,rootState:c}=b.useContext(z),[d,u]=W(["propertyText","clearSearchText"]),p=b.useRef(),[h,g]=b.useState(o.options),[m,y]=b.useState(""),C=h==null?void 0:h.filter(T=>T.label.toLowerCase().includes(m.toLowerCase())),v=Array.isArray(e.value)?e.value:e.value!==void 0?[e.value]:[];b.useEffect(()=>{!h&&a&&(async()=>{const A=await a(c,e);(A==null?void 0:A.length)>0&&Object.keys(A[0]).includes("label")&&Object.keys(A[0]).includes("id")&&g(A)})()},[]),b.useEffect(()=>{if(p.current){const T=p.current.querySelector("input, button,li");T&&T.focus()}},[h]);const k=T=>{T.currentTarget.dataset.selectedAll=="false"?r(void 0):r(h)},j=T=>{const{value:A}=T.target;y(A)},O=(T,A,I)=>{const q=v.filter(P=>P!=="INVALID");if(s)if(I){let P=q.filter(N=>N.id!==A.id);r(P.length>0?P:void 0)}else r([...q,A]);else r(A,T)},G=()=>e.label?e.label:e.property?e.property:d;return h?n.jsxs("div",{className:`${i}__item-option`,ref:p,children:[h.length>l&&n.jsx("div",{className:`${i}__item-option__search`,children:n.jsx(Et,{size:"sm",labelText:u,closeButtonLabelText:u,onChange:j})}),s&&n.jsxs("div",{className:`${i}__multiselectSelectionStatusContainer`,children:[n.jsx("h4",{children:n.jsxs("label",{children:[v.length,"/",h.length," Selected"]})}),n.jsx($t,{kind:"ghost",size:"sm","data-selected-all":`${v.length==0}`,onClick:k,className:`${i}__selectAll-button`,children:v.length==0?"Select all":"Deselect all"})]}),n.jsx("ul",{"aria-label":G(),role:"listbox","data-multi-select":s,children:C==null?void 0:C.map(T=>{const A=v.map(q=>q.id).includes(T.id),I=T.icon;return n.jsx("li",{tabIndex:0,role:"option","aria-selected":A,className:`${i}__item-option__option`,onKeyUp:()=>!1,onClick:q=>O(q,T,A),children:n.jsx("div",{className:`${i}__item-option__option-content`,children:s?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:`${i}__option-check-box`,children:A?n.jsx(yn,{}):n.jsx(vn,{})}),n.jsx("span",{className:`${i}__item-option__option-label`,children:T.label}),I&&n.jsx("span",{className:`${i}__option-icon`,children:n.jsx(I,{})})]}):n.jsxs(n.Fragment,{children:[n.jsxs("span",{className:`${i}__item-option__option-label`,children:[I&&n.jsx(I,{}),T.label]}),A&&n.jsx(Vt,{className:`${i}__checkmark`})]})})},T.id)})})]}):n.jsx(Mt,{})};ke.propTypes={conditionState:t.object,config:t.object,onChange:t.func};ke.__docgenInfo={description:"",methods:[],displayName:"ItemOptionForValueField",props:{conditionState:{defaultValue:{value:"{}",computed:!1},description:"current condition object",type:{name:"object"},required:!1},config:{defaultValue:{value:"{}",computed:!1},description:"current config object that this property is part of",type:{name:"object"},required:!1},onChange:{description:"callback to update state oin date change",type:{name:"func"},required:!1}}};const Oe=e=>{const{property:o,value:r,operator:s}=e.condition,{onRemove:l,onChange:a,condition:c,conjunction:d,onConnectorOperatorChange:u,isStatement:p,group:h,onStatementChange:g,conditionIndex:m,addConditionHandler:y,addConditionSubGroupHandler:C,aria:v,hideConditionSubGroupPreviewHandler:k,showConditionSubGroupPreviewHandler:j,hideConditionPreviewHandler:O,showConditionPreviewHandler:G,isLastCondition:T}=e,{inputConfig:A,variant:I,conditionBuilderRef:q}=b.useContext(z),[P,N]=b.useState(!1),[K,F]=b.useState(!1),[J,Q,ee,x,f]=W(["conditionRowText","conditionText","propertyText","operatorText","removeConditionText"]),_=R=>{var Z;return((Z=A.properties)==null?void 0:Z.find(nn=>nn.id==R))??{}},{icon:w,type:D,config:B,label:ie}=_(o),ce={text:Ae,number:Ue,date:Ze,time:Xe,option:ke,custom:B==null?void 0:B.component,textarea:Ae},M=o?ce[D]:null,ve=()=>{F(!0)},E=()=>{F(!1)},U=(R,Z)=>{we(Z,q),g(R)},xe=R=>{a({...c,property:R,operator:void 0,value:"",popoverToOpen:pe(R)?"operatorField":""})},_e=R=>{a({...c,operator:R,value:void 0,popoverToOpen:pe(R)?"valueField":""})},te=R=>{const Z={...c};delete Z.popoverToOpen,a({...Z,value:R})},de=()=>{N(!0)},Ce=()=>{N(!1)},Te=(R,Z)=>I==="tree"?!0:T(R,Z),Qt=()=>B!=null&&B.operators?B.operators:wn.filter(R=>R.type.indexOf(D)!=-1||R.type=="all"),en=()=>I=="tree"?{"aria-level":v.level,"aria-posinset":v.posinset,"aria-setsize":v.setsize}:{},tn=R=>n.jsx(M,{conditionState:{property:o,operator:s,value:r},onChange:te,config:B,"data-name":"valueField",parentRef:R,type:D});return n.jsxs("div",{className:H(`${i}__condition-block`,{[`${i}__condition__deletion-preview`]:P},{[`${i}__gap-bottom`]:I=="tree"},{[`${i}__gap ${i}__gap-bottom`]:I=="sentence"},{[`${i}__condition--interacting`]:K}),role:"row","aria-label":J,...en(),tabIndex:-1,onMouseEnter:ve,onMouseLeave:E,onBlur:E,children:[d?n.jsx(Ne,{className:`${i}__gap`,operator:d,onChange:R=>u(R)}):n.jsx("div",{role:"gridcell"}),p&&n.jsx(L,{label:h.statement,title:Q,"data-name":"connectorField",popOverClassName:`${i}__gap`,className:`${i}__statement-button`,tabIndex:0,children:n.jsx(re,{conditionState:{value:h.statement,label:Q},onChange:U,config:{options:Fe}})}),n.jsx(L,{label:ie??(c==null?void 0:c.property),title:ee,renderIcon:w??null,className:`${i}__property-field`,"data-name":"propertyField",condition:c,type:D,onChange:xe,children:n.jsx(re,{conditionState:{value:o,label:ee},onChange:xe,config:{options:A.properties}})}),pe(o)&&n.jsx(L,{label:s,title:x,"data-name":"operatorField",condition:c,type:D,onChange:_e,children:n.jsx(re,{config:{options:Qt()},conditionState:{value:s,label:x},onChange:_e})}),pe(o)&&pe(s)&&n.jsx(L,{label:r,type:D,title:ie,showToolTip:!0,"data-name":"valueField",condition:c,config:B,onChange:te,renderChildren:tn}),n.jsx("span",{role:"gridcell","aria-label":f,children:n.jsx(Y,{hideLabel:!0,label:f,onClick:l,onMouseEnter:de,onMouseLeave:Ce,onFocus:de,onBlur:Ce,renderIcon:Ot,className:`${i}__close-condition`,"data-name":"closeCondition"})}),Te(m,h.conditions)&&n.jsx(je,{onClick:()=>{y(m)},addConditionSubGroupHandler:()=>{C(m)},showConditionSubGroupPreviewHandler:j,hideConditionSubGroupPreviewHandler:k,enableSubGroup:I=="tree",showConditionPreviewHandler:G,hideConditionPreviewHandler:O,className:`${i}__gap ${i}__gap-left`})]})};Oe.propTypes={addConditionHandler:t.func,addConditionSubGroupHandler:t.func,aria:t.object,condition:t.object,conditionIndex:t.number,conjunction:t.string,group:t.object,hideConditionPreviewHandler:t.func,hideConditionSubGroupPreviewHandler:t.func,isLastCondition:t.func,isStatement:t.bool,onChange:t.func,onConnectorOperatorChange:t.func,onRemove:t.func,onStatementChange:t.func,showConditionPreviewHandler:t.func,showConditionSubGroupPreviewHandler:t.func,state:t.object};Oe.__docgenInfo={description:"This component build each block of condition consisting of property, operator value and close button.",methods:[],displayName:"ConditionBlock",props:{addConditionHandler:{description:"callback to add a new condition",type:{name:"func"},required:!1},addConditionSubGroupHandler:{description:"callback to add a new condition subgroup",type:{name:"func"},required:!1},aria:{description:"object hold aria attributes",type:{name:"object"},required:!1},condition:{description:"",type:{name:"object"},required:!1},conditionIndex:{description:"",type:{name:"number"},required:!1},conjunction:{description:"string that decides to show the condition connector",type:{name:"string"},required:!1},group:{description:"object that hold the current group object where is condition is part of",type:{name:"object"},required:!1},hideConditionPreviewHandler:{description:"handler for hiding sub group preview",type:{name:"func"},required:!1},hideConditionSubGroupPreviewHandler:{description:"handler for hiding sub group preview",type:{name:"func"},required:!1},isLastCondition:{description:"",type:{name:"func"},required:!1},isStatement:{description:"boolean that decides to show the statement(if/ excl.if)",type:{name:"bool"},required:!1},onChange:{description:"callback to update the current condition of the state tree",type:{name:"func"},required:!1},onConnectorOperatorChange:{description:"callback to handle the connector(and/or) change",type:{name:"func"},required:!1},onRemove:{description:"callback for Remove a condition",type:{name:"func"},required:!1},onStatementChange:{description:"callback to handle the statement(if/ excl.if) change",type:{name:"func"},required:!1},showConditionPreviewHandler:{description:"handler for showing add condition preview",type:{name:"func"},required:!1},showConditionSubGroupPreviewHandler:{description:"handler for showing sub group preview",type:{name:"func"},required:!1},state:{description:"object that hold the current condition",type:{name:"object"},required:!1}}};const qe=({previewType:e,group:o,colorIndex:r})=>{const[s,l]=b.useState(!1),[a,c,d,u]=W(["valueText","operatorText","propertyText","ifText"]);b.useEffect(()=>{l(!0)},[]);const p=()=>n.jsxs("div",{className:`${i}__preview-condition`,children:[n.jsx(L,{label:a,renderIcon:dn}),n.jsx(L,{label:c}),n.jsx(L,{label:d})]});return n.jsxs(n.Fragment,{children:[e=="newGroup"&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:H([`${i}__group__row ${i}__group-preview `,{[`${i}__group-preview-animate`]:s}]),children:n.jsx(L,{className:`${i}__statement-button`,label:o.groupOperator})}),n.jsxs("div",{"data-color-index":r,"aria-hidden":!0,className:H([`${i}__group ${i}__condition-wrapper ${i}__group-preview ${i}__group-wrapper `,{[`${i}__group-preview-animate`]:s}]),children:[n.jsx("div",{className:`${i}__gap`,children:n.jsx(L,{className:`${i}__statement-button`,label:u})}),p()]})]}),e=="subGroup"&&n.jsx("div",{className:H([`${i}__group__row ${i}__group-preview ${i}__gap-bottom`,{[`${i}__group-preview-animate`]:s}]),children:n.jsxs("div",{className:`${i}__condition-block  ${i}__gap`,children:[n.jsx(L,{label:o.groupOperator,className:`${i}__statement-button`,popOverClassName:`${i}__gap`}),n.jsxs("div",{className:`${i}__group ${i}__condition-wrapper`,children:[n.jsx(Ne,{className:`${i}__gap ${i}__groupConnector`,operator:u}),p()]})]})}),e=="condition"&&n.jsx("div",{className:H([`${i}__group__row ${i}__group-preview ${i}__gap-bottom`,{[`${i}__group-preview-animate`]:s}]),children:n.jsxs("div",{className:`${i}__condition-block  ${i}__gap`,children:[n.jsx(L,{label:o.groupOperator,className:`${i}__statement-button`,popOverClassName:`${i}__gap`}),p()]})})]})};qe.propTypes={colorIndex:t.number,group:t.object,previewType:t.oneOf(["condition","subGroup","newGroup"])};qe.__docgenInfo={description:"",methods:[],displayName:"ConditionPreview",props:{colorIndex:{description:"index of the color for next group",type:{name:"number"},required:!1},group:{description:"current conditional group",type:{name:"object"},required:!1},previewType:{description:"type of review to be displayed",type:{name:"enum",value:[{value:"'condition'",computed:!1},{value:"'subGroup'",computed:!1},{value:"'newGroup'",computed:!1}]},required:!1}}};const Pe=({group:e,aria:o,onRemove:r,onChange:s,className:l})=>{const[a,c,d]=W(["conditionBuilderGroupText","conditionText","conditionBuilderText"]),{variant:u,conditionBuilderRef:p}=b.useContext(z),[h,g]=b.useState(-1),[m,y]=b.useState(-1);b.useState(!1);const C=b.useRef(),v=(x,f,_)=>{if(e.conditions.length>1)if(u=="tree"?T(f):G(f,_),k(e.conditions,x)){const w=e.conditions.filter(D=>x!==D.id);w!=null&&w[0].conditions&&w.splice(0,1,...w[0].conditions),s({...e,conditions:w})}else{const w=e.conditions.reduce((D,B)=>B.conditions?D.concat(B.conditions):D,[]);s({...e,conditions:w})}else r(f)},k=(x,f)=>x.find(_=>!_.conditions&&_.id!==f),j=(x,f)=>{const _=[...e.conditions.slice(0,f),x,...e.conditions.slice(f+1)];s({...e,conditions:_})},O=x=>{let f={property:void 0,operator:"",value:"",popoverToOpen:"propertyField",id:$()};s({...e,conditions:[...e.conditions.slice(0,x+1),f,...e.conditions.slice(x+1)]})},G=(x,f)=>{var w;const _=(w=x.currentTarget.closest(`.${i}__group`))==null?void 0:w.querySelectorAll('[data-name="closeCondition"]');f==_.length-1?V(_[f-1],p):V(_[f+1],p)},T=x=>{var B,ie,ce,M,ve,E,U,xe,_e;const f=(ie=(B=x.currentTarget)==null?void 0:B.closest('[role="row"]'))==null?void 0:ie.getAttribute("aria-level"),_=(M=(ce=x.currentTarget)==null?void 0:ce.closest('[role="row"]'))==null?void 0:M.getAttribute("aria-posinset"),w=(ve=C.current)==null?void 0:ve.querySelector(`[aria-level="${f}"][aria-posinset="${Number(_)+1}"]`),D=(E=C.current)==null?void 0:E.querySelector(`[aria-level="${f}"][aria-posinset="${Number(_)-1}"]`);if(w!=null&&w.classList.contains(`${i}__condition-block`))V(w==null?void 0:w.querySelector('[data-name="closeCondition"]'),p);else if(D!=null&&D.classList.contains(`${i}__condition-block`))V(D==null?void 0:D.querySelector('[data-name="closeCondition"]'),p);else{const te=(U=C.current)==null?void 0:U.querySelectorAll(`[aria-level="${Number(f)-1}"][role="row"]`),de=(xe=C.current)==null?void 0:xe.querySelector(`[aria-level="${Number(f)+1}"][role="row"]`);if(de){const Ce={ariaLevel:Number(de.ariaLevel)-1,ariaPosInSet:de.ariaPosInSet};setTimeout(()=>{const Te=C.current.querySelector(`[role="row"][aria-level="${Ce.ariaLevel}"][aria-posinset="${Ce.ariaPosInSet}"]`);V(Te==null?void 0:Te.querySelector('[data-name="closeCondition"]'),p)},0)}else(te==null?void 0:te.length)>1&&V((_e=te[te.length-2])==null?void 0:_e.querySelector('[data-name="closeCondition"]'),p)}},A=x=>{s({...e,conditions:[...e.conditions.slice(0,x+1),{groupOperator:"and",statement:"if",conditions:[{property:void 0,operator:"",value:"",popoverToOpen:"propertyField",id:$()}],id:$()},...e.conditions.slice(x+1)]})},I=(x,f)=>x+1>=f.length||f.length-1!=x&&f[x+1].conditions,q=x=>{y(x)},P=()=>{y(-1)},N=x=>{g(x)},K=()=>{g(-1)},F=x=>{var _;const f=(_=Fe.find(w=>w.id==x))==null?void 0:_.connector;s({...e,groupOperator:f,statement:x})},J=x=>{s({...e,groupOperator:x})},Q=()=>{var x;return n.jsx("div",{className:`${l}  eachGroup`,children:n.jsx("div",{className:`${i}__condition-wrapper`,role:"grid","aria-label":d,children:(x=e==null?void 0:e.conditions)==null?void 0:x.map((f,_)=>n.jsx("div",{className:`${i}__group-wrapper`,children:n.jsx(Oe,{conjunction:_>0?e.groupOperator:void 0,aria:{level:o.level+1,posinset:_+1,setsize:e.conditions.length},isStatement:_==0,condition:f,group:e,conditionIndex:_,onChange:w=>{j(w,_)},addConditionHandler:O,onRemove:w=>{v(f.id,w,_)},onConnectorOperatorChange:J,onStatementChange:F,isLastCondition:I})},f.id))})})},ee=()=>{var x;return n.jsxs("div",{className:`${l} ${i}__condition-wrapper`,role:o.level===1?"rowgroup":void 0,"aria-label":o.level==1?a:void 0,ref:C,children:[n.jsx("div",{tabIndex:0,role:"row","aria-level":o.level,"aria-posinset":o.posinset,"aria-setsize":o.setsize,children:n.jsx(L,{label:e.statement,title:c,"data-name":"connectorField",popOverClassName:`${i}__gap`,className:`${i}__statement-button`,children:n.jsx(re,{conditionState:{value:e.statement,label:c},onChange:(f,_)=>{we(_,p),F(f)},config:{options:Fe}})})}),(x=e==null?void 0:e.conditions)==null?void 0:x.map((f,_)=>n.jsxs(b.Fragment,{children:[f.conditions?n.jsxs("div",{className:H(`${i}__condition-block subgroup  ${i}__gap`,{[`${i}__gap-bottom`]:e.conditions.length<_+1},{}),children:[n.jsx(Ne,{className:`${i}__gap ${i}__gap-bottom ${i}__groupConnector`,operator:e.groupOperator,"aria-hidden":!0}),n.jsx(Pe,{aria:{level:o.level+1,posinset:_+1,setsize:e.conditions.length},className:`${i}__group`,group:f,onChange:w=>{j(w,_)},onRemove:w=>{v(f.id,w)}})]}):n.jsx("div",{children:n.jsx(Oe,{conjunction:_>0?e.groupOperator:void 0,aria:{level:o.level+1,posinset:_+1,setsize:e.conditions.length},isStatement:!1,condition:f,group:e,conditionIndex:_,addConditionHandler:O,addConditionSubGroupHandler:A,onChange:w=>{j(w,_)},onRemove:w=>{v(f.id,w)},onConnectorOperatorChange:J,onStatementChange:F,showConditionSubGroupPreviewHandler:()=>{q(_)},hideConditionSubGroupPreviewHandler:P,showConditionPreviewHandler:()=>{N(_)},hideConditionPreviewHandler:K,isLastCondition:I})}),_==m&&n.jsx(qe,{previewType:"subGroup",group:e}),_==h&&n.jsx(qe,{previewType:"condition",group:e})]},f.id))]})};return n.jsxs(n.Fragment,{children:[u=="tree"&&ee(),u=="sentence"&&Q()]})};Pe.propTypes={aria:t.object,className:t.string,group:t.object,onChange:t.func,onRemove:t.func};Pe.__docgenInfo={description:`state - this is the current group that is being rendered . This can be a inner group or outer group
All the inner components of group are called from here.
@returns`,methods:[],displayName:"ConditionGroupBuilder",props:{aria:{description:"object contains the aria attributes",type:{name:"object"},required:!1},className:{description:"Provide an optional class to be applied to the containing node.",type:{name:"string"},required:!1},group:{description:"",type:{name:"object"},required:!1},onChange:{description:"callback to update the current condition of the state tree",type:{name:"func"},required:!1},onRemove:{description:"call back to remove the particular group from the state tree",type:{name:"func"},required:!1}}};const Yt=()=>{const{rootState:e,setRootState:o}=b.useContext(z),[r]=W(["conditionText"]),s=l=>{o({...e,operator:l})};return n.jsx("div",{className:`${i}__group-separator ${i}__group-separator-row`,role:"row",tabIndex:-1,"aria-level":1,children:n.jsx(L,{label:e.operator,title:r,"data-name":"connectorField",popOverClassName:`${i}__gap`,className:`${i}__statement-button`,children:n.jsx(re,{conditionState:{value:e.operator,label:r},onChange:s,config:{options:Ut}})})})};Yt.__docgenInfo={description:"",methods:[],displayName:"GroupConnector"};const Ye=({actions:e,className:o})=>{const{actionState:r,setActionState:s}=b.useContext(z),[l,a]=b.useState(-1),[c,d,u,p,h,g]=W(["actionsText","then","and","removeActionText","addActionText","actionSectionText"]),m=()=>{const j={id:$(),label:void 0,popoverToOpen:"valueField"};s([...r,j])},y=(j,O)=>{const T={...e.find(A=>A.id===j),id:r[O].id};s([...r.slice(0,O),T,...r.slice(O+1)])},C=j=>{s(r.filter(O=>O.id!==j))},v=j=>{a(j)},k=()=>{a(-1)};return n.jsxs("div",{className:o,children:[n.jsx(We,{className:`${i}__heading`,level:4,children:n.jsx(Me,{children:c})}),n.jsxs("div",{className:`${i}__condition-wrapper`,role:"grid","aria-label":g,children:[r==null?void 0:r.map((j,O)=>n.jsxs("div",{role:"row",className:H(`${i}__condition-block ${i}__gap ${i}__gap-bottom`,{[`${i}__condition__deletion-preview`]:l==O}),children:[n.jsx(L,{className:`${i}__statement-button`,tabIndex:0,popOverClassName:`${i}__gap`,label:O===0?d:u}),n.jsx(L,{label:j.label,title:c,condition:j,"data-name":"valueField",type:"option",children:n.jsx(ke,{conditionState:{value:j.label},onChange:G=>y(G.id,O),config:{options:e}})}),n.jsx("span",{role:"gridcell","aria-label":p,children:n.jsx(Y,{hideLabel:!0,label:p,onClick:()=>C(j.id),onMouseEnter:()=>v(O),onMouseLeave:k,onFocus:()=>v(O),onBlur:k,renderIcon:Ot,className:`${i}__close-condition`,"data-name":"closeCondition"})}),r.length===O+1&&n.jsx(je,{onClick:m,className:`${i}__gap ${i}__gap-left`,buttonLabel:h,tabIndex:0})]},j.id)),r.length===0&&n.jsx(je,{onClick:m,className:`${i}__gap ${i}__gap-left`,buttonLabel:h,tabIndex:0})]})]})};Ye.propTypes={actions:t.arrayOf(t.shape({id:t.oneOfType([t.string,t.number]).isRequired,label:t.string.isRequired})),className:t.string};Ye.__docgenInfo={description:"",methods:[],displayName:"ConditionBuilderActions",props:{actions:{description:"optional array of object that give the list of actions.",type:{name:"arrayOf",value:{name:"shape",value:{id:{name:"union",value:[{name:"string"},{name:"number"}],required:!0},label:{name:"string",required:!0}}}},required:!1},className:{description:"Provide an optional class to be applied to the containing node.",type:{name:"string"},required:!1}}};const Je=({startConditionLabel:e,getConditionState:o,getActionsState:r,initialState:s,actions:l})=>{var I;const{rootState:a,setRootState:c,variant:d,actionState:u}=b.useContext(z),[p,h]=b.useState(!1),[g,m]=b.useState(!1),[y,C]=W(["addConditionGroupText","conditionHeadingText"]),v=()=>{m(!0)},k=()=>{m(!1)};b.useEffect(()=>{var q;(q=a==null?void 0:a.groups)!=null&&q.length?h(!0):h(!1),o&&o(a)},[a]),b.useEffect(()=>{r==null||r(u)},[u]);const j=()=>{h(!0),c(s??qn)},O=b.useCallback(q=>{c({...a,groups:a.groups.filter(P=>q!==P.id)})},[c,a]),G=(q,P)=>{const N=[...a.groups.slice(0,P),q,...a.groups.slice(P+1)];c({...a,groups:N})},T=()=>{const q={groupOperator:"and",statement:"if",id:$(),conditions:[{property:void 0,operator:"",value:"",popoverToOpen:"propertyField",id:$()}]};c({...a,groups:[...a.groups,q]})},A=()=>{var P;return(((P=a==null?void 0:a.groups)==null?void 0:P.length)??0)%5};return p?n.jsxs(n.Fragment,{children:[n.jsx(We,{className:`${i}__heading`,level:4,children:n.jsx(Me,{children:C})}),n.jsxs("div",{className:`${i}__content-container`,role:"treegrid","aria-label":"condition builder tree",children:[a&&((I=a==null?void 0:a.groups)==null?void 0:I.map((q,P)=>n.jsxs("div",{className:`${i}__group-wrapper`,children:[n.jsx(Pe,{className:`${i}__group`,aria:{level:1,posinset:P*2+1,setsize:a.groups.length*2},group:q,onRemove:()=>{O(q.id)},onChange:N=>{G(N,P)}}),P<a.groups.length-1&&n.jsx(Yt,{})]},q.id))),d=="tree"&&n.jsx("div",{role:"row",tabIndex:-1,"aria-level":1,className:`${i}__add-group`,children:n.jsx(Y,{renderIcon:Wt,onClick:T,onMouseEnter:v,onMouseLeave:k,onFocus:v,onBlur:k,className:`${i}__add-condition-group `,hideLabel:!0,label:y,wrapperProps:{role:"gridcell","aria-label":y}})}),g&&n.jsx(qe,{previewType:"newGroup",colorIndex:A(),group:{groupOperator:a.operator}})]}),l&&n.jsx(Ye,{actions:l,className:`${i}__actions-container`,variant:d})]}):n.jsx($t,{className:`${i}__addConditionText-button`,renderIcon:q=>n.jsx(Gt,{...q}),iconDescription:e,kind:"ghost",size:"sm",onClick:j,children:e})};Je.propTypes={actions:t.arrayOf(t.shape({id:t.oneOfType([t.string,t.number]).isRequired,label:t.string.isRequired})),getActionsState:t.func,getConditionState:t.func.isRequired,initialState:t.shape({groups:t.arrayOf(t.shape({groupOperator:t.string.isRequired,statement:t.string.isRequired,conditions:t.arrayOf(t.oneOfType([t.shape({property:t.string.isRequired,operator:t.string.isRequired,value:t.oneOfType([t.string,t.arrayOf(t.shape({id:t.string,label:t.string})),t.shape({id:t.string,label:t.string})])}),t.object]))})),operator:t.string}),startConditionLabel:t.string.isRequired};Je.__docgenInfo={description:"",methods:[],displayName:"ConditionBuilderContent",props:{actions:{description:"optional array of object that give the list of actions.",type:{name:"arrayOf",value:{name:"shape",value:{id:{name:"union",value:[{name:"string"},{name:"number"}],required:!0},label:{name:"string",required:!0}}}},required:!1},getActionsState:{description:"callback functions that will provide the updated action state back.",type:{name:"func"},required:!1},getConditionState:{description:"This is a callback function that returns the updated state",type:{name:"func"},required:!0},initialState:{description:"Optional prop if the condition building need to start from a predefined initial state",type:{name:"shape",value:{groups:{name:"arrayOf",value:{name:"shape",value:{groupOperator:{name:"string",required:!0},statement:{name:"string",required:!0},conditions:{name:"arrayOf",value:{name:"union",value:[{name:"shape",value:{property:{name:"string",required:!0},operator:{name:"string",required:!0},value:{name:"union",value:[{name:"string"},{name:"arrayOf",value:{name:"shape",value:{id:{name:"string",required:!1},label:{name:"string",required:!1}}}},{name:"shape",value:{id:{name:"string",required:!1},label:{name:"string",required:!1}}}],required:!1}}},{name:"object"}]},required:!1}}},required:!1},operator:{name:"string",required:!1}}},required:!1},startConditionLabel:{description:"",type:{name:"string"},required:!0}}};const Qe="ConditionBuilder";let ae=S.forwardRef(({className:e,inputConfig:o,startConditionLabel:r,popOverSearchThreshold:s,getOptions:l,initialState:a,getConditionState:c,getActionsState:d,variant:u="sentence",actions:p,translateWithId:h,...g},m)=>{const y=b.useRef(),C=m||y,v=k=>{Nn(k,C,u)};return n.jsx(ze,{inputConfig:o,popOverSearchThreshold:s,getOptions:l,variant:u,translateWithId:h,conditionBuilderRef:C,children:n.jsx("div",{...g,className:H(i,e,{}),role:"main",ref:C,...un(Qe),children:n.jsx(Tn,{className:`${i}__${u}`,onKeyDown:v,children:n.jsx(Je,{startConditionLabel:r,getConditionState:c,getActionsState:d,initialState:a,actions:p})})})})});ae=Ve.checkComponentEnabled(ae,Qe);ae.displayName=Qe;ae.propTypes={actions:t.arrayOf(t.shape({id:t.oneOfType([t.string,t.number]).isRequired,label:t.string.isRequired})),className:t.string,getActionsState:t.func,getConditionState:t.func.isRequired,getOptions:t.func,initialState:t.shape({groups:t.arrayOf(t.shape({groupOperator:t.string.isRequired,statement:t.string.isRequired,conditions:t.arrayOf(t.oneOfType([t.shape({property:t.string.isRequired,operator:t.string.isRequired,value:t.oneOfType([t.string,t.arrayOf(t.shape({id:t.string,label:t.string})),t.shape({id:t.string,label:t.string})])}),t.object]))})),operator:t.string}),inputConfig:t.shape({properties:t.arrayOf(t.shape({id:t.string.isRequired,label:t.string.isRequired,icon:t.oneOfType([t.func,t.object]),type:t.oneOf(["text","textarea","number","date","option","time","custom"]).isRequired,config:t.shape({options:t.arrayOf(t.shape({id:t.string.isRequired,label:t.string.isRequired,icon:t.oneOfType([t.func,t.object])})),component:t.func,operators:t.arrayOf(t.shape({id:t.string.isRequired,label:t.string.isRequired}))})}))}).isRequired,popOverSearchThreshold:t.number.isRequired,startConditionLabel:t.string.isRequired,translateWithId:t.func,variant:t.oneOf(["tree","sentence"])};ae.__docgenInfo={description:"TODO: A description of the component.",methods:[],displayName:"ConditionBuilder",props:{variant:{defaultValue:{value:"'sentence'",computed:!1},description:"Provide the condition builder variant: sentence/ tree",type:{name:"enum",value:[{value:"'tree'",computed:!1},{value:"'sentence'",computed:!1}]},required:!1},actions:{description:"optional array of actions",type:{name:"arrayOf",value:{name:"shape",value:{id:{name:"union",value:[{name:"string"},{name:"number"}],required:!0},label:{name:"string",required:!0}}}},required:!1},className:{description:"Provide an optional class to be applied to the containing node.",type:{name:"string"},required:!1},getActionsState:{description:"This is a callback that gives back the updated action state",type:{name:"func"},required:!1},getConditionState:{description:"This is a callback that gives back updated condition state",type:{name:"func"},required:!0},getOptions:{description:`This is a callback that get triggered when  you want to dynamically fetch options.
 Component call this when the option array is not passed against a property with type as option in the input config.
This is an asynchronous callback that can return a promise , and you need to resolve the promise with options array in the valid format.
You will receive the root condition state and current condition as the 2 arguments.
eg: const getOptions = async (conditionState,condition) => {
  switch (condition.property) {
    case 'continent':
      return new Promise((resolve) => {
        const continents=[{
      label: 'Africa',
      id: 'Africa',
    },...]
          resolve(continents);
      });
      default:
      return [];
  }
};`,type:{name:"func"},required:!1},initialState:{description:`Optional prop if you want to pass a saved condition state.
 This object should respect the structure of condition state that is available in getConditionState callback`,type:{name:"shape",value:{groups:{name:"arrayOf",value:{name:"shape",value:{groupOperator:{name:"string",required:!0},statement:{name:"string",required:!0},conditions:{name:"arrayOf",value:{name:"union",value:[{name:"shape",value:{property:{name:"string",required:!0},operator:{name:"string",required:!0},value:{name:"union",value:[{name:"string"},{name:"arrayOf",value:{name:"shape",value:{id:{name:"string",required:!1},label:{name:"string",required:!1}}}},{name:"shape",value:{id:{name:"string",required:!1},label:{name:"string",required:!1}}}],required:!1}}},{name:"object"}]},required:!1}}},required:!1},operator:{name:"string",required:!1}}},required:!1},inputConfig:{description:"This is a mandatory prop that defines the input to the condition builder.",type:{name:"shape",value:{properties:{name:"arrayOf",value:{name:"shape",value:{id:{name:"string",required:!0},label:{name:"string",required:!0},icon:{name:"union",value:[{name:"func"},{name:"object"}],required:!1},type:{name:"enum",value:[{value:"'text'",computed:!1},{value:"'textarea'",computed:!1},{value:"'number'",computed:!1},{value:"'date'",computed:!1},{value:"'option'",computed:!1},{value:"'time'",computed:!1},{value:"'custom'",computed:!1}],required:!0},config:{name:"shape",value:{options:{name:"arrayOf",value:{name:"shape",value:{id:{name:"string",required:!0},label:{name:"string",required:!0},icon:{name:"union",value:[{name:"func"},{name:"object"}],required:!1}}},required:!1},component:{name:"func",required:!1},operators:{name:"arrayOf",value:{name:"shape",value:{id:{name:"string",required:!0},label:{name:"string",required:!0}}},required:!1}},required:!1}}},required:!1}}},required:!0},popOverSearchThreshold:{description:"Provide an mandatory numeric value that will be used to enable search option in the popovers with list.",type:{name:"number"},required:!0},startConditionLabel:{description:"Provide a label to the button that starts condition builder",type:{name:"string"},required:!0},translateWithId:{description:`Optional prop, if you need to pass translations to the texts on the component instead of the defined defaults.
This callback function will receive the message id and you need to return the corresponding text for that id.
The message id will be one of [   "ifText","addConditionText",   "addConditionGroupText",   "addSubgroupText",   "conditionText",   "propertyText",   "operatorText",   "valueText",   "connectorText",   "conditionRowText","conditionRowGroupText","conditionBuilderText","actionSectionText",   "removeConditionText",   "addConditionRowText",   "startText",   "endText",   "clearSearchText",   "actionsText",   "then",   "removeActionText",   "addActionText",   "invalidText",  "invalidNumberWarnText"]
]`,type:{name:"func"},required:!1}}};function it(e){const o={a:"a",h1:"h1",h2:"h2",li:"li",ul:"ul",...At(),...e.components};return n.jsxs(n.Fragment,{children:[n.jsx(o.h1,{id:"conditionbuilder",children:"ConditionBuilder"}),`
`,n.jsx(o.h2,{id:"table-of-contents",children:"Table of Contents"}),`
`,n.jsxs(o.ul,{children:[`
`,n.jsx(o.li,{children:n.jsx(o.a,{href:"#overview",children:"Overview"})}),`
`,n.jsx(o.li,{children:n.jsx(o.a,{href:"#example-usage",children:"Example usage"})}),`
`,n.jsx(o.li,{children:n.jsx(o.a,{href:"#component-api",children:"Component API"})}),`
`]}),`
`,n.jsx(o.h2,{id:"overview",children:"Overview"}),`
`,`
`,n.jsx(o.h2,{id:"example-usage",children:"Example usage"}),`
`,`
`,n.jsx(rn,{children:n.jsx(an,{of:ne})}),`
`,n.jsx(o.h2,{id:"code-sample",children:"Code sample"}),`
`,`
`,n.jsx(o.h2,{id:"component-api",children:"Component API"}),`
`,n.jsx(sn,{})]})}function Dn(e={}){const{wrapper:o}={...At(),...e.components};return o?n.jsx(o,{...e,children:n.jsx(it,{...e})}):it(e)}const Rn="",et=({onChange:e,conditionState:o})=>{const r=s=>{e(s.target.value)};return n.jsx("div",{className:"custom-component",children:n.jsx(Pt,{labelText:"labelText",hideLabel:!0,value:o.value??"",id:"customInput",onChange:r})})};et.propTypes={conditionState:t.object,onChange:t.func};et.__docgenInfo={description:"",methods:[],displayName:"CustomInput",props:{conditionState:{description:"current condition state",type:{name:"object"},required:!1},onChange:{description:"This function need to be called that provides a label which should be shown in the condition after a user has made their selection / set their value",type:{name:"func"},required:!1}}};const Ln=[{label:"is greater than",id:"greater"},{label:"is greater than or equal to",id:"greaterEqual"}],ye={properties:[{id:"continent",label:"Continent",icon:It,type:"option",config:{options:[{label:"Africa",id:"Africa"},{label:"Antarctica",id:"Antarctica"},{label:"Asia",id:"Asia"},{label:"Australia",id:"Australia"},{label:"Europe",id:"Europe"}]}},{id:"region",label:"Region",icon:Dt,type:"option",config:{options:[{label:"Afghanistan",id:"AF",icon:X},{label:"Albania",id:"AL",icon:X},{label:"Algeria",id:"AG",icon:X},{label:"Andorra",id:"AN",icon:X},{label:"India",id:"India",icon:X}]}},{id:"color",label:"Color",icon:kt,type:"option",config:{options:[{label:"black",id:"black"},{label:"silver",id:"silver"},{label:"gray",id:"gray"},{label:"white",id:"white"},{label:"maroon",id:"maroon"},{label:"red",id:"red"},{label:"purple",id:"purple"},{label:"fuchsia",id:"fuchsia"},{label:"green",id:"green"},{label:"lime",id:"lime"},{label:"olive",id:"olive"},{label:"yellow",id:"yellow"},{label:"navy",id:"navy"},{label:"blue",id:"blue"},{label:"teal",id:"teal"},{label:"aqua",id:"aqua"}]}},{id:"id",label:"ID",icon:Le,type:"text",config:{}},{id:"id_long",label:"Id Long",icon:Le,type:"textarea",config:{}},{id:"price",label:"Price",icon:Lt,type:"number",config:{min:0,step:1,unit:"Dollars"}},{id:"date",label:"Date",icon:$e,type:"date",config:{}},{id:"time",label:"Time",icon:$e,type:"time",config:{timeZones:["IST","CET","UTC","LOCAL"]}},{id:"delivery",label:"Delivery",icon:Bt,type:"option",config:{options:[{label:"Processing",id:"Processing"},{label:"Preparing for dispatch",id:"Preparing for dispatch"},{label:"Dispatched",id:"Dispatched"},{label:"In delivery",id:"In delivery"},{label:"Delivered",id:"Delivered"}]}},{id:"season",label:"Season",icon:Ft,type:"option",config:{options:[{label:"Winter",id:"Winter"},{label:"Spring",id:"Spring"},{label:"Summer",id:"Summer"},{label:"Fall",id:"Fall"}]}},{id:"product",label:"Product",icon:Ht,type:"custom",config:{component:et,operators:Ln}}]},Bn={properties:[{id:"continent",label:"Continent",icon:It,type:"option",config:{}},{id:"region",label:"Region",icon:Dt,type:"option",config:{}},{id:"color",label:"Color",icon:kt,type:"option",config:{}},{id:"id",label:"ID",icon:Le,type:"text",config:{}},{id:"price",label:"Price",icon:Lt,type:"number",config:{min:0,step:1,unit:"Dollars"}},{id:"date",label:"Date",icon:$e,type:"date",config:{}},{id:"time",label:"Time",icon:$e,type:"time",config:{timeZones:["IST","CET","UTC","LOCAL"]}},{id:"product",label:"Product",icon:Ht,type:"text",config:{}},{id:"delivery",label:"Delivery",icon:Bt,type:"option",config:{options:[{label:"Processing",id:"Processing"},{label:"Preparing for dispatch",id:"Preparing for dispatch"},{label:"Dispatched",id:"Dispatched"},{label:"In delivery",id:"In delivery"},{label:"Delivered",id:"Delivered"}]}},{id:"season",label:"Season",icon:Ft,type:"option",config:{options:[{label:"Winter",id:"Winter"},{label:"Spring",id:"Spring"},{label:"Summer",id:"Summer"},{label:"Fall",id:"Fall"}]}}]},Hn={operator:"or",groups:[{groupOperator:"and",statement:"if",id:$(),conditions:[{property:"region",operator:"is",value:"IL",id:$()},{property:"delivery",operator:"is",value:"processing",id:$()},{property:"delivery",operator:"is",value:"processing",id:$()},{property:"delivery",operator:"is",value:"processing",id:$()},{groupOperator:"and",statement:"if",id:$(),conditions:[{property:"region",operator:"is",value:"IL",id:$()},{property:"delivery",operator:"is",value:"processing",id:$()},{property:"delivery",operator:"is",value:"processing",id:$()},{property:"delivery",operator:"is",value:"processing",id:$()},{groupOperator:"and",statement:"if",id:$(),conditions:[{property:"region",operator:"is",value:"IL",id:$()},{property:"delivery",operator:"is",value:"processing",id:$()},{property:"delivery",operator:"is",value:"processing",id:$()}]}]}]},{groupOperator:"and",statement:"if",id:$(),conditions:[{property:"continent",operator:"is",value:"Asia",id:$()},{property:"region",operator:"is",value:"India",id:$()},{property:"price",operator:"is",value:"20",id:$()}]}]},Fn={groups:[{groupOperator:"and",statement:"if",id:$(),conditions:[{property:"region",operator:"oneOf",value:[{label:"Africa",id:"Africa"},{label:"India",id:"Ind"}],id:$()},{property:"delivery",operator:"is",value:"processing",id:$()},{property:"price",operator:"is",value:"3 Dollars",id:$()}]}]},Ho={title:"Experimental/Components/ConditionBuilder",component:ae,tags:["autodocs"],parameters:{layout:"fullscreen",styles:Rn,docs:{page:Dn}}},Gn=()=>[{label:"Africa",id:"Africa"},{label:"Antarctica",id:"Antarctica"},{label:"Asia",id:"Asia"},{label:"Australia",id:"Australia"},{label:"Europe",id:"Europe"}],En=()=>[{label:"Afghanistan",id:"AF",icon:X},{label:"Albania",id:"AL",icon:X},{label:"Algeria",id:"AG",icon:X},{label:"Andorra",id:"AN",icon:X}],Vn=()=>[{label:"black",id:"black"},{label:"silver",id:"silver"},{label:"gray",id:"gray"},{label:"white",id:"white"},{label:"maroon",id:"maroon"},{label:"red",id:"red"},{label:"purple",id:"purple"},{label:"fuchsia",id:"fuchsia"},{label:"green",id:"green"},{label:"lime",id:"lime"},{label:"olive",id:"olive"},{label:"yellow",id:"yellow"},{label:"navy",id:"navy"},{label:"blue",id:"blue"},{label:"teal",id:"teal"},{label:"aqua",id:"aqua"}],Wn=async(e,{property:o})=>{switch(o){case"continent":return new Promise(r=>{setTimeout(()=>{r(Gn())},2e3)});case"region":return new Promise(r=>{setTimeout(()=>{r(En())},2e3)});case"color":return new Promise(r=>{setTimeout(()=>{r(Vn())},2e3)});default:return[]}},Mn={startConditionLabel:"Add condition",popOverSearchThreshold:4,getConditionState:e=>{console.log(e)}},Jt=[{id:$(),label:"Add item to cart"},{id:$(),label:"Proceed item to checkout"}],zn=e=>({ifText:"if",addConditionText:"Add condition",addConditionGroupText:"Add condition group",addSubgroupText:"Add subgroup"})[e],le=e=>{const o=b.useRef();return n.jsx(ae,{...e,ref:o,...Mn})},ne=le.bind({});ne.storyName="Condition Builder";ne.args={inputConfig:ye,variant:"sentence"};const ue=le.bind({});ue.storyName="With dynamic options";ue.args={inputConfig:Bn,getOptions:Wn,variant:"sentence"};const me=le.bind({});me.storyName="With initial state";me.args={initialState:Fn,inputConfig:ye,variant:"sentence",translateWithId:zn};const fe=le.bind({});fe.storyName="With Actions";fe.args={inputConfig:ye,variant:"sentence",actions:Jt,getActionsState:e=>{console.log("action state",e)}};const he=le.bind({});he.storyName="Condition Builder(Tree)";he.args={inputConfig:ye,variant:"tree"};const ge=le.bind({});ge.storyName="With initial state(Tree)";ge.args={initialState:Hn,inputConfig:ye,variant:"tree"};const be=le.bind({});be.storyName="With Actions(Tree)";be.args={inputConfig:ye,variant:"tree",actions:Jt,getActionsState:e=>{}};var at,st,lt,ct,dt;ne.parameters={...ne.parameters,docs:{...(at=ne.parameters)==null?void 0:at.docs,source:{originalSource:`args => {
  const ref = useRef();
  return <ConditionBuilder {...args} ref={ref} {...requiredProps} />;
}`,...(lt=(st=ne.parameters)==null?void 0:st.docs)==null?void 0:lt.source},description:{story:`TODO: Declare one or more stories, generally one per design scenario.
NB no need for a 'Playground' because all stories have all controls anyway.`,...(dt=(ct=ne.parameters)==null?void 0:ct.docs)==null?void 0:dt.description}}};var pt,ut,mt;ue.parameters={...ue.parameters,docs:{...(pt=ue.parameters)==null?void 0:pt.docs,source:{originalSource:`args => {
  const ref = useRef();
  return <ConditionBuilder {...args} ref={ref} {...requiredProps} />;
}`,...(mt=(ut=ue.parameters)==null?void 0:ut.docs)==null?void 0:mt.source}}};var ft,ht,gt;me.parameters={...me.parameters,docs:{...(ft=me.parameters)==null?void 0:ft.docs,source:{originalSource:`args => {
  const ref = useRef();
  return <ConditionBuilder {...args} ref={ref} {...requiredProps} />;
}`,...(gt=(ht=me.parameters)==null?void 0:ht.docs)==null?void 0:gt.source}}};var bt,yt,vt;fe.parameters={...fe.parameters,docs:{...(bt=fe.parameters)==null?void 0:bt.docs,source:{originalSource:`args => {
  const ref = useRef();
  return <ConditionBuilder {...args} ref={ref} {...requiredProps} />;
}`,...(vt=(yt=fe.parameters)==null?void 0:yt.docs)==null?void 0:vt.source}}};var xt,_t,Ct;he.parameters={...he.parameters,docs:{...(xt=he.parameters)==null?void 0:xt.docs,source:{originalSource:`args => {
  const ref = useRef();
  return <ConditionBuilder {...args} ref={ref} {...requiredProps} />;
}`,...(Ct=(_t=he.parameters)==null?void 0:_t.docs)==null?void 0:Ct.source}}};var Tt,wt,jt;ge.parameters={...ge.parameters,docs:{...(Tt=ge.parameters)==null?void 0:Tt.docs,source:{originalSource:`args => {
  const ref = useRef();
  return <ConditionBuilder {...args} ref={ref} {...requiredProps} />;
}`,...(jt=(wt=ge.parameters)==null?void 0:wt.docs)==null?void 0:jt.source}}};var qt,St,Nt;be.parameters={...be.parameters,docs:{...(qt=be.parameters)==null?void 0:qt.docs,source:{originalSource:`args => {
  const ref = useRef();
  return <ConditionBuilder {...args} ref={ref} {...requiredProps} />;
}`,...(Nt=(St=be.parameters)==null?void 0:St.docs)==null?void 0:Nt.source}}};const Fo=["conditionBuilder","conditionBuilderDynamicOptions","conditionBuilderWithInitialState","conditionBuilderWithActions","conditionBuilderTree","conditionBuilderWithInitialStateTree","conditionBuilderWithActionsTree"];export{Fo as __namedExportsOrder,ne as conditionBuilder,ue as conditionBuilderDynamicOptions,he as conditionBuilderTree,fe as conditionBuilderWithActions,be as conditionBuilderWithActionsTree,me as conditionBuilderWithInitialState,ge as conditionBuilderWithInitialStateTree,Ho as default};
