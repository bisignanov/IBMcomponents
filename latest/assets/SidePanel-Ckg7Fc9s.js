import{p as ye,j as o,B as J,I as Ve,a as Ge}from"./settings-DrdbGLhD.js";import{R as pe,r as a}from"./index-BwDkhjyp.js";import{P as t}from"./index-Dk74W0Oi.js";import{c as P,C as Ke}from"./deprecate-D9ms-jbM.js";import{m as ue}from"./index-DkUr2NOz.js";import{g as Ze}from"./devtools-B_UYo462.js";import{a as Je}from"./props-helper-D-fMQKH_.js";import{D as N,E as z,m as se,u as Qe,A as fe}from"./motionConstants-DFa43y0E.js";import{A as ve}from"./ActionSet-Byj_zrS3.js";import{u as he}from"./usePreviousValue-DDnp_zt4.js";import{u as We}from"./useFocus-S7kgSeaq.js";import{a as Xe}from"./bucket-0-D7rUCVax.js";const ge={xs:"16rem",sm:"20rem",md:"30rem",lg:"40rem",xl:"65rem",max:"75%"},Ye={visible:{opacity:1,transition:{duration:N.moderate02,ease:z.productive.standard}},hidden:{opacity:0},exit:{opacity:0}},Ue={visible:({shouldReduceMotion:s})=>({x:0,transition:{duration:N.moderate02,ease:z.productive.standard},opacity:s&&1}),hidden:({placement:s,shouldReduceMotion:f})=>({x:s==="right"?f?0:"100%":f?0:-320,opacity:f&&0}),exit:({placement:s,shouldReduceMotion:f})=>({x:s==="right"?f?0:"100%":f?0:-320,transition:{duration:N.moderate01,ease:z.productive.exit},opacity:f&&0})},Re={hidden:s=>({opacity:s?0:1,transition:{duration:s?N.moderate01:N.fast01,ease:s?0:z.productive.exit}}),visible:s=>({opacity:1,transition:{duration:s?N.moderate01:N.fast02,ease:s?0:z.productive.entrance,delay:s?.075:0}})},n=`${ye.prefix}--side-panel`,Q="SidePanel",et=se(ve),D={animateTitle:!0,closeIconDescription:"Close",currentStep:0,navigationBackIconDescription:"Back",placement:"right",size:"md"};let M=pe.forwardRef(({actionToolbarButtons:s,actions:f,animateTitle:k=D.animateTitle,children:be,className:xe,closeIconDescription:W=D.closeIconDescription,condensedActions:ie,currentStep:O=D.currentStep,id:X=n,includeOverlay:A,labelText:E,navigationBackIconDescription:oe=D.navigationBackIconDescription,onNavigationBack:Se,onRequestClose:F,onUnmount:w,open:i,placement:x=D.placement,preventCloseOnClickOutside:re,selectorPageContent:j,selectorPrimaryFocus:Y,size:h=D.size,slideIn:T,slug:V,subtitle:U,title:c,launcherButtonRef:C,..._e},we)=>{const[G,R]=a.useState(!1),Te=a.useRef(null),$=we||Te,ee=a.useRef(null),g=a.useRef(null),$e=a.useRef(null),qe=a.useRef(null),ke=a.useRef(null),y=a.useRef(null),l=a.useRef(null),b=a.useRef(null),q=he({size:h,open:i,currentStep:O}),[te,Pe]=a.useState(-1),[S,ne]=a.useState(!0),{firstElement:K,keyDownListener:Ne}=We($),r=$.current,le=he(i),ce=Qe(),[de,Ae]=a.useState(0);a.useEffect(()=>{i&&!(y!=null&&y.current)?ne(!1):ne(k)},[k,i]);const me=a.useCallback(e=>{var m,d,v;if(b!=null&&b.current){const u=b==null?void 0:b.current,B=(u==null?void 0:u.clientHeight)*e;(m=u==null?void 0:u.style)==null||m.setProperty("margin-top",`${-B}px`)}if(l!=null&&l.current){const u=de*e;(v=(d=l==null?void 0:l.current)==null?void 0:d.style)==null||v.setProperty("margin-top",`${-u}px`)}},[de]);a.useEffect(()=>{var e;i&&k&&(l!=null&&l.current)&&Ae(Number(((e=l==null?void 0:l.current)==null?void 0:e.clientHeight)||null))},[k,l,i]);const ae=a.useCallback(()=>{var e;if(S&&(g!=null&&g.current)){const m=(e=g==null?void 0:g.current)==null?void 0:e.scrollTop,d=Math.min(Number(m),te)/te;r==null||r.style.setProperty(`--${n}--scroll-animation-progress`,d.toString()),me(d)}},[S,r==null?void 0:r.style,te,me]),p=typeof document<"u"&&(window!=null&&window.matchMedia)?window.matchMedia("(prefers-reduced-motion: reduce)"):{matches:!0};a.useEffect(()=>{if($&&r){const e=qe.current??g.current;q&&q.currentStep!==O&&e&&(e.scrollTop=0),q&&q.size!==h&&e&&(e.scrollTop=0)}},[O,$,h,q,X,r]),a.useEffect(()=>{!c&&E&&console.warn(`${Q}: The prop \`labelText\` was provided without a \`title\`. It is required to have a \`title\` when using the \`labelText\` prop.`)},[E,c]),a.useEffect(()=>{le&&!i&&C&&setTimeout(()=>{var e;(e=C==null?void 0:C.current)==null||e.focus()},0)},[C,i,le]);const Ee=()=>{var m,d;let e=!1;if(r&&i&&k&&G&&(y!=null&&y.current)&&c&&c.length&&!p.matches){const v=y.current,u=((m=l==null?void 0:l.current)==null?void 0:m.offsetHeight)??0,I=((d=b==null?void 0:b.current)==null?void 0:d.offsetHeight)??0,B=s?v.offsetHeight-v.clientHeight:0,H=u+I+B;Pe(H),r==null||r.style.setProperty(`--${n}--scroll-animation-distance`,H.toString());const L=g.current;if(L){const _=window==null?void 0:window.getComputedStyle(g.current),Z=_?parseFloat(_==null?void 0:_.paddingTop)+parseFloat(_==null?void 0:_.paddingBottom):0;e=(!!E||!!s||!!U)&&L.scrollHeight-L.clientHeight>=H+Z}}S!==e&&ne(e)};a.useEffect(()=>{!S&&$.current&&(r==null||r.style.setProperty(`--${n}--scroll-animation-progress`,"0"))},[S,ae,$,g,i,r==null?void 0:r.style]),a.useEffect(()=>{r&&i&&k&&G&&(y!=null&&y.current)&&c&&c.length&&!p.matches&&Ee()},[i,S,G,ae,c,h,p.matches,X]),a.useEffect(()=>{const e=d=>{r&&ee.current&&ee.current.contains(d.target)&&F&&F()},m=document.body;return A&&i?m.style.overflow="hidden":A&&!i&&(m.style.overflow=""),A&&!re&&document.addEventListener("click",e),()=>{const d=document.body;d.style.overflow="",document.removeEventListener("click",e)}},[A,F,i,re,w,$,r]);const je=()=>{i||w==null||w(),R(!0)};a.useEffect(()=>{p.matches&&R(!0)},[p.matches]);const De=()=>{R(!1)};a.useEffect(()=>{if(!i&&T){const e=j?document.querySelector(j):null;x&&x==="right"&&e?e.style.marginInlineEnd="0":e&&(e.style.marginInlineStart="0")}},[i,x,j,T]),a.useEffect(()=>{!i&&q&&q.open&&p.matches&&(w==null||w())},[i,w,p.matches,q]),a.useEffect(()=>{if(i&&T){const e=j?document.querySelector(j):null;e?e.style.inlineSize="auto":Ge.warn("SidePanel prop `selectorPageContent` was not provided a selector that matches any element on your page. If an element is not found, the panel will render as a slide over."),x&&x==="right"&&e?(e.style.marginInlineEnd="0",e.style.transition=p.matches?"":`margin-inline-end ${ue}`,e.style.marginInlineEnd=ge[h]):e&&(e.style.marginInlineStart="0",e.style.transition=p.matches?"":`margin-inline-start ${ue}`,e.style.marginInlineStart=ge[h])}},[T,j,x,h,p.matches,i]),a.useEffect(()=>{i&&setTimeout(()=>{if(Y){const e=document==null?void 0:document.querySelector(Y);e&&(e==null||e.focus())}else T||K==null||K.focus()},0)},[G,K,i,Y,T]);const Oe=P([`${n}__actions-container`,{[`${n}__actions-container--condensed`]:ie}]),Ce=P([n,xe,`${n}`,`${n}--${h}`,{[`${n}--right-placement`]:x==="right",[`${n}--left-placement`]:x==="left",[`${n}--slide-in`]:T,[`${n}--has-slug`]:V,[`${n}--condensed-actions`]:ie,[`${n}--has-overlay`]:A}]),Ie=()=>o.jsxs("div",{className:P(`${n}__title`,{[`${n}__title--no-label`]:!l.current}),ref:y,children:[o.jsx("h2",{className:`${n}__title-text`,title:c,"aria-hidden":!1,children:c}),S&&!p.matches&&o.jsx("h2",{className:`${n}__collapsed-title-text`,title:c,"aria-hidden":!0,children:c})]}),Be=()=>{var d;const e=f&&f.length&&/l/.test(h)?"md":"sm";let m;return V&&((d=V.type)==null?void 0:d.displayName)==="Slug"&&(m=pe.cloneElement(V,{size:e})),o.jsxs("div",{className:P(`${n}__header`,{[`${n}__header--on-detail-step`]:O>0,[`${n}__header--no-title-animation`]:!k,[`${n}__header--reduced-motion`]:p.matches,[`${n}__header--has-title`]:c}),ref:ke,children:[O>0&&o.jsx(J,{"aria-label":oe,kind:"ghost",size:e,disabled:!1,renderIcon:v=>o.jsx(Xe,{size:20,...v}),iconDescription:oe,className:`${n}__navigation-back-button`,onClick:Se}),c&&c.length&&E&&E.length&&o.jsx("p",{className:`${n}__label-text`,ref:l,children:E}),c&&c.length&&Ie(),o.jsxs("div",{className:`${n}__slug-and-close`,children:[m,o.jsx(Ve,{className:`${n}__close-button`,label:W,onClick:F,title:W,"aria-label":W,ref:$e,align:"left",children:o.jsx(Ke,{size:20,"aria-hidden":"true",tabIndex:"-1",className:`${n}--btn__icon`})})]}),U&&o.jsx("p",{className:P(`${n}__subtitle-text`,{[`${n}__subtitle-text-no-animation-no-action-toolbar`]:!S&&(!s||!s.length)}),ref:b,children:U}),s&&s.length&&o.jsx("div",{className:`${n}__action-toolbar`,children:s.map(({label:v,kind:u,hasIconOnly:I=!1,icon:B,renderIcon:H,tooltipPosition:L,tooltipAlignment:_,leading:Z,disabled:Le,className:ze,onClick:Me,...Fe})=>a.createElement(J,{...Fe,key:v,kind:u||"ghost",size:"sm",renderIcon:H||B,iconDescription:v,...I&&{tooltipPosition:L||"bottom",tooltipAlignment:_||"start"},hasIconOnly:I,disabled:Le,className:P([`${n}__action-toolbar-button`,ze,{[`${n}__action-toolbar-leading-button`]:Z}]),onClick:Me},Z&&v))})]})},He=()=>o.jsx("div",{ref:g,onScroll:ae,className:P(`${n}__inner-content`,`${n}--scrolls`,`${S?"":`${n}__inner-content--no-animated-title`}`),children:be});return o.jsx(fe,{children:i&&o.jsxs(o.Fragment,{children:[o.jsxs(se.div,{...Ze(Q),..._e,id:X,className:Ce,ref:$,role:"complementary","aria-label":c,onAnimationComplete:je,onAnimationStart:De,variants:Ue,initial:"hidden",animate:"visible",exit:"exit",custom:{placement:x,shouldReduceMotion:ce},onKeyDown:T?void 0:Ne,children:[o.jsxs(o.Fragment,{children:[Be(),He()]}),o.jsx(et,{actions:f??[],className:Oe,size:h==="xs"?"sm":h,custom:ce,variants:Re})]}),o.jsx(fe,{children:A&&o.jsx(se.div,{variants:Ye,initial:"hidden",animate:"visible",exit:"exit",ref:ee,className:`${n}__overlay`})})]})})});M=ye.checkComponentEnabled(M,Q);M.propTypes={actionToolbarButtons:t.arrayOf(t.shape({label:t.string,leading:t.bool,icon:t.oneOfType([t.object,t.func]),onClick:t.func,kind:t.oneOf(["ghost","tertiary","secondary","primary"]),tooltipAlignment:t.oneOf(["top","right","bottom","left"]),tooltipPosition:t.oneOf(["start","center","end"])})),actions:Je([ve.validateActions(),t.arrayOf(t.shape({...J.propTypes,kind:t.oneOf(["ghost","danger--ghost","secondary","danger","primary"]),tooltipPosition:t.oneOf(["top","right","bottom","left"]),tooltipAlignment:t.oneOf(["start","center","end"]),label:t.string,loading:t.bool,onClick:J.propTypes.onClick}))]),animateTitle:t.bool,children:t.oneOfType([t.arrayOf(t.node),t.node]).isRequired,className:t.string,closeIconDescription:t.string,condensedActions:t.bool,currentStep:t.number,id:t.string,includeOverlay:t.bool,labelText:t.string,launcherButtonRef:t.any,navigationBackIconDescription:t.string,onNavigationBack:t.func,onRequestClose:t.func,onUnmount:t.func,open:t.bool.isRequired,placement:t.oneOf(["left","right"]),preventCloseOnClickOutside:t.bool,selectorPageContent:t.string.isRequired.if(({slideIn:s})=>s),selectorPrimaryFocus:t.string,size:t.oneOf(["xs","sm","md","lg","xl","2xl"]),slideIn:t.bool,slug:t.node,subtitle:t.node,title:t.string.isRequired.if(({labelText:s})=>s)};M.displayName=Q;M.__docgenInfo={description:"Side panels keep users in-context of a page while performing tasks like navigating, editing, viewing details, or configuring something new.",methods:[],displayName:"SidePanel",props:{actionToolbarButtons:{required:!1,tsType:{name:"Array",elements:[{name:"ButtonProps",elements:[{name:"any"}],raw:"ButtonProps<any>"}],raw:"ButtonProps<any>[]"},description:"Sets the action toolbar buttons",type:{name:"arrayOf",value:{name:"shape",value:{label:{name:"string",required:!1},leading:{name:"bool",required:!1},icon:{name:"union",value:[{name:"object"},{name:"func"}],required:!1},onClick:{name:"func",required:!1},kind:{name:"enum",value:[{value:"'ghost'",computed:!1},{value:"'tertiary'",computed:!1},{value:"'secondary'",computed:!1},{value:"'primary'",computed:!1}],required:!1},tooltipAlignment:{name:"enum",value:[{value:"'top'",computed:!1},{value:"'right'",computed:!1},{value:"'bottom'",computed:!1},{value:"'left'",computed:!1}],required:!1},tooltipPosition:{name:"enum",value:[{value:"'start'",computed:!1},{value:"'center'",computed:!1},{value:"'end'",computed:!1}],required:!1}}}}},actions:{required:!1,tsType:{name:"Array",elements:[{name:"ButtonProps",elements:[{name:"any"}],raw:"ButtonProps<any>"}],raw:"ButtonProps<any>[]"},description:`The primary actions to be shown in the side panel. Each action is
specified as an object that will render expressive Buttons. Any Button
props can be passed in and any other fields in the object will be
passed through to the button element as HTML attributes.

See https://react.carbondesignsystem.com/?path=/docs/components-button--default#component-api`,type:{name:"custom",raw:`allPropTypes([
  /**@ts-ignore*/
  ActionSet.validateActions(),
  PropTypes.arrayOf(
    PropTypes.shape({
      /**@ts-ignore */
      ...Button.propTypes,
      kind: PropTypes.oneOf([
        'ghost',
        'danger--ghost',
        'secondary',
        'danger',
        'primary',
      ]),
      tooltipPosition: PropTypes.oneOf(['top', 'right', 'bottom', 'left']),
      tooltipAlignment: PropTypes.oneOf(['start', 'center', 'end']),
      label: PropTypes.string,
      loading: PropTypes.bool,
      // we duplicate this Button prop to improve the DocGen here
      /**@ts-ignore */
      onClick: Button.propTypes.onClick,
    })
  ),
])`}},animateTitle:{required:!1,tsType:{name:"boolean"},description:"Determines if the title will animate on scroll",defaultValue:{value:"true",computed:!1},type:{name:"bool"}},children:{required:!0,tsType:{name:"ReactNode"},description:"Sets the body content of the side panel",type:{name:"union",value:[{name:"arrayOf",value:{name:"node"}},{name:"node"}]}},className:{required:!1,tsType:{name:"string"},description:"Sets an optional className to be added to the side panel outermost element",type:{name:"string"}},closeIconDescription:{required:!1,tsType:{name:"string"},description:"Sets the close button icon description",defaultValue:{value:"'Close'",computed:!1},type:{name:"string"}},condensedActions:{required:!1,tsType:{name:"boolean"},description:"Determines whether the side panel should render the condensed version (affects action buttons primarily)",type:{name:"bool"}},currentStep:{required:!1,tsType:{name:"number"},description:"Sets the current step of the side panel",defaultValue:{value:"0",computed:!1},type:{name:"number"}},id:{required:!1,tsType:{name:"string"},description:"Unique identifier",defaultValue:{value:"`${pkg.prefix}--side-panel`",computed:!1},type:{name:"string"}},includeOverlay:{required:!1,tsType:{name:"boolean"},description:"Determines whether the side panel should render with an overlay",type:{name:"bool"}},labelText:{required:!1,tsType:{name:"string"},description:"Sets the label text which will display above the title text",type:{name:"string"}},launcherButtonRef:{required:!1,tsType:{name:"RefObject",elements:[{name:"any"}],raw:"RefObject<any>"},description:"Provide a ref to return focus to once the side panel is closed.",type:{name:"any"}},navigationBackIconDescription:{required:!1,tsType:{name:"string"},description:"Sets the icon description for the navigation back icon button",defaultValue:{value:"'Back'",computed:!1},type:{name:"string"}},open:{required:!0,tsType:{name:"boolean"},description:"Determines whether the side panel should render or not",type:{name:"bool"}},placement:{required:!1,tsType:{name:"union",raw:"'left' | 'right'",elements:[{name:"literal",value:"'left'"},{name:"literal",value:"'right'"}]},description:"Determines if the side panel is on the right or left",defaultValue:{value:"'right'",computed:!1},type:{name:"enum",value:[{value:"'left'",computed:!1},{value:"'right'",computed:!1}]}},preventCloseOnClickOutside:{required:!1,tsType:{name:"boolean"},description:"Prevent closing on click outside of the panel",type:{name:"bool"}},selectorPageContent:{required:!0,tsType:{name:"string"},description:"This is the selector to the element that contains all of the page content that will shrink if the panel is a slide in.\nThis prop is required when using the `slideIn` variant of the side panel.",type:{name:"string"}},selectorPrimaryFocus:{required:!1,tsType:{name:"string"},description:`Specify a CSS selector that matches the DOM element that should
be focused when the side panel opens`,type:{name:"string"}},size:{required:!1,tsType:{name:"union",raw:"'xs' | 'sm' | 'md' | 'lg' | 'xl' | '2xl'",elements:[{name:"literal",value:"'xs'"},{name:"literal",value:"'sm'"},{name:"literal",value:"'md'"},{name:"literal",value:"'lg'"},{name:"literal",value:"'xl'"},{name:"literal",value:"'2xl'"}]},description:"Sets the size of the side panel",defaultValue:{value:"'md'",computed:!1},type:{name:"enum",value:[{value:"'xs'",computed:!1},{value:"'sm'",computed:!1},{value:"'md'",computed:!1},{value:"'lg'",computed:!1},{value:"'xl'",computed:!1},{value:"'2xl'",computed:!1}]}},slideIn:{required:!1,tsType:{name:"boolean"},description:"Determines if this panel slides in",type:{name:"bool"}},slug:{required:!1,tsType:{name:"ReactNode"},description:"**Experimental:** Provide a `Slug` component to be rendered inside the `SidePanel` component",type:{name:"node"}},subtitle:{required:!1,tsType:{name:"ReactNode"},description:"Sets the subtitle text",type:{name:"node"}},title:{required:!0,tsType:{name:"string"},description:"Sets the title text",type:{name:"string"}},onNavigationBack:{description:"Changes the current side panel page to the previous page",type:{name:"func"},required:!1},onRequestClose:{description:"Specify a handler for closing the side panel.\nThis handler closes the modal, e.g. changing `open` prop.",type:{name:"func"},required:!1},onUnmount:{description:`Optional function called when the side panel exit animation is complete.
This handler can be used for any state cleanup needed before the panel is removed from the DOM.`,type:{name:"func"},required:!1}}};export{M as S};
