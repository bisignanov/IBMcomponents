import{T as be,p as H,j as l}from"./settings-DEdZ0TrD.js";import{r as t,R as N}from"./index-BwDkhjyp.js";import{P as e}from"./index-Dk74W0Oi.js";import{a as ve,b as Te,c as x,_ as te}from"./floating-ui.core.mjs-LzsX8FoD.js";import{i as we,T as z,S as Se}from"./Tag-D0bJ7i5y.js";import{C as _e,M as Ne,a as xe}from"./ComposedModal-Bz57YeIR.js";import{S as $e}from"./Search-BNsOkhPW.js";import{p as Ce,i as qe}from"./props-helper-Bq60RLbY.js";import{u as je}from"./usePortalTarget-C9qZOTQP.js";import{L as ke}from"./Link-Dcx-j9tl.js";import{T as ae}from"./Text-DzW_iQLr.js";import{P as Ae,a as Ee}from"./index-CtP8jiW9.js";import{u as Me}from"./useClickOutside-Dcd11u7q.js";import{g as Re}from"./devtools-BMJcATO0.js";import{u as le}from"./useResizeObserver-CYrpFlRY.js";const ze={red:"Red",magenta:"Magenta",purple:"Purple",blue:"Blue",cyan:"Cyan",teal:"Teal",green:"Green",gray:"Gray","cool-gray":"Cool-Gray","warm-gray":"Warm-Gray"},oe=s=>{var f;let{className:A,disabled:j,id:$,renderIcon:c,slug:i,size:h,text:y,type:T="gray",...r}=s;const p=ve(),b=t.useRef(),S=$||`tag-${Te()}`,a=x(`${p}--tag--operational`,A),[v,u]=t.useState(!1);t.useLayoutEffect(()=>{var C;const d=(C=b.current)==null?void 0:C.getElementsByClassName(`${p}--tag__label`)[0];u(we(d))},[p,b]);let m;i&&((f=i.type)==null?void 0:f.displayName)==="AILabel"&&(m=N.cloneElement(i,{size:"sm",kind:"inline"}));const n=x(`${p}--icon-tooltip`,`${p}--tag-label-tooltip`);return v?N.createElement(be,{label:y,align:"bottom",className:n,leaveDelayMs:0,onMouseEnter:()=>!1,closeOnActivation:!0},N.createElement(z,te({ref:b,type:T,size:h,renderIcon:c,disabled:j,className:a,id:S},r),N.createElement(ae,{title:y,className:`${p}--tag__label`},y),m)):N.createElement(z,te({ref:b,type:T,size:h,renderIcon:c,disabled:j,className:a,id:S},r),m,N.createElement(ae,{title:y,className:`${p}--tag__label`},y))};oe.propTypes={className:e.string,disabled:e.bool,id:e.string,renderIcon:e.oneOfType([e.func,e.object]),size:e.oneOf(Object.keys(Se)),slug:e.node,text:e.string,type:e.oneOf(Object.keys(ze))};const Oe="TagSetModal",V=`${H.prefix}--tag-set-modal`,Le={searchLabel:""},Y=({allTags:s,className:A,title:j,onClose:$,open:c,portalTarget:i,searchLabel:h=Le.searchLabel,searchPlaceholder:y,...T})=>{const[r,p]=t.useState([]),[b,S]=t.useState(""),a=je(i);t.useEffect(()=>{let u=[];if(c)if(b===""&&s)u=s==null?void 0:s.slice(0);else{const m=b.toLocaleLowerCase();s==null||s.forEach(n=>{var C,I,G,P;const f=(I=(C=n["data-search"])==null?void 0:C.toLocaleLowerCase())==null?void 0:I.indexOf(m),d=(P=(G=n.label)==null?void 0:G.toLocaleLowerCase())==null?void 0:P.indexOf(m);(f>-1||d>-1)&&u.push(n)})}p(u)},[s,c,b]);const v=u=>{S(u.target.value||"")};return a(l.jsxs(_e,{...T,containerClassName:`${V}__container`,className:x(A,`${V}`),size:"sm",open:c,onClose:$,children:[l.jsx(Ne,{className:`${V}__header`,closeModal:$,title:j,children:l.jsx($e,{"data-modal-primary-focus":!0,className:`${V}__search`,labelText:h,placeholder:y,onChange:v,size:"lg"})}),l.jsx(xe,{className:`${V}__body`,hasForm:!0,children:r.map(({label:u,...m},n)=>t.createElement(z,{...m,filter:!1,key:`all-tags-${n}`},u))}),l.jsx("div",{className:`${V}__fade`})]}))};Y.propTypes={allTags:e.arrayOf(e.shape({...Ce(z.propTypes,"filter"),label:e.string.isRequired})),className:e.string,onClose:e.func,open:e.bool,portalTarget:e.node,searchLabel:e.string,searchPlaceholder:e.string,title:e.string};Y.displayName=Oe;const Ve="TagSetOverflow",_=`${H.prefix}--tag-set-overflow`,We={allTagsModalSearchThreshold:10},F=N.forwardRef(({allTagsModalSearchThreshold:s=We.allTagsModalSearchThreshold,className:A,onShowAllClick:j,overflowAlign:$="bottom",overflowAutoAlign:c,overflowTags:i,overflowType:h,showAllTagsLabel:y,popoverOpen:T,setPopoverOpen:r,size:p,...b},S)=>{const a=t.useRef(null),v=t.useRef(null);Me(S||a,()=>{T&&(r==null||r(!1))});const u=n=>{n.stopPropagation(),n.preventDefault(),r==null||r(!1),j()},m=n=>{const{key:f}=n;f==="Escape"&&(r==null||r(!1))};return l.jsx("span",{...b,"aria-hidden":i.length===0,className:x(`${_}`,{[`${_}--hidden`]:i.length===0}),ref:S||a,children:l.jsxs(Ae,{align:$,className:x(A,`${_}__tagset-popover`),dropShadow:!0,highContrast:!0,onKeyDown:m,open:T,autoAlign:c,children:[l.jsx(oe,{onClick:()=>r==null?void 0:r(!T),className:x(`${_}__popover-trigger`),size:p,text:`+${i.length}`}),l.jsx(Ee,{children:l.jsxs("div",{ref:v,className:`${_}__content`,children:[l.jsx("ul",{className:`${_}__tag-list`,children:i.filter((n,f)=>i.length>s?f<s:f<=s).map((n,f)=>{const d={};if(h==="tag"&&(d.type="high-contrast"),h==="default"&&(d.filter=!1),N.isValidElement(n))return l.jsx("li",{className:x(`${_}__tag-item`,{[`${_}__tag-item--default`]:h==="default",[`${_}__tag-item--tag`]:h==="tag"}),children:N.cloneElement(n,d)},f)})}),i.length>s&&l.jsx(ke,{className:`${_}__show-all-tags-link`,href:"",onClick:u,role:"button",children:y})]})})]})})});F.displayName=Ve;F.propTypes={allTagsModalSearchThreshold:e.number,className:e.string,onShowAllClick:e.func.isRequired,overflowAlign:e.oneOf(["top","top-left","top-right","bottom","bottom-left","bottom-right","left","left-bottom","left-top","right","right-bottom","right-top"]),overflowAutoAlign:e.bool,overflowTags:e.arrayOf(e.object).isRequired,overflowType:e.oneOf(["default","tag"]),popoverOpen:e.bool,setPopoverOpen:e.func,showAllTagsLabel:e.string,size:e.string};F.__docgenInfo={description:"",methods:[],displayName:"TagSetOverflow",props:{allTagsModalSearchThreshold:{required:!1,tsType:{name:"number"},description:"count of overflowTags over which a modal is offered",defaultValue:{value:"10",computed:!1},type:{name:"number"}},className:{required:!1,tsType:{name:"string"},description:"className",type:{name:"string"}},onShowAllClick:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"function to execute on clicking show all",type:{name:"func"}},overflowAlign:{required:!1,tsType:{name:"union",raw:`| 'top'
| 'top-left'
| 'top-right'
| 'bottom'
| 'bottom-left'
| 'bottom-right'
| 'left'
| 'left-bottom'
| 'left-top'
| 'right'
| 'right-bottom'
| 'right-top'`,elements:[{name:"literal",value:"'top'"},{name:"literal",value:"'top-left'"},{name:"literal",value:"'top-right'"},{name:"literal",value:"'bottom'"},{name:"literal",value:"'bottom-left'"},{name:"literal",value:"'bottom-right'"},{name:"literal",value:"'left'"},{name:"literal",value:"'left-bottom'"},{name:"literal",value:"'left-top'"},{name:"literal",value:"'right'"},{name:"literal",value:"'right-bottom'"},{name:"literal",value:"'right-top'"}]},description:"overflowAlign from the standard tooltip",defaultValue:{value:"'bottom'",computed:!1},type:{name:"enum",value:[{value:"'top'",computed:!1},{value:"'top-left'",computed:!1},{value:"'top-right'",computed:!1},{value:"'bottom'",computed:!1},{value:"'bottom-left'",computed:!1},{value:"'bottom-right'",computed:!1},{value:"'left'",computed:!1},{value:"'left-bottom'",computed:!1},{value:"'left-top'",computed:!1},{value:"'right'",computed:!1},{value:"'right-bottom'",computed:!1},{value:"'right-top'",computed:!1}]}},overflowTags:{required:!0,tsType:{name:"Array",elements:[{name:"ReactNode"}],raw:"ReactNode[]"},description:`@type {Array<any>}
tags shown in overflow`,type:{name:"arrayOf",value:{name:"object"}}},overflowType:{required:!1,tsType:{name:"union",raw:"'default' | 'tag'",elements:[{name:"literal",value:"'default'"},{name:"literal",value:"'tag'"}]},description:"Type of rendering displayed inside of the tag overflow component",type:{name:"enum",value:[{value:"'default'",computed:!1},{value:"'tag'",computed:!1}]}},overflowAutoAlign:{required:!1,tsType:{name:"boolean"},description:"Will auto-align the popover on first render if it is not visible. This prop is currently experimental and is subject to future changes.",type:{name:"bool"}},popoverOpen:{required:!1,tsType:{name:"boolean"},description:"Open state of the popover",type:{name:"bool"}},setPopoverOpen:{required:!1,tsType:{name:"union",raw:"((value: boolean) => void) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:"Setter function for the popoverOpen state value",type:{name:"func"}},showAllTagsLabel:{required:!1,tsType:{name:"string"},description:"label for the overflow show all tags link",type:{name:"string"}},size:{required:!1,tsType:{name:"string"},description:"Size of the overflow tag",type:{name:"string"}}}};const U="TagSet",q=`${H.prefix}--tag-set`,re=10,se={align:"start",measurementOffset:0,overflowAlign:"bottom",overflowType:"default",onOverflowTagChange:()=>{}};let W=N.forwardRef(({align:s="start",allTagsModalTarget:A,className:j,maxVisible:$,multiline:c,overflowAutoAlign:i,overflowAlign:h="bottom",overflowClassName:y,overflowType:T="default",allTagsModalTitle:r="All tags",allTagsModalSearchLabel:p="Search all tags",allTagsModalSearchPlaceholderText:b="Search all tags",showAllTagsLabel:S="View all tags",tags:a,containingElementRef:v,measurementOffset:u=se.measurementOffset,onOverflowTagChange:m=se.onOverflowTagChange,...n},f)=>{const[d,C]=t.useState(3),[I,G]=t.useState([]),[P,ie]=t.useState([]),[ue,Z]=t.useState(!1),me=t.useRef(null),O=f||me,J=t.useRef(null),ce=t.useRef(null),[E,pe]=t.useState([]),K=t.useRef(null),[D,fe]=t.useState(0),[Q,X]=t.useState(!1),de=()=>{Z(!0)};t.useEffect(()=>{const o=$||(a==null?void 0:a.length)||0;fe(o)},[$,a]),t.useEffect(()=>{const o=[];ie(a&&a.length>0?a.map(({label:g,id:M,...R},w)=>l.jsx("div",{className:`${q}__sizing-tag`,ref:k=>{k!=null&&(o[w]=k)},children:l.jsx(z,{...R,"data-original-id":M,children:g})},w)):[]),pe(o)},[a]);const ee=t.useCallback((o,g)=>{o==null||o(),g<=d-1&&X(!1)},[d]);t.useEffect(()=>{let o="md",g=a&&a.length>0?a.map(({label:R,onClose:w,...k},L)=>(L==a.length-1&&k.size&&(o=k.size),t.createElement(z,{...k,key:`displayed-tag-${L}`,onClose:()=>ee(w,L)},R))):[];const M=g.splice(d,g.length-d);g=g.map((R,w)=>l.jsx("div",{className:`${q}__displayed-tag`,children:R},w)),g.push(l.jsx(F,{allTagsModalSearchThreshold:re,overflowAutoAlign:i,className:y,onShowAllClick:de,overflowTags:M,overflowAlign:h,overflowType:T,showAllTagsLabel:S,size:o,ref:K,popoverOpen:Q,setPopoverOpen:X},"displayed-tag-overflow")),m==null||m(M),G(g)},[d,h,y,T,S,a,m,Q,ee,i]);const B=t.useCallback(()=>{var g;if(c)return C(D);let o=0;if(E.length>0){const M=v==null?void 0:v.current,R=typeof u=="number"?u:0;let w=M?M.offsetWidth-R:O==null?void 0:O.current.offsetWidth;for(const k in E){const L=((g=E[k])==null?void 0:g.offsetWidth)||0;if(w>=L)w-=L,o+=1;else break}if(o<E.length&&K.current)for(;o>0&&w<K.current.offsetWidth;)o-=1,w+=E[o].offsetWidth}o<1?C(0):C(D?Math.min(o,D):o)},[D,c,E,O,u,v]);t.useEffect(()=>{B()},[B,D,c,E]);const ge=()=>{B()},he=()=>{B()},ye=()=>{Z(!1)};return le(J,he),le(v||O,ge),l.jsxs("div",{...n,className:x([q,j]),ref:O,...Re(U),children:[l.jsxs("div",{className:x([`${q}__space`,`${q}__space--align-${s}`]),children:[l.jsx("div",{className:`${q}__tag-container ${q}__tag-container--hidden`,"aria-hidden":!0,ref:J,children:P}),l.jsx("div",{className:x([`${q}__tag-container`,c&&`${q}__tag-container--multiline`]),ref:ce,children:I})]}),l.jsx(Y,{allTags:a,open:ue,title:r,onClose:ye,searchLabel:p,searchPlaceholder:b,portalTarget:A})]})});W=H.checkComponentEnabled(W,U);const lt=qe(e.string,({tags:s})=>s&&s.length>re),De={red:"Red",magenta:"Magenta",purple:"Purple",blue:"Blue",cyan:"Cyan",teal:"Teal",green:"Green",gray:"Gray","cool-gray":"Cool-Gray","warm-gray":"Warm-Gray","high-contrast":"High-Contrast",outline:"Outline"},ne=Object.keys(De);W.types=ne;W.propTypes={align:e.oneOf(["start","center","end"]),allTagsModalSearchLabel:e.string,allTagsModalSearchPlaceholderText:e.string,allTagsModalTarget:e.node,allTagsModalTitle:e.string,className:e.string,containingElementRef:e.object,maxVisible:e.number,measurementOffset:e.number,multiline:e.bool,onOverflowTagChange:e.func,overflowAlign:e.oneOf(["top","top-left","top-right","bottom","bottom-left","bottom-right","left","left-bottom","left-top","right","right-bottom","right-top"]),overflowAutoAlign:e.bool,overflowClassName:e.string,overflowType:e.oneOf(["default","tag"]),showAllTagsLabel:e.string,tags:e.arrayOf(e.shape({...z.propTypes,label:e.string.isRequired,type:e.oneOf(ne)}))};W.displayName=U;W.__docgenInfo={description:"",methods:[],displayName:"TagSet",props:{align:{required:!1,tsType:{name:"union",raw:"'start' | 'center' | 'end'",elements:[{name:"literal",value:"'start'"},{name:"literal",value:"'center'"},{name:"literal",value:"'end'"}]},description:"align the Tags displayed by the TagSet. Default start.",defaultValue:{value:"'start'",computed:!1},type:{name:"enum",value:[{value:"'start'",computed:!1},{value:"'center'",computed:!1},{value:"'end'",computed:!1}]}},allTagsModalSearchLabel:{required:!1,tsType:{name:"string"},description:"label text for the show all search.",defaultValue:{value:"'Search all tags'",computed:!1},type:{name:"string"}},allTagsModalSearchPlaceholderText:{required:!1,tsType:{name:"string"},description:"placeholder text for the show all search.",defaultValue:{value:"'Search all tags'",computed:!1},type:{name:"string"}},allTagsModalTarget:{required:!1,tsType:{name:"ReactNode"},description:"portal target for the all tags modal",type:{name:"node"}},allTagsModalTitle:{required:!1,tsType:{name:"string"},description:"title for the show all modal.",defaultValue:{value:"'All tags'",computed:!1},type:{name:"string"}},className:{required:!1,tsType:{name:"string"},description:"className",type:{name:"string"}},containingElementRef:{required:!1,tsType:{name:"ReactRefObject",raw:"React.RefObject<HTMLElement>",elements:[{name:"HTMLElement"}]},description:`Optional ref for custom resize container to measure available space
Default will measure the available space of the TagSet container itself.`,type:{name:"object"}},maxVisible:{required:!1,tsType:{name:"number"},description:"maximum visible tags",type:{name:"number"}},measurementOffset:{required:!1,tsType:{name:"number"},description:"Specify offset amount for measure available space, only used when `containingElementSelector`\nis also provided",defaultValue:{value:"0",computed:!1},type:{name:"number"}},multiline:{required:!1,tsType:{name:"boolean"},description:"display tags in multiple lines",type:{name:"bool"}},onOverflowTagChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: ReactNode) => void",signature:{arguments:[{type:{name:"ReactNode"},name:"value"}],return:{name:"void"}}},description:"Handler to get overflow tags",defaultValue:{value:"() => {}",computed:!1},type:{name:"func"}},overflowAlign:{required:!1,tsType:{name:"union",raw:`| 'top'
| 'top-left'
| 'top-right'
| 'bottom'
| 'bottom-left'
| 'bottom-right'
| 'left'
| 'left-bottom'
| 'left-top'
| 'right'
| 'right-bottom'
| 'right-top'`,elements:[{name:"literal",value:"'top'"},{name:"literal",value:"'top-left'"},{name:"literal",value:"'top-right'"},{name:"literal",value:"'bottom'"},{name:"literal",value:"'bottom-left'"},{name:"literal",value:"'bottom-right'"},{name:"literal",value:"'left'"},{name:"literal",value:"'left-bottom'"},{name:"literal",value:"'left-top'"},{name:"literal",value:"'right'"},{name:"literal",value:"'right-bottom'"},{name:"literal",value:"'right-top'"}]},description:"overflowAlign from the standard tooltip. Default center.",defaultValue:{value:"'bottom'",computed:!1},type:{name:"enum",value:[{value:"'top'",computed:!1},{value:"'top-left'",computed:!1},{value:"'top-right'",computed:!1},{value:"'bottom'",computed:!1},{value:"'bottom-left'",computed:!1},{value:"'bottom-right'",computed:!1},{value:"'left'",computed:!1},{value:"'left-bottom'",computed:!1},{value:"'left-top'",computed:!1},{value:"'right'",computed:!1},{value:"'right-bottom'",computed:!1},{value:"'right-top'",computed:!1}]}},overflowAutoAlign:{required:!1,tsType:{name:"boolean"},description:"Will auto-align the popover on first render if it is not visible. This prop is currently experimental and is subject to future changes.",type:{name:"bool"}},overflowClassName:{required:!1,tsType:{name:"string"},description:"overflowClassName for the tooltip popup",type:{name:"string"}},overflowType:{required:!1,tsType:{name:"union",raw:"'default' | 'tag'",elements:[{name:"literal",value:"'default'"},{name:"literal",value:"'tag'"}]},description:"Type of rendering displayed inside of the tag overflow component",defaultValue:{value:"'default'",computed:!1},type:{name:"enum",value:[{value:"'default'",computed:!1},{value:"'tag'",computed:!1}]}},showAllTagsLabel:{required:!1,tsType:{name:"string"},description:"label for the overflow show all tags link.",defaultValue:{value:"'View all tags'",computed:!1},type:{name:"string"}},tags:{required:!1,tsType:{name:"Array",elements:[{name:"intersection",raw:`{
  label: string;
  type?: keyof typeof tagTypes;
} & TagBaseProps`,elements:[{name:"signature",type:"object",raw:`{
  label: string;
  type?: keyof typeof tagTypes;
}`,signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"type",value:{name:"unknown",required:!1}}]}},{name:"TagBaseProps"}]}],raw:"TagType[]"},description:`The tags to be shown in the TagSet. Each tag is specified as an object
with properties: **label**\\* (required) to supply the tag content, and
other properties will be passed to the Carbon Tag component, such as
**type**, **disabled**, **ref**, **className** , and any other Tag props.

See https://react.carbondesignsystem.com/?path=/docs/components-tag--default`,type:{name:"arrayOf",value:{name:"shape",value:{label:{name:"string",required:!0},type:{name:"enum",value:[{value:'"red"',computed:!1},{value:'"magenta"',computed:!1},{value:'"purple"',computed:!1},{value:'"blue"',computed:!1},{value:'"cyan"',computed:!1},{value:'"teal"',computed:!1},{value:'"green"',computed:!1},{value:'"gray"',computed:!1},{value:'"cool-gray"',computed:!1},{value:'"warm-gray"',computed:!1},{value:'"high-contrast"',computed:!1},{value:'"outline"',computed:!1}],required:!1}}}}}},composes:["PropsWithChildren"]};export{W as T,lt as s};
