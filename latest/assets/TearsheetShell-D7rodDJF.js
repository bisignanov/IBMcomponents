import{j as a,p as he,B as K,a as ue}from"./settings-DDDiKwEV.js";import{R as M,r as p}from"./index-BwDkhjyp.js";import{u as me}from"./useResizeObserver-CYrpFlRY.js";import{P as t}from"./index-Dk74W0Oi.js";import{a as fe,c as b}from"./floating-ui.react-BgNs4SA8.js";import{g as ye}from"./getNodeTextContent-C8IeKkUQ.js";import{C as ge,M as we}from"./ComposedModal-BB3t0zem.js";import{L as be}from"./index-Bd0eoXr0.js";import{u as ve}from"./usePortalTarget-BD2WdNlr.js";import{u as Te,g as G}from"./useFocus-mCy_1587.js";import{u as _e}from"./usePreviousValue-DDnp_zt4.js";import{A as Ne}from"./ActionSet-7kyZHLkU.js";const J=n=>{let c=!0;return M.Children.forEach(n,d=>{var v,T;d&&c&&(c=((v=d==null?void 0:d.type)==null?void 0:v.displayName)==="Wrap"&&J((T=d==null?void 0:d.props)==null?void 0:T.children))}),c},s=M.forwardRef(({alwaysRender:n,children:c,element:d="div",neverRender:v,className:T,...x},j)=>(v||J(c))&&!n?null:a.jsx(d,{className:T,...x,ref:j,children:c}));s.displayName="Wrap";s.propTypes={alwaysRender:t.bool,children:t.node,className:t.string,element:t.elementType,neverRender:t.bool};s.__docgenInfo={description:`A simple conditional wrapper that encloses its children in a <div> (or other
element if specified), passing any supplied attributes to the <div> (or other
element). The component renders nothing at all if there are no children or
the children are empty/falsy, or if all the non-falsy children are themselves
Wrap components that do not wish to render. This behavior can be overridden
by setting neverRender or alwaysRender to true. Note that if a ref is passed,
the ref.current will be set to the wrapper element if it renders, and will
remain undefined if it does not render.`,methods:[],displayName:"Wrap",props:{alwaysRender:{required:!1,tsType:{name:"union",raw:"boolean | null",elements:[{name:"boolean"},{name:"null"}]},description:`Specify whether the wrapper element should render even if there are no
children or the children are themselves empty wrappers. Useful if there
are some conditions in which the wrapper element is still required. Note
that this prop takes precedence over neverRender if both are set to true.`,type:{name:"bool"}},element:{required:!1,tsType:{name:"union",raw:"(() => ReactNode) | string | ElementType",elements:[{name:"unknown"},{name:"string"},{name:"ElementType"}]},description:"The element name or component to use as a wrapper for the content.",defaultValue:{value:"'div'",computed:!1},type:{name:"elementType"}},neverRender:{required:!1,tsType:{name:"boolean"},description:`Specify whether nothing should be rendered even if there are children
in the content. Useful if there are some circumstances in which the
component should not render at all. Note that if alwaysRender is also
set to true then it will take precedence and the wrapper element and
content will be rendered.`,type:{name:"bool"}},className:{required:!1,tsType:{name:"string"},description:"",type:{name:"string"}},children:{description:`The content of the wrapper element. If no children are supplied, or the
resulting value(s) are falsy, or if all the non-falsy children are Wrap
components that decide not to render, nothing will be rendered in the DOM.`,type:{name:"node"},required:!1}},composes:["PropsWithChildren"]};const e=`${he.prefix}--tearsheet`,xe="TearsheetShell",$e=3,r={open:[],all:[],sizes:[]},De=["headerActions","influencer","influencerPosition","influencerWidth","navigation"],Q=n=>!n||!(n!=null&&n.length),X=(n,c)=>c??Q(n),z=M.forwardRef(({actions:n,ariaLabel:c,children:d,className:v,closeIconDescription:T,description:x,hasCloseIcon:j,headerActions:B,influencer:C,influencerPosition:O,influencerWidth:I,label:D,navigation:P,onClose:W,open:i,portalTarget:Y,selectorPrimaryFocus:f,selectorsFloatingMenus:Z=[],size:$,slug:F,title:A,verticalPosition:ee,launcherButtonRef:E,...te},ne)=>{const q=fe(),H=`${q}--modal-header`,ae=ve(Y),oe=p.useRef(),V=p.useRef(null),se=p.useRef(null),u=ne||oe,{width:R}=me(V),L=_e(i),{firstElement:h,keyDownListener:re,specifiedElement:g}=Te(u,f),U=u.current,N=$==="wide",[m,ie]=p.useState(0),[_,le]=p.useState(0),S=p.useRef();p.useEffect(()=>{S.current=m});const ce=Q(n),k=X(n,j);function w(l,o){ie(l),le(o)}w.checkFocus=function(){i&&_===m&&U&&!U.contains(document.activeElement)&&w.claimFocus()},w.claimFocus=function(){var l;if(f&&G(u==null?void 0:u.current,f)){const o=G(u==null?void 0:u.current,f);if(o&&((l=window==null?void 0:window.getComputedStyle(o))==null?void 0:l.display)!=="none")return o.focus()}setTimeout(()=>h==null?void 0:h.focus(),0)},p.useEffect(()=>{i&&setTimeout(()=>{if(f)return g==null?void 0:g.focus();h==null||h.focus()},0)},[i]),p.useEffect(()=>{L&&!i&&E&&setTimeout(()=>{E.current.focus()},0)},[E,i,L]),p.useEffect(()=>{i&&_!==m&&setTimeout(()=>{if(f)return g==null?void 0:g.focus();h==null||h.focus()},0)},[_,m,h,i,g,f]),p.useEffect(()=>{const l=()=>r.all.forEach(o=>{var y;o(Math.min(r.open.length,$e),r.open.indexOf(o)+1),(y=o.checkFocus)==null||y.call(o)});return r.all.push(w),r.sizes.push($),i&&(r.open.push(w),l()),function(){r.all.splice(r.all.indexOf(w),1),r.sizes.splice(r.sizes.indexOf($),1);const y=r.open.indexOf(w);y>=0&&(r.open.splice(y,1),l())}},[i,$]);function de(){var l,o;_<m&&((o=(l=r.open[r.open.length-1]).claimFocus)==null||o.call(l))}if(_<=m){const l=D||A||x||B||P||k,o=n&&(n==null?void 0:n.length)>0,y=()=>new Set(r.sizes).size===1,pe=()=>y()?{[`--${e}--stacking-scale-factor-single`]:(R-32)/R,[`--${e}--stacking-scale-factor-double`]:(R-64)/R}:{[`--${e}--stacking-scale-factor-single`]:1,[`--${e}--stacking-scale-factor-double`]:1};return ae(a.jsxs(ge,{...te,"aria-label":c||ye(A),className:b(e,v,{[`${e}--stacked-${_}-of-${m}`]:m>1||m===1&&((S==null?void 0:S.current)??0)>1,[`${e}--wide`]:N,[`${e}--narrow`]:!N,[`${e}--has-slug`]:F,[`${e}--has-close`]:k}),slug:F,style:pe(),containerClassName:b(`${e}__container`,{[`${e}__container--lower`]:ee==="lower",[`${e}__container--mixed-size-stacking`]:!y()}),onClose:W,open:i,selectorPrimaryFocus:f,onFocus:de,onKeyDown:re,preventCloseOnClickOutside:!ce,ref:u,selectorsFloatingMenus:[`.${q}--overflow-menu-options`,`.${q}--tooltip`,".flatpickr-calendar",`.${e}__container`,...Z],size:"sm",children:[l&&a.jsxs(we,{className:b(`${e}__header`,{[`${e}__header--with-close-icon`]:k,[`${e}__header--with-nav`]:P}),closeClassName:b({[`${e}__header--no-close-icon`]:!k}),closeModal:W,iconDescription:T,children:[a.jsxs(s,{className:`${e}__header-content`,element:N?be:void 0,children:[a.jsxs(s,{className:`${e}__header-fields`,children:[a.jsx(s,{element:"h2",className:`${H}__label`,children:D}),a.jsx(s,{element:"h3",className:b(`${H}__heading`,`${e}__heading`),children:A}),a.jsx(s,{className:`${e}__header-description`,children:x})]}),a.jsx(s,{className:`${e}__header-actions`,children:B})]}),a.jsx(s,{className:`${e}__header-navigation`,children:P})]}),a.jsxs(s,{ref:se,className:`${q}--modal-content ${e}__body`,children:[a.jsx(s,{className:b({[`${e}__influencer`]:!0,[`${e}__influencer--wide`]:I==="wide"}),neverRender:O==="right",children:C}),a.jsxs(s,{className:`${e}__right`,children:[a.jsxs(s,{className:`${e}__main`,alwaysRender:o,children:[a.jsx(s,{className:`${e}__content`,alwaysRender:!!(C&&O==="right"),children:d}),a.jsx(s,{className:b({[`${e}__influencer`]:!0,[`${e}__influencer--wide`]:I==="wide"}),neverRender:O!=="right",children:C})]}),o&&a.jsx(s,{className:`${e}__button-container`,children:a.jsx(Ne,{actions:n,buttonSize:N?"2xl":void 0,className:`${e}__buttons`,size:N?"2xl":"lg","aria-hidden":!i})})]})]}),a.jsx("div",{className:`${e}__resize-detector`,ref:V})]}))}else return ue.warn("Tearsheet not rendered: maximum stacking depth exceeded."),null});z.displayName=xe;const qe=typeof Element>"u"?t.object:t.instanceOf(Element),Re={verticalPosition:t.oneOf(["normal","lower"])};z.propTypes={actions:t.arrayOf(t.shape({...K.propTypes,kind:t.oneOf(["ghost","danger--ghost","secondary","danger","primary"]),label:t.string,loading:t.bool,onClick:K.propTypes.onClick})),children:t.node,className:t.string,closeIconDescription:t.string.isRequired.if(({actions:n,hasCloseIcon:c})=>X(n,c)),description:t.node,hasCloseIcon:t.bool,headerActions:t.element,influencer:t.element,influencerPosition:t.oneOf(["left","right"]),influencerWidth:t.oneOf(["narrow","wide"]),label:t.node,launcherButtonRef:t.any,navigation:t.element,onClose:t.func,open:t.bool,portalTarget:qe,selectorPrimaryFocus:t.string,selectorsFloatingMenus:t.arrayOf(t.string),size:t.oneOf(["narrow","wide"]).isRequired,slug:t.node,title:t.node,...Re};z.__docgenInfo={description:`TearSheetShell is used internally by TearSheet and TearSheetNarrow

The component is not public.

See the canvas tab for the component API details.`,methods:[],displayName:"TearsheetShell",props:{actions:{required:!1,tsType:{name:"Array",elements:[{name:"ButtonProps",elements:[{name:"any"}],raw:"ButtonProps<any>"}],raw:"ButtonProps<any>[]"},description:`The actions to be shown as buttons in the action area at the bottom of the
tearsheet. Each action is specified as an object with optional fields
'label' to supply the button label, 'kind' to select the button kind (must
be 'primary', 'secondary' or 'ghost'), 'loading' to display a loading
indicator, and 'onClick' to receive notifications when the button is
clicked. Additional fields in the object will be passed to the Button
component, and these can include 'disabled', 'ref', 'className', and any
other Button props. Any other fields in the object will be passed through
to the button element as HTML attributes.

See https://react.carbondesignsystem.com/?path=/docs/components-button--default#component-api`,type:{name:"arrayOf",value:{name:"shape",value:{kind:{name:"enum",value:[{value:"'ghost'",computed:!1},{value:"'danger--ghost'",computed:!1},{value:"'secondary'",computed:!1},{value:"'danger'",computed:!1},{value:"'primary'",computed:!1}],required:!1},label:{name:"string",required:!1},loading:{name:"bool",required:!1},onClick:{name:"custom",raw:"Button.propTypes.onClick",required:!1}}}}},ariaLabel:{required:!1,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:"An optional class or classes to be added to the outermost element.",type:{name:"string"}},description:{required:!1,tsType:{name:"ReactNode"},description:"A description of the flow, displayed in the header area of the tearsheet.",type:{name:"node"}},hasCloseIcon:{required:!1,tsType:{name:"boolean"},description:`Enable a close icon ('x') in the header area of the tearsheet. By default,
(when this prop is omitted, or undefined or null) a tearsheet does not
display a close icon if there are navigation actions ("transactional
tearsheet") and displays one if there are no navigation actions ("passive
tearsheet"), and that behavior can be overridden if required by setting
this prop to either true or false.`,type:{name:"bool"}},headerActions:{required:!1,tsType:{name:"ReactNode"},description:`The content for the header actions area, displayed alongside the title in
the header area of the tearsheet. This is typically a drop-down, or a set
of small buttons, or similar. NB the headerActions is only applicable for
wide tearsheets.`,type:{name:"element"}},influencer:{required:!1,tsType:{name:"ReactNode"},description:`The content for the influencer section of the tearsheet, displayed
alongside the main content. This is typically a menu, or filter, or
progress indicator, or similar. NB the influencer is only applicable for
wide tearsheets.`,type:{name:"element"}},influencerPosition:{required:!1,tsType:{name:"union",raw:"'left' | 'right'",elements:[{name:"literal",value:"'left'"},{name:"literal",value:"'right'"}]},description:"The position of the influencer section, 'left' or 'right'.",type:{name:"enum",value:[{value:"'left'",computed:!1},{value:"'right'",computed:!1}]}},influencerWidth:{required:!1,tsType:{name:"union",raw:"'narrow' | 'wide'",elements:[{name:"literal",value:"'narrow'"},{name:"literal",value:"'wide'"}]},description:`The width of the influencer: 'narrow' (the default) is 256px, and 'wide'
is 320px.`,type:{name:"enum",value:[{value:"'narrow'",computed:!1},{value:"'wide'",computed:!1}]}},label:{required:!1,tsType:{name:"ReactNode"},description:`A label for the tearsheet, displayed in the header area of the tearsheet
to maintain context for the tearsheet (e.g. as the title changes from page
to page of a multi-page task).`,type:{name:"node"}},launcherButtonRef:{required:!1,tsType:{name:"RefObject",elements:[{name:"any"}],raw:"RefObject<any>"},description:"Provide a ref to return focus to once the tearsheet is closed.",type:{name:"any"}},navigation:{required:!1,tsType:{name:"ReactNode"},description:`Navigation content, such as a set of tabs, to be displayed at the bottom
of the header area of the tearsheet. NB the navigation is only applicable
for wide tearsheets.`,type:{name:"element"}},onClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"An optional handler that is called when the user closes the tearsheet (by\nclicking the close button, if enabled, or clicking outside, if enabled).\nReturning `false` here prevents the modal from closing.",type:{name:"func"}},open:{required:!1,tsType:{name:"boolean"},description:"Specifies whether the tearsheet is currently open.",type:{name:"bool"}},portalTarget:{required:!1,tsType:{name:"ReactNode"},description:"The DOM element that the tearsheet should be rendered within. Defaults to document.body.",type:{name:"custom",raw:`typeof Element === 'undefined'
? PropTypes.object
: // eslint-disable-next-line ssr-friendly/no-dom-globals-in-module-scope
  PropTypes.instanceOf(Element)`}},selectorPrimaryFocus:{required:!1,tsType:{name:"string"},description:`Specify a CSS selector that matches the DOM element that should be
focused when the Modal opens.`,type:{name:"string"}},selectorsFloatingMenus:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:`Specify the CSS selectors that match the floating menus.

See https://react.carbondesignsystem.com/?path=/docs/components-composedmodal--overview#focus-management`,defaultValue:{value:"[]",computed:!1},type:{name:"arrayOf",value:{name:"string"}}},size:{required:!0,tsType:{name:"union",raw:"'narrow' | 'wide'",elements:[{name:"literal",value:"'narrow'"},{name:"literal",value:"'wide'"}]},description:"Specifies the width of the tearsheet, 'narrow' or 'wide'.",type:{name:"enum",value:[{value:"'narrow'",computed:!1},{value:"'wide'",computed:!1}]}},slug:{required:!1,tsType:{name:"ReactNode"},description:"**Experimental:** Provide a `Slug` component to be rendered inside the `Tearsheet` component",type:{name:"node"}},title:{required:!1,tsType:{name:"ReactNode"},description:"The main title of the tearsheet, displayed in the header area.",type:{name:"node"}},verticalPosition:{required:!1,tsType:{name:"union",raw:"'normal' | 'lower'",elements:[{name:"literal",value:"'normal'"},{name:"literal",value:"'lower'"}]},description:`**Deprecated**

The position of the top of tearsheet in the viewport. The 'normal'
position is a short distance down from the top of the
viewport, leaving room at the top for a global header bar to show through
from below. The 'lower' position (the default) provides a little extra room at the top
to allow an action bar navigation or breadcrumbs to also show through.`,type:{name:"enum",value:[{value:"'normal'",computed:!1},{value:"'lower'",computed:!1}]}},children:{description:"The main content of the tearsheet.",type:{name:"node"},required:!1},closeIconDescription:{description:`The accessibility title for the close icon (if shown).

**Note:** This prop is only required if a close icon is shown, i.e. if
there are a no navigation actions and/or hasCloseIcon is true.`,type:{name:"string"},required:!0}},composes:["PropsWithChildren"]};export{z as T,De as a,qe as p,X as t};
