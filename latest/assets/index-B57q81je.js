import{u as S,b as te,c as N,_,a as G,A as ne,i as se,S as ae,e as oe}from"./useMergedRefs-DoviDd4t.js";import{P as e}from"./index-Dk74W0Oi.js";import{r as t,R as n}from"./index-BwDkhjyp.js";import{u as Q}from"./useControllableState-DwpxGhsf.js";import{M as P,u as re,a as W,b as le}from"./useAttachedMenu-Cur6rMAi.js";import{T as ie}from"./Text-BVB9JT_I.js";import{f as ce,g as ue,C as X,e as me}from"./events-CiqBCP_Q.js";import{B as de}from"./settings-Bk-Ww79A.js";import{c as fe,s as pe,d as ge,f as he}from"./index-8ToAQMOn.js";import{m as be}from"./mergeRefs-CTUecegF.js";var H,J;const ye=150,Ie=300,j=t.forwardRef(function(b,y){let{children:d,className:I,disabled:f,kind:c="default",label:p,onClick:u,renderIcon:l,shortcut:g,...m}=b;const a=S(),o=t.useContext(P),r=t.useRef(null),E=te([y,r]),[C,i]=t.useState({x:-1,y:-1}),[R,M]=t.useState(!1),h=!!d,[x,B]=t.useState(!1),T=t.useRef(null),w=t.useRef(null),$=f&&!h,q=c==="danger"&&!h;function z(){o.dispatch({type:"registerItem",payload:{ref:r,disabled:!!f}})}function D(){if(!r.current)return;const{x:s,y:A,width:V,height:U}=r.current.getBoundingClientRect();i(R?{x:[-s,s-V],y:[A,A+U]}:{x:[s,s+V],y:[A,A+U]}),B(!0)}function k(){B(!1),i({x:-1,y:-1})}function O(s){$||(h?D():(o.state.requestCloseRoot(s),u&&u(s)))}function K(){w.current&&(clearTimeout(w.current),w.current=null),T.current=setTimeout(()=>{D()},ye)}function Y(){T.current&&(clearTimeout(T.current),w.current=setTimeout(()=>{var s;k(),(s=r.current)==null||s.focus()},Ie))}function Z(s){h&&G(s,ne)&&(D(),s.stopPropagation()),(G(s,se)||G(s,ae))&&O(s),m.onKeyDown&&m.onKeyDown(s)}const ee=N(I,`${a}--menu-item`,{[`${a}--menu-item--disabled`]:$,[`${a}--menu-item--danger`]:q});t.useEffect(()=>{z()},[]);const{direction:F}=re();t.useEffect(()=>{(document==null?void 0:document.dir)==="rtl"||F==="rtl"?M(!0):M(!1)},[F]);const L=o.state.mode==="basic"||m.role==="menuitemcheckbox"||m.role==="menuitemradio";return t.useEffect(()=>{L&&l&&!o.state.hasIcons&&o.dispatch({type:"enableIcons"})},[L,l,o.state.hasIcons,o]),n.createElement("li",_({role:"menuitem"},m,{ref:E,className:ee,tabIndex:-1,"aria-disabled":$??void 0,"aria-haspopup":h??void 0,"aria-expanded":h?x:void 0,onClick:O,onMouseEnter:h?K:void 0,onMouseLeave:h?Y:void 0,onKeyDown:Z}),n.createElement("div",{className:`${a}--menu-item__icon`},L&&l&&n.createElement(l,null)),n.createElement(ie,{as:"div",className:`${a}--menu-item__label`,title:p},p),g&&!h&&n.createElement("div",{className:`${a}--menu-item__shortcut`},g),h&&n.createElement(n.Fragment,null,n.createElement("div",{className:`${a}--menu-item__shortcut`},R?H||(H=n.createElement(ce,null)):J||(J=n.createElement(ue,null))),n.createElement(W,{label:p,open:x,onClose:()=>{var s;k(),(s=r.current)==null||s.focus()},x:C.x,y:C.y},d)))});j.propTypes={children:e.node,className:e.string,disabled:e.bool,kind:e.oneOf(["default","danger"]),label:e.string.isRequired,onClick:e.func,renderIcon:e.oneOfType([e.func,e.object]),shortcut:e.string};const Ce=t.forwardRef(function(b,y){let{className:d,defaultSelected:I,label:f,onChange:c,selected:p,...u}=b;const l=S(),g=t.useContext(P);g.state.mode;const[m,a]=Q({value:p,onChange:c,defaultValue:I??!1});function o(E){a(!m),c&&c(E)}t.useEffect(()=>{g.state.hasIcons||g.dispatch({type:"enableIcons"})},[g.state.hasIcons,g]);const r=N(d,`${l}--menu-item-selectable--selected`);return n.createElement(j,_({},u,{ref:y,label:f,className:r,role:"menuitemcheckbox","aria-checked":m,renderIcon:m?X:void 0,onClick:o}))});Ce.propTypes={className:e.string,defaultSelected:e.bool,label:e.string.isRequired,onChange:e.func,selected:e.bool};const xe=t.forwardRef(function(b,y){let{children:d,className:I,label:f,...c}=b;const p=S(),u=N(I,`${p}--menu-item-group`);return n.createElement("li",{className:u,role:"none",ref:y},n.createElement("ul",_({},c,{role:"group","aria-label":f}),d))});xe.propTypes={children:e.node,className:e.string,label:e.string.isRequired};const Ee=v=>v.toString(),Re=t.forwardRef(function(b,y){let{className:d,defaultSelectedItem:I,items:f,itemToString:c=Ee,label:p,onChange:u,selectedItem:l,...g}=b;const m=S(),a=t.useContext(P);a.state.mode;const[o,r]=Q({value:l,onChange:u,defaultValue:I});function E(i,R){r(i),u&&u(R)}t.useEffect(()=>{a.state.hasIcons||a.dispatch({type:"enableIcons"})},[a.state.hasIcons,a]);const C=N(d,`${m}--menu-item-radio-group`);return n.createElement("li",{className:C,role:"none",ref:y},n.createElement("ul",_({},g,{role:"group","aria-label":p}),f.map((i,R)=>n.createElement(j,{key:R,label:c(i),role:"menuitemradio","aria-checked":i===o,renderIcon:i===o?X:void 0,onClick:M=>{E(i,M)}}))))});Re.propTypes={className:e.string,defaultSelectedItem:e.any,itemToString:e.func,items:e.array,label:e.string.isRequired,onChange:e.func,selectedItem:e.any};const Ne=t.forwardRef(function(b,y){let{className:d,...I}=b;const f=S(),c=N(d,`${f}--menu-item-divider`);return n.createElement("li",_({},I,{className:c,role:"separator",ref:y}))});Ne.propTypes={className:e.string};const ve=["primary","tertiary","ghost"],ke="primary",Me=t.forwardRef(function(b,y){let{children:d,className:I,disabled:f,kind:c=ke,label:p,size:u="lg",menuAlignment:l="bottom",tabIndex:g=0,...m}=b;const a=oe("MenuButton"),o=S(),r=t.useRef(null),E=[he({crossAxis:!1})];(l==="bottom"||l==="top")&&E.push(pe({apply(k){let{rects:O,elements:K}=k;Object.assign(K.floating.style,{width:`${O.reference.width}px`})}}));const{refs:C,floatingStyles:i,placement:R,middlewareData:M}=fe({placement:l,strategy:"fixed",middleware:E,whileElementsMounted:ge}),h=be(y,r),{open:x,handleClick:B,handleMousedown:T,handleClose:w}=le(r);t.useLayoutEffect(()=>{Object.keys(i).forEach(k=>{C.floating.current&&(C.floating.current.style[k]=i[k])})},[i,C.floating,M,R,x]);function $(){r.current&&B()}const q=N(`${o}--menu-button__container`,I),z=N(`${o}--menu-button__trigger`,{[`${o}--menu-button__trigger--open`]:x}),D=N(`${o}--menu-button__${l}`);return n.createElement("div",_({},m,{ref:h,"aria-owns":x?a:void 0,className:q}),n.createElement(de,{ref:C.setReference,className:z,size:u,tabIndex:g,kind:c,renderIcon:me,disabled:f,"aria-haspopup":!0,"aria-expanded":x,onClick:$,onMouseDown:T,"aria-controls":x?a:void 0},p),n.createElement(W,{containerRef:r,menuAlignment:l,className:D,ref:C.setFloating,id:a,legacyAutoalign:!1,label:p,mode:"basic",size:u,open:x,onClose:w},d))});Me.propTypes={children:e.node.isRequired,className:e.string,disabled:e.bool,kind:e.oneOf(ve),label:e.string.isRequired,menuAlignment:e.oneOf(["top","top-start","top-end","bottom","bottom-start","bottom-end"]),size:e.oneOf(["sm","md","lg"]),tabIndex:e.number};export{Me as M,j as a};
