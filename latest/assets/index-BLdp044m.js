import{a as k,i as et,u as rt,y as ot,f as nt,z as st,e as at,g as z,c as A,_ as I}from"./floating-ui.react-BgNs4SA8.js";import{P as l}from"./index-Dk74W0Oi.js";import{r as d,R as u}from"./index-BwDkhjyp.js";const F={};function lt(o,a,i){return function(f,e,r){if(f[e]!==void 0){if(!F[r]||!F[r][e]){F[r]={...F[r],[e]:!0};const m=f[e],N=i?i(m):null;a&&!a.includes(m)&&(i?`${m}${e}${r}${N}${m}`:`${m}${e}${r}${a.join(", ")}${m}`)}for(var s=arguments.length,y=new Array(s>3?s-3:0),g=3;g<s;g++)y[g-3]=arguments[g];return o(f,e,r,...y)}}}function ht(o,a,i){const n=d.useRef(null);d.useEffect(()=>{n.current=i},[i]),d.useEffect(()=>{var r;const f=s=>{n.current&&n.current(s)},e="current"in o?o.current:o;return(r=e==null?void 0:e.addEventListener)==null||r.call(e,a,f),()=>{var s;(s=e==null?void 0:e.removeEventListener)==null||s.call(e,a,f)}},[o,a])}function U(o,a){const i=d.useRef(null);d.useEffect(()=>{i.current=a},[a]),d.useEffect(()=>{function n(f){i.current&&i.current(f)}return window.addEventListener(o,n),()=>{window.removeEventListener(o,n)}},[o])}function it(o){switch(o){case"top-left":return"top-start";case"top-right":return"top-end";case"bottom-left":return"bottom-start";case"bottom-right":return"bottom-end";case"left-bottom":return"left-end";case"left-top":return"left-start";case"right-bottom":return"right-end";case"right-top":return"right-start";default:return o}}const D=u.createContext({setFloating:{current:null},caretRef:{current:null},autoAlign:null}),ct=o=>({"top-left":"top-start","top-right":"top-end","bottom-left":"bottom-start","bottom-right":"bottom-end","left-bottom":"left-end","left-top":"left-start","right-bottom":"right-end","right-top":"right-start"})[o],ut=u.forwardRef(function(a,i){var H;let{isTabTip:n,align:f=n?"bottom-start":"bottom",as:e="span",autoAlign:r=!1,caret:s=!n,className:y,children:g,dropShadow:m=!0,highContrast:N=!1,onRequestClose:$,open:S,...J}=a;const b=k(),K=d.useRef(null),h=d.useRef(null),E=d.useRef(null);let C=it(f);U("blur",()=>{S&&($==null||$())}),U("click",c=>{var t;S&&!((t=E==null?void 0:E.current)!=null&&t.contains(c.target))&&($==null||$())});const O=u.Children.toArray(g).some(c=>{var t,p;return(p=(t=c==null?void 0:c.props)==null?void 0:t.className)==null?void 0:p.includes("slug")})?7:6,v=d.useRef({offset:10,caretHeight:O});et(()=>{if(s&&E.current){const c=window.getComputedStyle(E.current,null),t=c.getPropertyValue("--cds-popover-offset"),p=c.getPropertyValue("--cds-popover-caret-height");t&&(v.current.offset=t.includes("px")?Number(t.split("px",1)[0])*1:Number(t.split("rem",1)[0])*16),p&&(v.current.caretHeight=p.includes("px")?Number(p.split("px",1)[0])*1:Number(p.split("rem",1)[0])*16)}});const{refs:w,floatingStyles:j,placement:T,middlewareData:R}=rt(r?{placement:C,strategy:"fixed",middleware:[ot(n?0:(H=v==null?void 0:v.current)==null?void 0:H.offset),nt({fallbackAxisSideDirection:"start"}),st({element:h})],whileElementsMounted:at}:{}),Q=d.useMemo(()=>({floating:K,setFloating:w.setFloating,caretRef:h,autoAlign:r}),[w.setFloating,r]);n&&(["bottom-start","bottom-end"].includes(C)||(C="bottom-start")),d.useEffect(()=>{var c;if(r&&(Object.keys(j).forEach(t=>{w.floating.current&&(w.floating.current.style[t]=j[t])}),s&&R&&R.arrow&&(h!=null&&h.current))){const{x:t,y:p}=R.arrow,P={top:"bottom",right:"left",bottom:"top",left:"right"}[T.split("-")[0]];h.current.style.left=t!=null?`${t}px`:"",h.current.style.top=p!=null?`${p}px`:"",h.current.style.right="",h.current.style.bottom="",P&&(h.current.style[P]=`${-((c=v==null?void 0:v.current)==null?void 0:c.caretHeight)}px`)}},[j,w.floating,r,R,T,s]);const X=z([i,E]),Y=r&&T!==C?T:C,Z=A({[`${b}--popover-container`]:!0,[`${b}--popover--caret`]:s,[`${b}--popover--drop-shadow`]:m,[`${b}--popover--high-contrast`]:N,[`${b}--popover--open`]:S,[`${b}--popover--auto-align`]:r,[`${b}--popover--${Y}`]:!0,[`${b}--popover--tab-tip`]:n},y),q=u.Children.map(g,c=>{var p,P,L;const t=c;if(((t==null?void 0:t.type)==="button"||r&&((p=t==null?void 0:t.type)==null?void 0:p.displayName)!=="PopoverContent"||r&&((P=t==null?void 0:t.type)==null?void 0:P.displayName)==="ToggletipButton")&&u.isValidElement(t)){const V=(L=t==null?void 0:t.props)==null?void 0:L.className,x=(t==null?void 0:t.props).ref,tt=A(`${b}--popover--tab-tip__button`,V);return u.cloneElement(t,{className:n&&(t==null?void 0:t.type)==="button"?tt:V||"",ref:B=>{var W,M;(r&&((W=t==null?void 0:t.type)==null?void 0:W.displayName)!=="PopoverContent"||r&&((M=t==null?void 0:t.type)==null?void 0:M.displayName)==="ToggletipButton")&&w.setReference(B),typeof x=="function"?x(B):x!=null&&(x.current=B)}})}else return t}),_=e;return u.createElement(D.Provider,{value:Q},u.createElement(_,I({},J,{className:Z,ref:X}),r||n?q:g))});ut.propTypes={align:lt(l.oneOf(["top","top-left","top-right","bottom","bottom-left","bottom-right","left","left-bottom","left-top","right","right-bottom","right-top","top-start","top-end","bottom-start","bottom-end","left-end","left-start","right-end","right-start"]),["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"],ct),as:l.oneOfType([l.string,l.elementType]),autoAlign:l.bool,caret:l.bool,children:l.node,className:l.string,dropShadow:l.bool,highContrast:l.bool,isTabTip:l.bool,onRequestClose:l.func,open:l.bool.isRequired};function pt(o,a){let{className:i,children:n,...f}=o;const e=k(),{setFloating:r,caretRef:s,autoAlign:y}=u.useContext(D),g=z([r,a]);return u.createElement("span",I({},f,{className:`${e}--popover`}),u.createElement("span",{className:A(`${e}--popover-content`,i),ref:g},n,y&&u.createElement("span",{className:A({[`${e}--popover-caret`]:!0,[`${e}--popover--auto-align`]:!0}),ref:s})),!y&&u.createElement("span",{className:A({[`${e}--popover-caret`]:!0}),ref:s}))}const G=u.forwardRef(pt);G.displayName="PopoverContent";G.propTypes={children:l.node,className:l.string};export{ut as P,G as a,ht as b,U as u};
