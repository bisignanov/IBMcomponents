import{a as D,l as nt,u as st,w as at,f as it,N as lt,h as ct,e as ut,j as G,c as A,_ as J}from"./floating-ui.core.mjs-LzsX8FoD.js";import{P as l}from"./index-Dk74W0Oi.js";import{r as d,R as p}from"./index-BwDkhjyp.js";const S={};function pt(o,a,c){return function(f,e,r){if(f[e]!==void 0){if(!S[r]||!S[r][e]){S[r]={...S[r],[e]:!0};const m=f[e],j=c?c(m):null;a&&!a.includes(m)&&(c?`${m}${e}${r}${j}${m}`:`${m}${e}${r}${a.join(", ")}${m}`)}for(var s=arguments.length,y=new Array(s>3?s-3:0),g=3;g<s;g++)y[g-3]=arguments[g];return o(f,e,r,...y)}}}function yt(o,a,c){const n=d.useRef(null);d.useEffect(()=>{n.current=c},[c]),d.useEffect(()=>{var r;const f=s=>{n.current&&n.current(s)},e="current"in o?o.current:o;return(r=e==null?void 0:e.addEventListener)==null||r.call(e,a,f),()=>{var s;(s=e==null?void 0:e.removeEventListener)==null||s.call(e,a,f)}},[o,a])}function z(o,a){const c=d.useRef(null);d.useEffect(()=>{c.current=a},[a]),d.useEffect(()=>{function n(f){c.current&&c.current(f)}return window.addEventListener(o,n),()=>{window.removeEventListener(o,n)}},[o])}function ft(o){switch(o){case"top-left":return"top-start";case"top-right":return"top-end";case"bottom-left":return"bottom-start";case"bottom-right":return"bottom-end";case"left-bottom":return"left-end";case"left-top":return"left-start";case"right-bottom":return"right-end";case"right-top":return"right-start";default:return o}}const K=p.createContext({setFloating:{current:null},caretRef:{current:null},autoAlign:null}),dt=o=>({"top-left":"top-start","top-right":"top-end","bottom-left":"bottom-start","bottom-right":"bottom-end","left-bottom":"left-end","left-top":"left-start","right-bottom":"right-end","right-top":"right-start"})[o],gt=p.forwardRef(function(a,c){var V;let{isTabTip:n,align:f=n?"bottom-start":"bottom",as:e="span",autoAlign:r=!1,caret:s=!n,className:y,children:g,dropShadow:m=!0,highContrast:j=!1,onRequestClose:w,open:H,...Q}=a;const h=D(),X=d.useRef(null),b=d.useRef(null),E=d.useRef(null);let P=ft(f);z("blur",()=>{H&&(w==null||w())}),z("click",u=>{var t;H&&!((t=E==null?void 0:E.current)!=null&&t.contains(u.target))&&(w==null||w())});const Y=p.Children.toArray(g).some(u=>{var t,i;return(i=(t=u==null?void 0:u.props)==null?void 0:t.className)==null?void 0:i.includes("slug")})?7:6,v=d.useRef({offset:10,caretHeight:Y});nt(()=>{if(s&&E.current){const u=window.getComputedStyle(E.current,null),t=u.getPropertyValue("--cds-popover-offset"),i=u.getPropertyValue("--cds-popover-caret-height");t&&(v.current.offset=t.includes("px")?Number(t.split("px",1)[0])*1:Number(t.split("rem",1)[0])*16),i&&(v.current.caretHeight=i.includes("px")?Number(i.split("px",1)[0])*1:Number(i.split("rem",1)[0])*16)}});const{refs:C,floatingStyles:L,placement:R,middlewareData:x}=st(r?{placement:P,strategy:"fixed",middleware:[at(n?0:(V=v==null?void 0:v.current)==null?void 0:V.offset),it({fallbackAxisSideDirection:"start"}),lt({element:b}),ct()],whileElementsMounted:ut}:{}),Z=d.useMemo(()=>({floating:X,setFloating:C.setFloating,caretRef:b,autoAlign:r}),[C.setFloating,r]);n&&(["bottom-start","bottom-end"].includes(P)||(P="bottom-start")),d.useEffect(()=>{var u,t;if(r){const i={...L,visibility:(u=x.hide)!=null&&u.referenceHidden?"hidden":"visible"};if(Object.keys(i).forEach($=>{C.floating.current&&(C.floating.current.style[$]=i[$])}),s&&x&&x.arrow&&(b!=null&&b.current)){const{x:$,y:F}=x.arrow,N={top:"bottom",right:"left",bottom:"top",left:"right"}[R.split("-")[0]];b.current.style.left=$!=null?`${$}px`:"",b.current.style.top=F!=null?`${F}px`:"",b.current.style.right="",b.current.style.bottom="",N&&(b.current.style[N]=`${-((t=v==null?void 0:v.current)==null?void 0:t.caretHeight)}px`)}}},[L,C.floating,r,x,R,s]);const q=G([c,E]),_=r&&R!==P?R:P,tt=A({[`${h}--popover-container`]:!0,[`${h}--popover--caret`]:s,[`${h}--popover--drop-shadow`]:m,[`${h}--popover--high-contrast`]:j,[`${h}--popover--open`]:H,[`${h}--popover--auto-align ${h}--autoalign`]:r,[`${h}--popover--${_}`]:!0,[`${h}--popover--tab-tip`]:n},y),et=p.Children.map(g,u=>{var W,M;const t=u,i=(W=t==null?void 0:t.type)==null?void 0:W.displayName,$=(t==null?void 0:t.type)==="button",F=r&&i&&["ToggletipButton"].includes(i),N=r&&i&&!["ToggletipContent","PopoverContent"].includes(i);if(p.isValidElement(t)&&($||F||N)){const U=(M=t==null?void 0:t.props)==null?void 0:M.className,T=(t==null?void 0:t.props).ref,ot=A(`${h}--popover--tab-tip__button`,U);return p.cloneElement(t,{className:n&&(t==null?void 0:t.type)==="button"?ot:U||"",ref:B=>{var k,I;(r&&((k=t==null?void 0:t.type)==null?void 0:k.displayName)!=="PopoverContent"||r&&((I=t==null?void 0:t.type)==null?void 0:I.displayName)==="ToggletipButton")&&C.setReference(B),typeof T=="function"?T(B):T!=null&&(T.current=B)}})}else return t}),rt=e;return p.createElement(K.Provider,{value:Z},p.createElement(rt,J({},Q,{className:tt,ref:q}),r||n?et:g))});gt.propTypes={align:pt(l.oneOf(["top","top-left","top-right","bottom","bottom-left","bottom-right","left","left-bottom","left-top","right","right-bottom","right-top","top-start","top-end","bottom-start","bottom-end","left-end","left-start","right-end","right-start"]),["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"],dt),as:l.oneOfType([l.string,l.elementType]),autoAlign:l.bool,caret:l.bool,children:l.node,className:l.string,dropShadow:l.bool,highContrast:l.bool,isTabTip:l.bool,onRequestClose:l.func,open:l.bool.isRequired};function ht(o,a){let{className:c,children:n,...f}=o;const e=D(),{setFloating:r,caretRef:s,autoAlign:y}=p.useContext(K),g=G([r,a]);return p.createElement("span",J({},f,{className:`${e}--popover`}),p.createElement("span",{className:A(`${e}--popover-content`,c),ref:g},n,y&&p.createElement("span",{className:A({[`${e}--popover-caret`]:!0,[`${e}--popover--auto-align`]:!0}),ref:s})),!y&&p.createElement("span",{className:A({[`${e}--popover-caret`]:!0}),ref:s}))}const O=p.forwardRef(ht);O.displayName="PopoverContent";O.propTypes={children:l.node,className:l.string};export{gt as P,O as a,yt as b,pt as d,ft as m,z as u};
