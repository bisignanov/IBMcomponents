// Copyright IBM Corp. 2023, 2023
//
// This source code is licensed under the Apache-2.0 license found in the
// LICENSE file in the root directory of this source tree.
//

// Standard imports.
@import '../../global/styles/project-settings';
@import '../../global/styles/mixins';

// stylelint-disable carbon/layout-token-use
// stylelint-disable carbon/motion-duration-use
// stylelint-disable carbon/motion-easing-use
// stylelint-disable declaration-no-important
// stylelint-disable carbon/type-token-use

// Define all component styles in a mixin which is then exported using
// the Carbon import-once mechanism.
@mixin interstitial-screen {
  // The block part of our conventional BEM class names (blockClass__E--M).
  $block-class: #{$pkg-prefix}--interstitial-screen;
  $carousel: #{$pkg-prefix}--carousel;
  $carousel-item: #{$pkg-prefix}--carousel__item;
  $one-grid-column: calc(100% / 16);

  .#{$block-class} {
    $block: &;

    .#{$carousel} {
      display: flex;
      min-height: 100%;
      flex-direction: column;

      &__elements-container {
        display: flex;
        flex: 1;
        flex-direction: column;
      }

      &__elements {
        flex: 1;
      }
    }

    position: fixed;
    z-index: 6001;
    top: 0;
    right: 0;
    left: 0;

    #{$block}--auto-height-container {
      flex: 1;
    }

    &--body {
      flex-grow: 1;
      padding: 0;
      margin: 0;
      background-color: $ui-background;
      overflow-x: hidden;
      overflow-y: auto;
    }

    &--body-grid {
      height: 100%;
      padding: 0 !important;
    }

    &--body-row {
      height: 100%;
    }

    &--progress {
      margin: $spacing-07 $spacing-07 $spacing-03;
    }

    &__carousel {
      height: 100%;
      .#{$carousel-item} {
        flex: 0 0 100% !important;
      }
    }

    &--container {
      min-width: carbon--mini-units(94);
      max-width: 1312px;
      margin: calc($spacing-10 * 2) auto;
      background-color: $ui-background;
    }

    &--media-container {
      overflow: hidden;
    }

    &--media {
      width: 100%;
      height: 100%;
      @include carbon--breakpoint(lg) {
        margin-right: calc($spacing-07 * -1);
      }
      @include carbon--breakpoint(xlg) {
        margin-right: calc($spacing-08 * -1);
      }
    }

    &--stepped-animated-media {
      overflow: hidden;
      height: 100%;
    }

    // HEADER
    &--internal-header {
      position: relative;
      min-height: $spacing-09;
      background-color: $ui-background;

      &:empty {
        min-height: 0;
      }

      h2 {
        @include carbon--type-style('productive-heading-04');

        padding: $spacing-05 $spacing-07 $spacing-06;

        &:empty {
          padding: 0;
        }
      }

      &.has-title {
        border-bottom: 1px solid $ui-03;
        background: $ui-01;

        #{$block}--progress {
          margin-top: 0;
        }
      }
      > #{$block}--close-icon {
        position: absolute !important;
        z-index: 1;
        top: 0;
        right: 0;
        width: $spacing-09;
      }
    }

    // FOOTER
    &--footer {
      display: flex;
      width: 100%;
      flex-direction: row;
      justify-content: flex-end;
      border-top: 1px solid $ui-03;
      background: $ui-background;

      #{$block}--prev-btn,
      #{$block}--next-btn,
      #{$block}--start-btn {
        width: calc($one-grid-column * 3);
        min-width: carbon--mini-units(29);
      }

      #{$block}--skip-btn {
        min-width: carbon--mini-units(29);
        max-width: none;
        flex-grow: 1;
      }
    }

    &--footer-controls {
      margin-left: auto;
    }

    // MODAL (settings exclusive of "FULL SCREEN")
    &.modal {
      opacity: 0;
      transition: opacity 240ms cubic-bezier(0.4, 0.14, 1, 1),
        visibility 0ms linear 240ms;

      @media (prefers-reduced-motion) {
        transition: none;
      }

      &.is-visible {
        opacity: 1;
        transition: opacity 240ms cubic-bezier(0, 0, 0.3, 1),
          visibility 0ms linear;
        @media (prefers-reduced-motion) {
          transition: none;
        }
      }

      #{$block}--content {
        margin-top: 0;
      }

      #{$block}--internal-header {
        &:has(> :nth-child(2)) {
          min-height: initial;
        }
      }
    }

    // FULL SCREEN (settings exclusive of "MODAL")
    &.full-screen {
      #{$block}--container {
        display: flex;
        max-width: 100vw;
        height: 100vh;
        flex-direction: column;
        padding: 0;
        margin: 0;
      }

      // e.g. "IBM Cloud Pak | Product"
      // ..."IBM Cloud Pak"
      #{$block}--header {
        @include carbon--type-style('body-long-01');

        height: $spacing-09;
        padding-left: $spacing-05;
        border-bottom: 1px solid $ui-03;
        /* stylelint-disable-next-line carbon/theme-token-use */
        background-color: $gray-100;
        /* stylelint-disable-next-line carbon/theme-token-use */
        color: $gray-10;
        font-weight: normal !important; // overrides type style above
        line-height: $spacing-09 !important;

        b {
          font-weight: var(--cds-heading-01-font-weight, 600);
        }
      }

      #{$block}--internal-header {
        &:has(> :nth-child(1)) {
          min-height: initial;
        }
      }
    }
  }
}

@include exports('interstitial-screen') {
  @include interstitial-screen;
}
