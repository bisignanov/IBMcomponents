import{p as W,j as r,T as k}from"./settings-DDDiKwEV.js";import{r as d}from"./index-BwDkhjyp.js";import{P as a}from"./index-Dk74W0Oi.js";import{a as K,c as p}from"./floating-ui.react-BgNs4SA8.js";import{u as R}from"./useResizeObserver-CYrpFlRY.js";import{B as P,a as h}from"./BreadcrumbItem-Dk6KLF9E.js";import{L as V}from"./Link-DHwEx_0L.js";import{O as z,a as G}from"./index-D9ju4W2A.js";import{u as J}from"./uuidv4-BQrI85uz.js";import"./props-helper-D2PZmIqz.js";import{O as S}from"./bucket-12-C33cLYA1.js";import{T as Q}from"./TooltipTrigger-CHacFWqu.js";import{a as U}from"./bucket-0-Cw-xsoio.js";const o=`${W.prefix}--breadcrumb-with-overflow`,A="BreadcrumbWithOverflow";let g=({breadcrumbs:i,className:E,maxVisible:b,noTrailingSlash:M,overflowAriaLabel:w,overflowTooltipAlign:D,...F})=>{const q=K(),[v,j]=d.useState(3),[T,B]=d.useState([]),y=d.useRef(null),x=d.useRef(null),_=d.useRef(J()),[I,L]=d.useState([]),H=({overflowItems:n})=>r.jsx(h,{children:r.jsx(z,{align:D,"aria-label":w,iconDescription:w,renderIcon:e=>r.jsx(S,{size:32,...e}),className:`${o}__overflow-menu`,menuOptionsClass:`${o}__overflow-menu-options`,children:n.map((e,t)=>r.jsx(G,{href:e.props.href,onClick:e.props.onClick,itemText:e.props.children},`breadcrumb-overflow-menu-item-${_.current}-${t}`))})},`breadcrumb-overflow-${_.current}`);d.useEffect(()=>{L(r.jsx("div",{className:`${o}__breadcrumb-container ${o}__breadcrumb-container--hidden`,"aria-hidden":!0,ref:x,children:r.jsxs(P,{children:[r.jsx(h,{children:r.jsx(z,{"aria-label":w,renderIcon:n=>r.jsx(S,{size:32,...n})})},`${o}-hidden-overflow-${_}`),i.map(({label:n,key:e,title:t,id:u,shortTitle:l,...f})=>r.jsx(h,{...f,"data-original-id":u,title:t??n,children:n},e))]})}))},[i,w]),d.useEffect(()=>{if(i.length===0){B([]);return}const n=i.map(({className:u,key:l,label:f,shortTitle:c,title:m,...$},C)=>r.jsx(h,{className:C>0||v>1?p([u,`${o}__displayed-breadcrumb`]):u,title:C+1===i.length?m:null,...$,children:c||f},l)),e=v>1?1:0;let t=n.splice(e,i.length-v);t.length&&n.splice(e,0,r.jsx(H,{overflowItems:t},`displayed-breadcrumb-${_}-overflow`)),B(n)},[i,v]);const O=()=>{if(!y.current)return;const n=(e,t)=>t===0?e-1:t===1?1:e-t;if(b<=1)j(1);else{let e=0,t=y.current.offsetWidth;if(x.current){const u=x.current.querySelectorAll(`.${q}--breadcrumb-item`),l=[];for(let c of u){const m=window?window.getComputedStyle(u[0]):null,$=m?parseFloat(m.marginLeft||0,10)+parseFloat(m.marginRight||0,10):0;l.push(c.offsetWidth+$)}let f=l[0];for(let c=0;c<l.length-1;c++){const m=n(l.length,c);if(t>=l[m])t-=l[m],e+=1;else break}if(e<l.length-1)for(;e>0&&t<f;){e-=1;const c=n(l.length,e);t+=l[c]}}e<=1?j(1):j(b?Math.min(e,b):e)}};d.useEffect(()=>{O()},[I,b]);const N=()=>{O()};let s=i[i.length-1];return s.isCurrentPage&&(s=i[i.length-2]),R(x,N),R(y,N),r.jsx("div",{className:p(o,E,{[`${o}__with-items`]:T.length>1}),ref:y,children:r.jsxs("div",{className:p([`${o}__space`]),children:[I,r.jsxs(P,{className:p(`${o}__breadcrumb-container`,{[`${o}__breadcrumb-container-with-items`]:T.length>1}),noTrailingSlash:M,...F,children:[(s==null?void 0:s.href)&&((s==null?void 0:s.label)||(s==null?void 0:s.title))&&r.jsx(h,{className:p(`${o}__breadcrumb-back`),children:r.jsx(V,{href:s.href,renderIcon:()=>r.jsx(k,{align:"right",label:s.title||s.label,className:`${o}__back__button ${q}--icon-tooltip`,children:r.jsx(Q,{children:r.jsx(U,{size:16})})})})}),T]})]})})};g=W.checkComponentEnabled(g,A);g.propTypes={breadcrumbs:a.arrayOf(a.shape({href:a.string,isCurrentPage:a.bool,key:a.string.isRequired,label:a.node,shortTitle:a.string,title:a.string.isRequired.if(({label:i})=>typeof i!="string")})),className:a.string,maxVisible:a.number,noTrailingSlash:a.bool,overflowAriaLabel:a.string.isRequired.if(({breadcrumbs:i})=>i.length>1),overflowTooltipAlign:k.propTypes.align};g.displayName=A;g.__docgenInfo={description:"The BreadcrumbWithOverflow is used internally by the PageHeader to wrap BreadcrumbItems.",methods:[],displayName:"BreadcrumbWithOverflow",props:{breadcrumbs:{description:"",type:{name:"arrayOf",value:{name:"shape",value:{href:{name:"string",description:"Optional string representing the link location for the BreadcrumbItem",required:!1},isCurrentPage:{name:"bool",description:"Provide if this breadcrumb item represents the current page",required:!1},key:{name:"string",description:"Key required to render array efficiently",required:!0},label:{name:"node",description:"Pass in content that will be inside of the BreadcrumbItem",required:!1},shortTitle:{name:"string",description:"An optional title label for extra long breadcrumb",required:!1},title:{name:"string",description:"A string based alternative to the children, required only if children is not of type string",required:!0}}}},required:!1},className:{description:"className",type:{name:"string"},required:!1},maxVisible:{description:"maxVisible: maximum visible breadcrumb-items before overflow is used (values less than 1 are treated as 1)",type:{name:"number"},required:!1},noTrailingSlash:{description:"noTrailing slash - same as for Carbon",type:{name:"bool"},required:!1},overflowAriaLabel:{description:"overflowAriaLabel label for open close button overflow used for breadcrumb items that do not fit.",type:{name:"string"},required:!0},overflowTooltipAlign:{description:"overflowTooltipAlign: align tooltip position",type:{name:"custom",raw:"Tooltip.propTypes.align"},required:!1}}};export{g as B};
