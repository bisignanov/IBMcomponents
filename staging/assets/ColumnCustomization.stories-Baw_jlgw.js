import{p as M,j as r,B as Pe,C as fe}from"./settings-B0yoEqB-.js";import{r as w,R as K}from"./index-BwDkhjyp.js";import{a as G}from"./chunk-MZXVCX43-CM0pFb8Z.js";import{I as Ae,D as ee,a as ke,m as ge,u as he,b as Re}from"./_storybook-styles-CychWhZE.js";import{S as He}from"./StoryDocsPage-ChoQ20NW.js";import{D as ye}from"./DatagridActions-QExTp5JD.js";import{D as Ce}from"./DatagridPagination-DIO8gQm1.js";import{A as O}from"./getArgTypes-CUsKgYxs.js";import{c as J,aO as Ee}from"./useMergedRefs-CY5AfkP4.js";import{W as be}from"./index-o99IUdSw.js";import{r as Ne}from"./useMultipleKeyTracking-TKcR8IhZ.js";import{P as i,p as F}from"./index-Dk74W0Oi.js";import"./feature-flags-DaCaCBcF.js";import{C as Se}from"./Checkbox-BqOSqAbR.js";import{g as xe}from"./_commonjsHelpers-BosuxZz1.js";import{b as Oe,c as je}from"./index-C0xX6qoh.js";import{u as Be,C as Ve,a as ae,P as Me,K as Fe,b as We,D as Ue,c as Ge,r as Ye,e as Je,S as Ke,v as Qe}from"./modifiers.esm-C4IbBq9K.js";import{c as Xe}from"./bucket-5-4mfd4DYT.js";import{L as Ze}from"./bucket-10-DPuM9DSo.js";import{g as W}from"./getNodeTextContent-C8IeKkUQ.js";import{u as et}from"./uuidv4-BQrI85uz.js";import{S as tt}from"./Search-C-IZ1uID.js";import{T as st}from"./TearsheetNarrow-S5NgCtPX.js";import{u as rt}from"./useActionsColumn-BpSS631S.js";import{u as ot}from"./useStickyColumn-D5FAGwyD.js";import{a as Te}from"./bucket-6-DVxyWg0u.js";import{T as ve}from"./bucket-16-DL-AnbF2.js";import{C as it}from"./events-D6dlm1BF.js";import"./index-CJvxHwuA.js";import"./index-D2JPet7M.js";import"./index-BONylQH5.js";import"./v4-CQkTLCs1.js";import"./devtools-Cvhd47uB.js";import"./TableRow-CMq_6z-l.js";import"./wrapComponent-DiyfoJNm.js";import"./bucket-0-B0v4OsOH.js";import"./TableToolbar-Dxy_jSBy.js";import"./Text-CiWJR74P.js";import"./ErrorEmptyState-CaCg9ZED.js";import"./Link-CYjur6eE.js";import"./EmptyState-C99fAONT.js";import"./props-helper-TFaonUid.js";import"./EmptyStateV2-CXmn_rfu.js";import"./iframe-BBSBJ9v0.js";import"../sb-preview/runtime.js";import"./ErrorIllustration-BKX974k2.js";import"./NoDataEmptyState-B2cShDq1.js";import"./NoDataIllustration-BpOCLdu-.js";import"./NotFoundEmptyState-Bd7uIjya.js";import"./NotFoundIllustration-6y1G8FO-.js";import"./useResizeObserver-CYrpFlRY.js";import"./useWindowResize-CQlRr8UY.js";import"./useControllableState-DwpxGhsf.js";import"./useAttachedMenu-BaaFYui-.js";import"./mergeRefs-CTUecegF.js";import"./getFocusableElements-BW7cf991.js";import"./index-Di2vWyb4.js";import"./index-DLwhpbfx.js";import"./useClickOutside-Dcd11u7q.js";import"./AccordionItem-CTTBqoiX.js";import"./index-BYHiJ3ZX.js";import"./LayerContext-DbU-6VX4.js";import"./motionConstants-CR5hPmRc.js";import"./tslib.es6-B4_xh3D5.js";import"./use-reduced-motion-BisnjenD.js";import"./index-DkUr2NOz.js";import"./ActionSet-CO2N4_EX.js";import"./ButtonSet-reKR4OAu.js";import"./InlineLoading-C8yXZ83a.js";import"./DatePicker-B0hN9vV1.js";import"./FormContext-C7kRVu4t.js";import"./bucket-18-CV2-K6tq.js";import"./bucket-1-BLdYOqeC.js";import"./Dropdown-72ZSyaFY.js";import"./index-DCRLsKDD.js";import"./extends-CCbyfPlC.js";import"./index-DcAOwtUU.js";import"./FormGroup-B8MM2mOm.js";import"./NumberInput-cwIFqPC6.js";import"./useNormalizedInputProps-zMYHe45M.js";import"./bucket-15-BtEKbmNl.js";import"./RadioButton-B_Cet1lQ.js";import"./RadioButtonGroup-Bbs-xIeU.js";import"./MultiSelect-B3LL4IfL.js";import"./index-n5c_F1iv.js";import"./usePreviousValue-DDnp_zt4.js";import"./debounce-CI22LTdx.js";import"./toNumber-DVQITUtX.js";import"./TagSet-DxQ5dgYp.js";import"./Tag-NhnQDXh6.js";import"./DefinitionTooltip-rqwY9pVN.js";import"./ComposedModal-BsRPX6M2.js";import"./requiredIfGivenPropIsTruthy-CU7JwK8h.js";import"./wrapFocus-CuszVIVc.js";import"./index-D0hq9jV7.js";import"./usePortalTarget-BFF9_zHB.js";import"./SkeletonText-DgCYmMgG.js";import"./bucket-14-BdOImxz7.js";import"./index-BTlTfnmk.js";import"./bucket-17-DEU5xTcO.js";import"./index-D4z3D3nr.js";import"./index-C2eUe6cH.js";import"./index-DrFu-skq.js";import"./story-helper-CLT5J87X.js";import"./index-CRLQHgyt.js";import"./bucket-12-DR0XAE11.js";import"./TableToolbarSearch-BM6MIAq0.js";import"./bucket-13-DF9rL3Hb.js";import"./Select-Bw-VMwxr.js";import"./SelectItem-Cm4JUxjM.js";import"./index-CHDgEAL2.js";import"./bucket-9-C9TeJaCv.js";import"./TearsheetShell-BnaySOIn.js";import"./useFocus-DyL17TYP.js";var Z={exports:{}};(function(s,n){Object.defineProperty(n,"__esModule",{value:!0});function a(e){return typeof e=="object"&&!("toString"in e)?Object.prototype.toString.call(e).slice(8,-1):e}var p=typeof process=="object"&&!0;function m(e,t){if(!e)throw p?new Error("Invariant failed"):new Error(t())}n.invariant=m;var h=Object.prototype.hasOwnProperty,T=Array.prototype.splice,v=Object.prototype.toString;function b(e){return v.call(e).slice(8,-1)}var f=Object.assign||function(e,t){return _(t).forEach(function(u){h.call(t,u)&&(e[u]=t[u])}),e},_=typeof Object.getOwnPropertySymbols=="function"?function(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.keys(e)};function z(e){return Array.isArray(e)?f(e.constructor(e.length),e):b(e)==="Map"?new Map(e):b(e)==="Set"?new Set(e):e&&typeof e=="object"?f(Object.create(Object.getPrototypeOf(e)),e):e}var R=function(){function e(){this.commands=f({},H),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(t,u){return t===u},this.update.newContext=function(){return new e().update}}return Object.defineProperty(e.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(t){this.update.isEquals=t},enumerable:!0,configurable:!0}),e.prototype.extend=function(t,u){this.commands[t]=u},e.prototype.update=function(t,u){var c=this,o=typeof u=="function"?{$apply:u}:u;Array.isArray(t)&&Array.isArray(o)||m(!Array.isArray(o),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),m(typeof o=="object"&&o!==null,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the "+("following commands: "+Object.keys(c.commands).join(", ")+".")});var y=t;return _(o).forEach(function(q){if(h.call(c.commands,q)){var $=t===y;y=c.commands[q](o[q],y,o,t),$&&c.isEquals(y,t)&&(y=t)}else{var D=b(t)==="Map"?c.update(t.get(q),o[q]):c.update(t[q],o[q]),E=b(y)==="Map"?y.get(q):y[q];(!c.isEquals(D,E)||typeof D>"u"&&!h.call(t,q))&&(y===t&&(y=z(t)),b(y)==="Map"?y.set(q,D):y[q]=D)}}),y},e}();n.Context=R;var H={$push:function(e,t,u){return I(t,u,"$push"),e.length?t.concat(e):t},$unshift:function(e,t,u){return I(t,u,"$unshift"),e.length?e.concat(t):t},$splice:function(e,t,u,c){return l(t,u),e.forEach(function(o){g(o),t===c&&o.length&&(t=z(c)),T.apply(t,o)}),t},$set:function(e,t,u){return d(u),e},$toggle:function(e,t){P(e,"$toggle");var u=e.length?z(t):t;return e.forEach(function(c){u[c]=!t[c]}),u},$unset:function(e,t,u,c){return P(e,"$unset"),e.forEach(function(o){Object.hasOwnProperty.call(t,o)&&(t===c&&(t=z(c)),delete t[o])}),t},$add:function(e,t,u,c){return A(t,"$add"),P(e,"$add"),b(t)==="Map"?e.forEach(function(o){var y=o[0],q=o[1];t===c&&t.get(y)!==q&&(t=z(c)),t.set(y,q)}):e.forEach(function(o){t===c&&!t.has(o)&&(t=z(c)),t.add(o)}),t},$remove:function(e,t,u,c){return A(t,"$remove"),P(e,"$remove"),e.forEach(function(o){t===c&&t.has(o)&&(t=z(c)),t.delete(o)}),t},$merge:function(e,t,u,c){return S(t,e),_(e).forEach(function(o){e[o]!==t[o]&&(t===c&&(t=z(c)),t[o]=e[o])}),t},$apply:function(e,t){return C(e),e(t)}},L=new R;n.isEquals=L.update.isEquals,n.extend=L.extend,n.default=L.update,n.default.default=s.exports=f(n.default,n);function I(e,t,u){m(Array.isArray(e),function(){return"update(): expected target of "+a(u)+" to be an array; got "+a(e)+"."}),P(t[u],u)}function P(e,t){m(Array.isArray(e),function(){return"update(): expected spec of "+a(t)+" to be an array; got "+a(e)+". Did you forget to wrap your parameter in an array?"})}function l(e,t){m(Array.isArray(e),function(){return"Expected $splice target to be an array; got "+a(e)}),g(t.$splice)}function g(e){m(Array.isArray(e),function(){return"update(): expected spec of $splice to be an array of arrays; got "+a(e)+". Did you forget to wrap your parameters in an array?"})}function C(e){m(typeof e=="function",function(){return"update(): expected spec of $apply to be a function; got "+a(e)+"."})}function d(e){m(Object.keys(e).length===1,function(){return"Cannot have more than one key in an object with $set"})}function S(e,t){m(t&&typeof t=="object",function(){return"update(): $merge expects a spec of type 'object'; got "+a(t)}),m(e&&typeof e=="object",function(){return"update(): $merge expects a target of type 'object'; got "+a(e)})}function A(e,t){var u=b(e);m(u==="Map"||u==="Set",function(){return"update(): "+a(t)+" expects a target of type Set or Map; got "+a(u)})}})(Z,Z.exports);var nt=Z.exports;const at=xe(nt);var lt=Oe,dt=je,ut="[object Boolean]";function ct(s){return s===!0||s===!1||dt(s)&&lt(s)==ut}var mt=ct;const pt=xe(mt),X=s=>pt(s.isVisible)?s.isVisible:!0,N=`${M.prefix}--datagrid`,te=({id:s,children:n,classList:a,disabled:p,ariaLabel:m,isSticky:h,selected:T})=>{const{attributes:v,isDragging:b,listeners:f,setNodeRef:_,transform:z,transition:R}=Be({disabled:p,id:s}),H=r.jsxs(r.Fragment,{children:[r.jsx("div",{className:J({disabled:p},`${N}__draggable-handleStyle`),children:h?r.jsx(Ze,{size:16}):r.jsx(Xe,{size:16})}),n]}),L={transform:p?void 0:Ve.Transform.toString(z),transition:R};return r.jsxs("li",{className:J(a,`${N}__draggable-handleHolder`,{[`${N}__draggable-handleHolder--selected`]:T,[`${N}__draggable-handleHolder--sticky`]:h,[`${N}__draggable-handleHolder--dragging`]:b}),id:s,ref:_,style:L,...v,...f,"aria-selected":T,role:"option",children:[r.jsx("span",{className:`${N}__shared-ui--assistive-text`,children:m}),r.jsx("div",{className:J({[`${N}__draggable-handleStyle`]:!p},[`${N}__draggable-handleHolder-droppable`]),children:H})]})};te.propTypes={ariaLabel:i.string.isRequired,children:i.element.isRequired,classList:i.string,disabled:i.bool,id:i.string.isRequired,isSticky:i.bool,selected:i.bool};te.__docgenInfo={description:"",methods:[],displayName:"DraggableElement",props:{ariaLabel:{required:!0,tsType:{name:"string"},description:"",type:{name:"string"}},children:{required:!0,tsType:{name:"ReactNode"},description:"",type:{name:"element"}},classList:{required:!1,tsType:{name:"string"},description:"",type:{name:"string"}},disabled:{required:!1,tsType:{name:"boolean"},description:"",type:{name:"bool"}},id:{required:!0,tsType:{name:"string"},description:"",type:{name:"string"}},isSticky:{required:!1,tsType:{name:"boolean"},description:"",type:{name:"bool"}},selected:{required:!1,tsType:{name:"boolean"},description:"",type:{name:"bool"}}},composes:["PropsWithChildren"]};const U=`${M.prefix}--datagrid`,j=(s,n)=>s&&n&&s.id===n.id,se=({columns:s,filterString:n,id:a,moveElement:p,onSelectColumn:m,setAriaRegionText:h})=>{const T=`${U}__draggable-item`,v=s.filter(l=>W(l.Header).trim().length!==0).filter(Boolean).filter(l=>!l.isAction).filter(l=>l.id!=="spacer").filter(l=>n.length===0||W(l.Header).toLowerCase().includes(n)),f=(()=>{const l=[...v];return l.forEach(g=>{g.sticky&&(g.disabled=!0)}),l})(),_=l=>{var c;const{active:g,over:C}=l,d=f.filter(o=>o.id===C.id);if(d!=null&&d.length&&((c=d[0])!=null&&c.disabled))return;const S=f.findIndex(o=>j(o,g)),A=f.findIndex(o=>j(o,C)),e=W(f[S].Header);h(`${e} dropped. New position ${A+1} of ${f.length}.`);const t=s.findIndex(o=>j(o,g)),u=s.findIndex(o=>j(o,C));p(t,u)},z=l=>{const{active:g}=l,C=f.findIndex(S=>j(S,g)),d=W(f[C].Header);h(`${d} grabbed. Current position ${C+1} of ${f.length}.`)},R=l=>{const{active:g,over:C}=l,d=f.findIndex(e=>j(e,g)),S=f.findIndex(e=>j(e,C)),A=W(f[d].Header);h(`${A} grabbed. Original position ${d+1}, new position ${S+1} of ${f.length}.`)},H=ae(Me,{activationConstraint:{distance:4}}),L=ae(Fe,{coordinateGetter:(l,g)=>{const{currentCoordinates:C}=g;let d=l.target;for(;d&&!d.classList.contains(T);)d=d.parentNode;const S=d.offsetHeight;switch(l.code){case"ArrowRight":case"ArrowLeft":return C;case"ArrowUp":return{...C,y:C.y-S};case"ArrowDown":return{...C,y:C.y+S}}}}),I=We(H,L),P=(l,g)=>{if(l.code==="Space")return m(g,!X(g)),l.preventDefault(),l.stopPropagation(),!1};return r.jsx(Ue,{collisionDetection:Ge,onDragEnd:_,onDragStart:z,onDragMove:R,sensors:I,modifiers:[Ye,Je],children:r.jsxs(r.Fragment,{children:[r.jsx("div",{className:`${U}__draggable-underlay`,"aria-hidden":"true",children:v.map(l=>r.jsx("div",{className:`${U}__draggable-underlay-item`},l.id))},`draggable-underlay-${a}`),r.jsx(Ke,{items:f,strategy:Qe,children:v.map(l=>{const g=W(l.Header),C=new RegExp("("+n+")"),d=n.length?g.toLowerCase().split(C):null,S=d!==null?d[0]===""?d[1].charAt(0).toUpperCase()+d[1].substring(1):d[0].charAt(0).toUpperCase()+d[0].substring(1):null,A=d!==null?d[0]===""?`<strong>${S}</strong>`+d[2]:S+`<strong>${d[1]}</strong>`+d[2]:g,e=!!l.sticky,t=l.disabled,u=r.jsxs(r.Fragment,{children:[r.jsx(Se,{checked:X(l),disabled:t||e,onChange:(c,{checked:o})=>m(l,o),id:`${U}__customization-column-${l.id}`,labelText:g,title:g,className:`${U}__customize-columns-checkbox`,hideLabel:!0,onKeyDown:c=>P(c,l)}),r.jsx("div",{dangerouslySetInnerHTML:{__html:A},className:`${U}__customize-columns-checkbox-visible-label`})]});return r.jsx(te,{classList:T,id:l.id,disabled:n.length>0||e,ariaLabel:g,isSticky:e,selected:X(l),children:u},l.id)})})]})})};se.propTypes={columns:F.PropTypes.array.isRequired,filterString:F.PropTypes.string.isRequired,id:F.PropTypes.string.isRequired,moveElement:F.PropTypes.func.isRequired,onSelectColumn:F.PropTypes.func.isRequired,setAriaRegionText:F.PropTypes.func.isRequired};se.__docgenInfo={description:"",methods:[],displayName:"DraggableItemsList",props:{columns:{description:"",type:{name:"array"},required:!0},filterString:{description:"",type:{name:"string"},required:!0},id:{description:"",type:{name:"string"},required:!0},moveElement:{description:"",type:{name:"func"},required:!0},onSelectColumn:{description:"",type:{name:"func"},required:!0},setAriaRegionText:{description:"",type:{name:"func"},required:!0}}};const k=`${M.prefix}--datagrid`,re=({getVisibleColumnsCount:s,filterString:n,columns:a,setColumnsObject:p,onSelectColumn:m,assistiveTextInstructionsLabel:h,assistiveTextDisabledInstructionsLabel:T,selectAllLabel:v,customizeTearsheetHeadingLabel:b})=>{const f=w.useRef(et()),_=w.useRef(null),[z,R]=K.useState(""),H=K.useCallback((I,P)=>{const l=a[I];p(at(a,{$splice:[[I,1],[P,0,l]]}))},[a,p]),L=a==null?void 0:a.filter(I=>!I.sticky);return r.jsx("div",{className:`${k}__customize-columns-column-list`,ref:_,children:r.jsxs("ol",{className:`${k}__customize-columns-column-list--focus`,role:"listbox","aria-label":b,"aria-describedby":`${k}__customize-columns--instructions`,tabIndex:0,children:[r.jsx("span",{"aria-live":"assertive",className:`${k}__shared-ui--assistive-text`,children:z}),r.jsx("span",{id:`${k}__customize-columns--instructions`,className:`${k}__shared-ui--assistive-text`,children:n.length===0?h:T}),r.jsx("div",{id:`${k}__customize-columns-select-all`,className:J(`${k}__customize-columns-select-all`,{[`${k}__customize-columns-select-all--selected`]:s()>0}),selected:s()>0,children:r.jsx(Se,{className:`${k}__customize-columns-checkbox-wrapper`,checked:s()===a.length,indeterminate:s()<a.length&&s()>0,onChange:()=>{m(L,s()!==a.length)},id:`${k}__customization-column-select-all`,labelText:v})}),r.jsx(se,{id:f.current,columns:a,filterString:n,moveElement:H,setAriaRegionText:R,onSelectColumn:m})]})})};re.propTypes={assistiveTextDisabledInstructionsLabel:i.string,assistiveTextInstructionsLabel:i.string,columns:i.array.isRequired,customizeTearsheetHeadingLabel:i.string,disabledInstructionsLabel:i.string,filterString:i.string.isRequired,getVisibleColumnsCount:i.func.isRequired,instructionsLabel:i.string,onSelectColumn:i.func.isRequired,selectAllLabel:i.string,setColumnStatus:i.func,setColumnsObject:i.func.isRequired};re.__docgenInfo={description:"",methods:[],displayName:"Columns",props:{assistiveTextDisabledInstructionsLabel:{description:"",type:{name:"string"},required:!1},assistiveTextInstructionsLabel:{description:"",type:{name:"string"},required:!1},columns:{description:"",type:{name:"array"},required:!0},customizeTearsheetHeadingLabel:{description:"",type:{name:"string"},required:!1},disabledInstructionsLabel:{description:"",type:{name:"string"},required:!1},filterString:{description:"",type:{name:"string"},required:!0},getVisibleColumnsCount:{description:"",type:{name:"func"},required:!0},instructionsLabel:{description:"",type:{name:"string"},required:!1},onSelectColumn:{description:"",type:{name:"func"},required:!0},selectAllLabel:{description:"",type:{name:"string"},required:!1},setColumnStatus:{description:"",type:{name:"func"},required:!1},setColumnsObject:{description:"",type:{name:"func"},required:!0}}};const ft=`${M.prefix}--datagrid`,oe=({searchText:s,setSearchText:n,findColumnPlaceholderLabel:a})=>r.jsx("div",{className:`${ft}__customize-columns-tearsheet--actions`,children:r.jsx(tt,{placeholder:a,value:s,size:"lg",labelText:a,onChange:p=>{n(p.target.value)}})});oe.propTypes={columns:i.array.isRequired,findColumnPlaceholderLabel:i.string,originalColumnDefinitions:i.array.isRequired,resetToDefaultLabel:i.string,searchText:i.string.isRequired,setColumnsObject:i.func.isRequired,setSearchText:i.func.isRequired};oe.__docgenInfo={description:"",methods:[],displayName:"Actions",props:{columns:{description:"",type:{name:"array"},required:!0},findColumnPlaceholderLabel:{description:"",type:{name:"string"},required:!1},originalColumnDefinitions:{description:"",type:{name:"array"},required:!0},resetToDefaultLabel:{description:"",type:{name:"string"},required:!1},searchText:{description:"",type:{name:"string"},required:!0},setColumnsObject:{description:"",type:{name:"func"},required:!0},setSearchText:{description:"",type:{name:"func"},required:!0}}};const gt=`${M.prefix}--datagrid`,ie=({isOpen:s,setIsTearsheetOpen:n,onSaveColumnPrefs:a,columnDefinitions:p,originalColumnDefinitions:m,customizeTearsheetHeadingLabel:h="Customize columns",primaryButtonTextLabel:T="Save",secondaryButtonTextLabel:v="Cancel",instructionsLabel:b="Select columns to display them. Click and drag the box to reorder the columns. These specifications will be saved and persist if you leave and return to the data table.",findColumnPlaceholderLabel:f="Find column",resetToDefaultLabel:_="Reset to default",assistiveTextInstructionsLabel:z="Press space bar to toggle drag drop mode, use arrow keys to move selected elements.",assistiveTextDisabledInstructionsLabel:R="Reordering columns are disabled because they are filtered currently.",selectAllLabel:H="Column name"})=>{const[L,I]=w.useState(""),[P,l]=w.useState(""),[g,C]=w.useState(""),[d,S]=w.useState(p),[A,e]=w.useState(!1),t=()=>{S(p),n(!1)},u=()=>{n(!1);const $=d.map(D=>({id:D.id,isVisible:D.isVisible}));a($)},c=($,D)=>{const E=d.map(x=>Array.isArray($)?$.includes(x)&&x.canFilter&&!x.disabled?{...x,isVisible:D}:x:$.id===x.id?{...x,isVisible:D}:x),Le=E.filter(x=>x.isVisible&&!["datagridSelection","actions"].includes(x.id)).length,Ie=E.map(x=>Le>0?["datagridSelection","actions"].includes(x.id)?{...x,isVisible:!0}:x:["datagridSelection","actions"].includes(x.id)?{...x,isVisible:!1}:x);S(Ie),o()},o=()=>{A||e(!0)},y=w.useCallback(()=>d.filter($=>$.isVisible).length,[d]),q=g.trim().toLowerCase();return w.useEffect(()=>{const $=d.filter(E=>E.id==="actions").length,D=d.filter(E=>E.id==="datagridSelection").length;I(y()-$-D<0?0:y()-$-D),l(d.length-$-D)},[y,d]),r.jsxs(st,{className:`${gt}__customize-columns-tearsheet`,open:s,title:`${h} (${L}/${P})`,description:b,actions:[{kind:"secondary",label:v,onClick:t},{kind:"primary",label:T,onClick:u,disabled:!A}],children:[r.jsx(oe,{columns:d,originalColumnDefinitions:m,searchText:g,setColumnsObject:$=>{S($),o()},setSearchText:C,findColumnPlaceholderLabel:f,resetToDefaultLabel:_}),s&&r.jsx(re,{assistiveTextInstructionsLabel:z,assistiveTextDisabledInstructionsLabel:R,getVisibleColumnsCount:y,columns:d,filterString:q,onSelectColumn:c,setColumnsObject:$=>{S($),o()},selectAllLabel:H,customizeTearsheetHeadingLabel:h})]})};ie.propTypes={assistiveTextDisabledInstructionsLabel:i.string,assistiveTextInstructionsLabel:i.string,columnDefinitions:i.array.isRequired,customizeTearsheetHeadingLabel:i.string,findColumnPlaceholderLabel:i.string,instructionsLabel:i.string,isOpen:i.bool.isRequired,onSaveColumnPrefs:i.func.isRequired,originalColumnDefinitions:i.array.isRequired,primaryButtonTextLabel:i.string,resetToDefaultLabel:i.string,secondaryButtonTextLabel:i.string,selectAllLabel:i.string,setIsTearsheetOpen:i.func.isRequired};ie.__docgenInfo={description:"",methods:[],displayName:"CustomizeColumnsTearsheet",props:{customizeTearsheetHeadingLabel:{defaultValue:{value:"'Customize columns'",computed:!1},description:"",type:{name:"string"},required:!1},primaryButtonTextLabel:{defaultValue:{value:"'Save'",computed:!1},description:"",type:{name:"string"},required:!1},secondaryButtonTextLabel:{defaultValue:{value:"'Cancel'",computed:!1},description:"",type:{name:"string"},required:!1},instructionsLabel:{defaultValue:{value:"'Select columns to display them. Click and drag the box to reorder the columns. These specifications will be saved and persist if you leave and return to the data table.'",computed:!1},description:"",type:{name:"string"},required:!1},findColumnPlaceholderLabel:{defaultValue:{value:"'Find column'",computed:!1},description:"",type:{name:"string"},required:!1},resetToDefaultLabel:{defaultValue:{value:"'Reset to default'",computed:!1},description:"",type:{name:"string"},required:!1},assistiveTextInstructionsLabel:{defaultValue:{value:"'Press space bar to toggle drag drop mode, use arrow keys to move selected elements.'",computed:!1},description:"",type:{name:"string"},required:!1},assistiveTextDisabledInstructionsLabel:{defaultValue:{value:"'Reordering columns are disabled because they are filtered currently.'",computed:!1},description:"",type:{name:"string"},required:!1},selectAllLabel:{defaultValue:{value:"'Column name'",computed:!1},description:"",type:{name:"string"},required:!1},columnDefinitions:{description:"",type:{name:"array"},required:!0},isOpen:{description:"",type:{name:"bool"},required:!0},onSaveColumnPrefs:{description:"",type:{name:"func"},required:!0},originalColumnDefinitions:{description:"",type:{name:"array"},required:!0},setIsTearsheetOpen:{description:"",type:{name:"func"},required:!0}}};const ne=({instance:s})=>{const{onSaveColumnPrefs:n,isTearsheetOpen:a,setIsTearsheetOpen:p,labels:m,...h}=s.customizeColumnsProps,{state:T}=w.useContext(Ae),{featureFlags:v}=T||{};return w.useEffect(()=>{v&&!(v!=null&&v["enable-datagrid-useCustomizeColumns"])&&console.error("Datagrid useCustomizeColumns extension has not been enabled via feature flag.")},[v]),r.jsx(ie,{...h,...m,isOpen:a,setIsTearsheetOpen:p,columnDefinitions:s.allColumns,originalColumnDefinitions:s.columns,onSaveColumnPrefs:b=>{const f=b.filter(_=>!_.isVisible).map(_=>_.id);s.setHiddenColumns(f),typeof s.setColumnOrder=="function"?s.setColumnOrder(b.map(_=>_.id)):console.warn("Column order can not be updated. Did you forget to add 'useColumnOrder' in 'useDatagrid'"),typeof n=="function"&&n(b)}})};ne.propTypes={instance:i.object.isRequired};ne.__docgenInfo={description:"",methods:[],displayName:"TearsheetWrapper",props:{instance:{description:"",type:{name:"object"},required:!0}}};const ht=`${M.prefix}--datagrid`,Q=({onClick:s,setIsTearsheetOpen:n,isTearsheetOpen:a,iconTooltipLabel:p="Customize columns",...m})=>r.jsx(Pe,{...m,renderIcon:h=>r.jsx(Ee,{size:16,...h}),iconDescription:p,tooltipPosition:"bottom",kind:"ghost",hasIconOnly:!0,"test-id":`${ht}__customize-columns-trigger`,onClick:()=>{n(!a),typeof s=="function"&&s()}});Q.defaultProps={onClick:()=>{}};Q.propTypes={iconTooltipLabel:i.string,isTearsheetOpen:i.bool.isRequired,onClick:i.func.isRequired,setIsTearsheetOpen:i.func.isRequired};Q.__docgenInfo={description:"",methods:[],displayName:"ButtonWrapper",props:{iconTooltipLabel:{defaultValue:{value:"'Customize columns'",computed:!1},description:"",type:{name:"string"},required:!1},onClick:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1},isTearsheetOpen:{description:"",type:{name:"bool"},required:!0},setIsTearsheetOpen:{description:"",type:{name:"func"},required:!0}}};const _e=s=>{const[n,a]=w.useState(!1);s.useInstance.push(p=>{const{customizeColumnsProps:m}=p,{labels:h}=m||{};Object.assign(p,{customizeColumnsProps:{...m,isTearsheetOpen:n,setIsTearsheetOpen:a},CustomizeColumnsButton:T=>r.jsx(Q,{iconTooltipLabel:h==null?void 0:h.iconTooltipLabel,isTearsheetOpen:n,setIsTearsheetOpen:a,...T}),CustomizeColumnsTearsheet:ne})})},qe=Ne.useColumnOrder,$e=()=>r.jsx(He,{omitCodedExample:!0,blocks:[{title:"Customizing columns",description:"Customizing columns allows user to reorder and hide certain columns of the datagrid. Consuming component can use the provided callback to save/update according to their persistent strategy.\n- Include `useCustomizeColumns` and `useColumnOrder` hooks (required)\n  - `useColumnOrder` comes from `react-table` but is exported by `@carbon/ibm-products` to be used alongside `useCustomizeColumns`.\n- Implement `options.DatagridActions` component\n  - this component will have props: `datagridState`\n  - render `datagridState.CustomizeColumnsButton` component wherever makes sense.\n- Options available to set:\n  - `options.initialState.hiddenColumns: Array<ColumnId: String>`\n    - Array of column ids that will be hidden after initial render\n    - [react-table doc](https://react-table.tanstack.com/docs/api/useTable#table-options)\n  - `options.initialState.columnOrder: Array<ColumnId: String>`\n    - Order of the columns. Any column ids not in this array will be ordered by their position in the `options.columns`\n    - [react-table doc](https://react-table.tanstack.com/docs/api/useColumnOrder#table-options)\n  - `options.customizeColumnsProps.onSaveColumnPrefs`\n    - type: `Function(Columns: Array<{ColumnId: String, isVisible: Boolean}>) => void`\n    - Callback function when 'Save' button clicked on the narrow tearsheet. It allows consumer to preserve the updated column preference. This output can also be used to compute the `hiddenColumns` and `columnOrder`\n        ",source:{code:`
const columns = React.useMemo(() => defaultHeader, []);
const [data] = useState(makeData(10));
const DatagridActions = (datagridState) => (
  <TableToolbarContent>
    <TableToolbarSearch ... />
    <Button ... />
    <datagridState.CustomizeColumnsButton />
  </TableToolbarContent>
)
const datagridState = useDatagrid(
  {
    columns,
    data,
    initialState: {
      hiddenColumns: ['age'],
      columnOrder: [],
    },
    customizeColumnsProps: {
      onSaveColumnPrefs: (newColDefs) => {
        console.log(newColDefs);
      },
    },
    DatagridActions,
  },
  useCustomizeColumns,
  useColumnOrder,
);

return (
  <Datagrid datagridState={datagridState} />
);
          `}}]});$e.__docgenInfo={description:"",methods:[],displayName:"DocsPage"};const wr={title:"IBM Products/Components/Datagrid/ColumnCustomization",component:ee,tags:["autodocs"],parameters:{styles:ke,docs:{page:$e},layout:"fullscreen"},argTypes:{featureFlags:{table:{disable:!0}}}},ze=`${M.prefix}--datagrid`,De=[{Header:"Row Index",accessor:(s,n)=>n,id:"rowIndex"},{Header:"First Name",accessor:"firstName"},{Header:"Last Name",accessor:"lastName"},{Header:"Age",accessor:"age",width:50},{Header:"Visits",accessor:"visits",width:60},{Header:"Someone 1",accessor:"someone1"},{Header:"Someone 2",accessor:"someone2"},{Header:"Someone 3",accessor:"someone3"},{Header:"Someone 4",accessor:"someone4"},{Header:"Someone 5",accessor:"someone5"},{Header:"Someone 6",accessor:"someone6"},{Header:"Someone 7",accessor:"someone7"},{Header:"Someone 8",accessor:"someone8"},{Header:"Someone 9",accessor:"someone9"},{Header:"Someone 10",accessor:"someone10"}],Y={emptyStateTitle:"Empty state title",emptyStateDescription:"Description text explaining why table is empty",emptyStateSize:"lg",gridTitle:"Data table title",gridDescription:"Additional information if needed",useDenseHeader:!1,rowSize:"lg",rowSizes:[{value:"xl",labelText:"Extra large"},{value:"lg",labelText:"Large"},{value:"md",labelText:"Medium"},{value:"xs",labelText:"Small"}],onRowSizeChange:s=>{console.log("row size changed to: ",s)},rowActions:[{id:"edit",itemText:"Edit",icon:Te,onClick:G("Clicked row action: edit")},{id:"delete",itemText:"Delete",icon:ve,isDelete:!0,onClick:G("Clicked row action: delete")}],customizeColumnsProps:{onSaveColumnPrefs:s=>{console.log(s)},labels:{findColumnPlaceholderLabel:"Find column",resetToDefaultLabel:"Reset to default",customizeTearsheetHeadingLabel:"Customize columns",primaryButtonTextLabel:"Save",secondaryButtonTextLabel:"Cancel",instructionsLabel:"Deselect columns to hide them. Drag rows to change column order. These specifications will be saved if you leave and return to the data table.",iconTooltipLabel:"Customize columns",assistiveTextInstructionsLabel:"Press space bar to toggle drag drop mode, use arrow keys to move selected elements.",assistiveTextDisabledInstructionsLabel:"Reordering columns are disabled because they are filtered currently.",selectAllLabel:"Column name"}}},yt=({...s})=>{const n=K.useMemo(()=>De,[]),[a]=w.useState(ge(10)),p=he({className:"c4p--datagrid__hidden--columns",columns:n,data:a,initialState:{pageSize:10,pageSizes:[5,10,25,50],hiddenColumns:["age"],columnOrder:[]},DatagridActions:ye,DatagridPagination:Ce,...s.defaultGridProps},_e,qe);return r.jsxs(be,{flags:{"enable-datagrid-useCustomizeColumns":!0},children:[r.jsx(ee,{datagridState:p}),r.jsxs("div",{className:`${ze}-story__hidden-column-id-snippet`,children:[r.jsx("p",{children:"Hidden column ids:"}),r.jsx(fe,{type:"multi",children:JSON.stringify(p.state.hiddenColumns,null,2)})]})]})},Ct=({...s})=>r.jsx(yt,{defaultGridProps:{...s}}),we={gridTitle:Y.gridTitle,gridDescription:Y.gridDescription,useDenseHeader:Y.useDenseHeader,customizeColumnsProps:Y.customizeColumnsProps},bt="With column customization",B=Ct.bind({});B.storyName=bt;B.argTypes={gridTitle:O.gridTitle,gridDescription:O.gridDescription,useDenseHeader:O.useDenseHeader,customizeColumnsProps:O.customizeColumnsProps};B.args={...we};const St=({...s})=>{const n=De.slice(2,15),a=K.useMemo(()=>[{Header:"Row Index",accessor:(h,T)=>T,sticky:"left",id:"rowIndex"},{Header:"First Name",accessor:"firstName",disabled:!0},...n,{Header:"",accessor:"actions",sticky:"right",width:48,isAction:!0}],[]),[p]=w.useState(ge(10)),m=he({className:"c4p--datagrid__hidden--columns",columns:a,data:p,ascendingSortableLabelText:"ascending",descendingSortableLabelText:"descending",defaultSortableLabelText:"none",initialState:{pageSize:10,pageSizes:[5,10,25,50],hiddenColumns:["age"],columnOrder:[],sortableColumn:{id:"rowIndex",order:"ASC"}},DatagridActions:ye,DatagridPagination:Ce,rowActions:[{id:"edit",itemText:"Edit",icon:Te,onClick:G("Clicked row action: edit")},{id:"approve",itemText:"Approve",icon:it,onClick:G("Clicked row action: approve")},{id:"delete",itemText:"Delete",icon:ve,isDelete:!0,hasDivider:!0,onClick:G("Clicked row action: delete")}],...s.defaultGridProps},_e,qe,ot,rt,Re);return r.jsxs(be,{flags:{"enable-datagrid-useCustomizeColumns":!0},children:[r.jsx(ee,{datagridState:m}),r.jsxs("div",{className:`${ze}-story__hidden-column-id-snippet`,children:[r.jsx("p",{children:"Hidden column ids:"}),r.jsx(fe,{type:"multi",children:JSON.stringify(m.state.hiddenColumns,null,2)})]})]})},xt=({...s})=>r.jsx(St,{defaultGridProps:{...s}}),Tt="With column customization and frozen columns",V=xt.bind({});V.storyName=Tt;V.argTypes={gridTitle:O.gridTitle,gridDescription:O.gridDescription,useDenseHeader:O.useDenseHeader,customizeColumnsProps:O.customizeColumnsProps};V.args={...we};var le,de,ue;B.parameters={...B.parameters,docs:{...(le=B.parameters)==null?void 0:le.docs,source:{originalSource:`({
  ...args
}) => {
  return <ColumnCustomizationUsage defaultGridProps={{
    ...args
  }} />;
}`,...(ue=(de=B.parameters)==null?void 0:de.docs)==null?void 0:ue.source}}};var ce,me,pe;V.parameters={...V.parameters,docs:{...(ce=V.parameters)==null?void 0:ce.docs,source:{originalSource:`({
  ...args
}) => {
  return <ColumnCustomizationWithFixedColumn defaultGridProps={{
    ...args
  }} />;
}`,...(pe=(me=V.parameters)==null?void 0:me.docs)==null?void 0:pe.source}}};const Lr=["ColumnCustomizationUsageStory","ColumnCustomizationWithFixedColumnAndDisabledStory"];export{B as ColumnCustomizationUsageStory,V as ColumnCustomizationWithFixedColumnAndDisabledStory,Lr as __namedExportsOrder,wr as default};
