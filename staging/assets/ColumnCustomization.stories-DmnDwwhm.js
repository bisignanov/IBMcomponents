import{p as V,j as r,B as ke,C as ge}from"./settings-RejM0MIl.js";import{r as D,R as K}from"./index-BwDkhjyp.js";import{a as U}from"./chunk-MZXVCX43-CM0pFb8Z.js";import{I as Ae,D as te,a as Re,m as he,u as ye,b as He}from"./_storybook-styles-B6KnyuCJ.js";import{S as Ee}from"./StoryDocsPage-3QfPAWAZ.js";import{D as Ce}from"./DatagridActions-TZK_7j5y.js";import{D as be}from"./DatagridPagination-CXBC6uFG.js";import{A as N}from"./getArgTypes-CUsKgYxs.js";import{c as J,aU as Ne}from"./floating-ui.react-DMp4y4mM.js";import{W as xe}from"./index-NU7I9dwG.js";import{r as Oe}from"./index.esm-CrJt065_.js";import{P as o,p as F}from"./index-Dk74W0Oi.js";import"./feature-flags-CaJ_YE9P.js";import{C as Se}from"./Checkbox-BxJ5c5CY.js";import{g as Te}from"./_commonjsHelpers-BosuxZz1.js";import{b as je,c as Be}from"./index-C0xX6qoh.js";import{u as Ve,C as Me,a as le,P as Fe,K as We,b as Ge,D as Ue,c as Ye,r as Je,e as Ke,S as Qe,v as Xe}from"./modifiers.esm-C4IbBq9K.js";import{c as Ze}from"./bucket-5-CkJxodIN.js";import{L as et}from"./bucket-10-BsotGRQh.js";import{g as W}from"./getNodeTextContent-C8IeKkUQ.js";import{u as tt}from"./uuidv4-BQrI85uz.js";import{S as st}from"./Search-CQpZNba5.js";import{T as rt}from"./TearsheetNarrow-B7yg91w5.js";import{u as ot}from"./useActionsColumn-eXPTRlJu.js";import{u as it}from"./useStickyColumn-15YIrejq.js";import{a as ve}from"./bucket-6-W_rBHQkv.js";import{T as _e}from"./bucket-16-WQgD5HPz.js";import{C as nt}from"./events-C3mJejkM.js";import"./index-CJvxHwuA.js";import"./index-CzgULgXp.js";import"./v4-CQkTLCs1.js";import"./devtools-DM-SaWXd.js";import"./TableRow-D4GAcehC.js";import"./wrapComponent-DLIMH2gw.js";import"./bucket-0-BcfJCBD4.js";import"./TableToolbar-9XeADowj.js";import"./Text-DgK8TUAU.js";import"./ErrorEmptyState-CdQOd5FA.js";import"./Link-Gytx0Oe9.js";import"./EmptyState-CX2NPV0Y.js";import"./props-helper-MxF4Ec7y.js";import"./EmptyStateV2-ByKr58Ab.js";import"./iframe-DWk2RqTp.js";import"../sb-preview/runtime.js";import"./ErrorIllustration-DHlDif52.js";import"./index-BONylQH5.js";import"./NoDataEmptyState-BlU1pRV5.js";import"./NoDataIllustration-CafjfHFp.js";import"./NotFoundEmptyState-BeoNAcvY.js";import"./NotFoundIllustration-HJPYCFYl.js";import"./useResizeObserver-CYrpFlRY.js";import"./useIsomorphicEffect-D7JMtAof.js";import"./useWindowResize-DwFaXXYX.js";import"./useControllableState-DwpxGhsf.js";import"./useAttachedMenu-JDAsPBX5.js";import"./mergeRefs-CTUecegF.js";import"./getFocusableElements-BW7cf991.js";import"./index-DEiA5Ca6.js";import"./index-DshjxXYm.js";import"./useClickOutside-Dcd11u7q.js";import"./AccordionItem-Ca1ApQ7o.js";import"./index-DzDmuWYl.js";import"./LayerContext-DbU-6VX4.js";import"./motionConstants-CR5hPmRc.js";import"./tslib.es6-B4_xh3D5.js";import"./use-reduced-motion-BisnjenD.js";import"./index-DkUr2NOz.js";import"./ActionSet-BNPDKGvd.js";import"./ButtonSet-BBETHK0Z.js";import"./InlineLoading-MFTaEf7Q.js";import"./DatePicker-DZDWU3MO.js";import"./FormContext-C7kRVu4t.js";import"./bucket-18-B1hZKqJv.js";import"./bucket-1-BLq-QJNX.js";import"./Dropdown-0xEPvOFl.js";import"./index-mxx-Mve7.js";import"./extends-CCbyfPlC.js";import"./index-DcAOwtUU.js";import"./FormGroup-vcmiRT8k.js";import"./NumberInput-DaowFkqw.js";import"./useNormalizedInputProps-BOQjwhLP.js";import"./bucket-15-Xl1fzU6U.js";import"./RadioButton-DMRFpkTt.js";import"./RadioButtonGroup-B5IEXBc7.js";import"./MultiSelect-BBdaLlUW.js";import"./index-CfyPTyT-.js";import"./usePreviousValue-DDnp_zt4.js";import"./debounce-CI22LTdx.js";import"./toNumber-DVQITUtX.js";import"./TagSet-C-3UtOfC.js";import"./Tag-BgY6Gmf7.js";import"./DefinitionTooltip-CgAlpbRh.js";import"./ComposedModal-BzqiIsg6.js";import"./requiredIfGivenPropIsTruthy-CU7JwK8h.js";import"./wrapFocus-CuszVIVc.js";import"./index-C8dDhlyb.js";import"./usePortalTarget-BvuJDQDm.js";import"./SkeletonText-CAZWEpYR.js";import"./bucket-14-Cn0Kqmaq.js";import"./index-CmlJpOw_.js";import"./bucket-17-Ct9mOVQH.js";import"./index-CCSPz6By.js";import"./index-C2eUe6cH.js";import"./index-DrFu-skq.js";import"./story-helper-BJP0smTN.js";import"./index-CDqmW12E.js";import"./bucket-12-jEhP6zSm.js";import"./TableToolbarSearch-B5YNsK_y.js";import"./bucket-13-Bb3ER_7z.js";import"./Select-CcTS5byt.js";import"./SelectItem-BuR0Rw27.js";import"./index-Dj5oW9Fi.js";import"./bucket-9-BKm2PPAL.js";import"./TearsheetShell-CzL1ltLW.js";import"./useFocus-CFr5E596.js";import"./wait-CTNFjQS8.js";var ee={exports:{}};(function(s,i){Object.defineProperty(i,"__esModule",{value:!0});function n(e){return typeof e=="object"&&!("toString"in e)?Object.prototype.toString.call(e).slice(8,-1):e}var u=typeof process=="object"&&!0;function c(e,t){if(!e)throw u?new Error("Invariant failed"):new Error(t())}i.invariant=c;var h=Object.prototype.hasOwnProperty,_=Array.prototype.splice,q=Object.prototype.toString;function T(e){return q.call(e).slice(8,-1)}var f=Object.assign||function(e,t){return $(t).forEach(function(d){h.call(t,d)&&(e[d]=t[d])}),e},$=typeof Object.getOwnPropertySymbols=="function"?function(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.keys(e)};function z(e){return Array.isArray(e)?f(e.constructor(e.length),e):T(e)==="Map"?new Map(e):T(e)==="Set"?new Set(e):e&&typeof e=="object"?f(Object.create(Object.getPrototypeOf(e)),e):e}var R=function(){function e(){this.commands=f({},H),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(t,d){return t===d},this.update.newContext=function(){return new e().update}}return Object.defineProperty(e.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(t){this.update.isEquals=t},enumerable:!0,configurable:!0}),e.prototype.extend=function(t,d){this.commands[t]=d},e.prototype.update=function(t,d){var m=this,l=typeof d=="function"?{$apply:d}:d;Array.isArray(t)&&Array.isArray(l)||c(!Array.isArray(l),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),c(typeof l=="object"&&l!==null,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the "+("following commands: "+Object.keys(m.commands).join(", ")+".")});var y=t;return $(l).forEach(function(b){if(h.call(m.commands,b)){var X=t===y;y=m.commands[b](l[b],y,l,t),X&&m.isEquals(y,t)&&(y=t)}else{var x=T(t)==="Map"?m.update(t.get(b),l[b]):m.update(t[b],l[b]),k=T(y)==="Map"?y.get(b):y[b];(!m.isEquals(x,k)||typeof x>"u"&&!h.call(t,b))&&(y===t&&(y=z(t)),T(y)==="Map"?y.set(b,x):y[b]=x)}}),y},e}();i.Context=R;var H={$push:function(e,t,d){return L(t,d,"$push"),e.length?t.concat(e):t},$unshift:function(e,t,d){return L(t,d,"$unshift"),e.length?e.concat(t):t},$splice:function(e,t,d,m){return a(t,d),e.forEach(function(l){g(l),t===m&&l.length&&(t=z(m)),_.apply(t,l)}),t},$set:function(e,t,d){return p(d),e},$toggle:function(e,t){I(e,"$toggle");var d=e.length?z(t):t;return e.forEach(function(m){d[m]=!t[m]}),d},$unset:function(e,t,d,m){return I(e,"$unset"),e.forEach(function(l){Object.hasOwnProperty.call(t,l)&&(t===m&&(t=z(m)),delete t[l])}),t},$add:function(e,t,d,m){return P(t,"$add"),I(e,"$add"),T(t)==="Map"?e.forEach(function(l){var y=l[0],b=l[1];t===m&&t.get(y)!==b&&(t=z(m)),t.set(y,b)}):e.forEach(function(l){t===m&&!t.has(l)&&(t=z(m)),t.add(l)}),t},$remove:function(e,t,d,m){return P(t,"$remove"),I(e,"$remove"),e.forEach(function(l){t===m&&t.has(l)&&(t=z(m)),t.delete(l)}),t},$merge:function(e,t,d,m){return C(t,e),$(e).forEach(function(l){e[l]!==t[l]&&(t===m&&(t=z(m)),t[l]=e[l])}),t},$apply:function(e,t){return S(e),e(t)}},w=new R;i.isEquals=w.update.isEquals,i.extend=w.extend,i.default=w.update,i.default.default=s.exports=f(i.default,i);function L(e,t,d){c(Array.isArray(e),function(){return"update(): expected target of "+n(d)+" to be an array; got "+n(e)+"."}),I(t[d],d)}function I(e,t){c(Array.isArray(e),function(){return"update(): expected spec of "+n(t)+" to be an array; got "+n(e)+". Did you forget to wrap your parameter in an array?"})}function a(e,t){c(Array.isArray(e),function(){return"Expected $splice target to be an array; got "+n(e)}),g(t.$splice)}function g(e){c(Array.isArray(e),function(){return"update(): expected spec of $splice to be an array of arrays; got "+n(e)+". Did you forget to wrap your parameters in an array?"})}function S(e){c(typeof e=="function",function(){return"update(): expected spec of $apply to be a function; got "+n(e)+"."})}function p(e){c(Object.keys(e).length===1,function(){return"Cannot have more than one key in an object with $set"})}function C(e,t){c(t&&typeof t=="object",function(){return"update(): $merge expects a spec of type 'object'; got "+n(t)}),c(e&&typeof e=="object",function(){return"update(): $merge expects a target of type 'object'; got "+n(e)})}function P(e,t){var d=T(e);c(d==="Map"||d==="Set",function(){return"update(): "+n(t)+" expects a target of type Set or Map; got "+n(d)})}})(ee,ee.exports);var at=ee.exports;const lt=Te(at);var dt=je,ut=Be,ct="[object Boolean]";function mt(s){return s===!0||s===!1||ut(s)&&dt(s)==ct}var pt=mt;const ft=Te(pt),Z=s=>ft(s.isVisible)?s.isVisible:!0,E=`${V.prefix}--datagrid`,se=({id:s,children:i,classList:n,disabled:u,ariaLabel:c,isSticky:h,selected:_})=>{const{attributes:q,isDragging:T,listeners:f,setNodeRef:$,transform:z,transition:R}=Ve({disabled:u,id:s}),H=r.jsxs(r.Fragment,{children:[r.jsx("div",{className:J({disabled:u},`${E}__draggable-handleStyle`),children:h?r.jsx(et,{size:16}):r.jsx(Ze,{size:16})}),i]}),w={transform:u?void 0:Me.Transform.toString(z),transition:R};return r.jsxs("li",{className:J(n,`${E}__draggable-handleHolder`,{[`${E}__draggable-handleHolder--selected`]:_,[`${E}__draggable-handleHolder--sticky`]:h,[`${E}__draggable-handleHolder--dragging`]:T}),id:s,ref:$,style:w,...q,...f,"aria-selected":_,role:"option",children:[r.jsx("span",{className:`${E}__shared-ui--assistive-text`,children:c}),r.jsx("div",{className:J({[`${E}__draggable-handleStyle`]:!u},[`${E}__draggable-handleHolder-droppable`]),children:H})]})};se.propTypes={ariaLabel:o.string.isRequired,children:o.element.isRequired,classList:o.string,disabled:o.bool,id:o.string.isRequired,isSticky:o.bool,selected:o.bool};se.__docgenInfo={description:"",methods:[],displayName:"DraggableElement",props:{ariaLabel:{required:!0,tsType:{name:"string"},description:"",type:{name:"string"}},children:{required:!0,tsType:{name:"ReactNode"},description:"",type:{name:"element"}},classList:{required:!1,tsType:{name:"string"},description:"",type:{name:"string"}},disabled:{required:!1,tsType:{name:"boolean"},description:"",type:{name:"bool"}},id:{required:!0,tsType:{name:"string"},description:"",type:{name:"string"}},isSticky:{required:!1,tsType:{name:"boolean"},description:"",type:{name:"bool"}},selected:{required:!1,tsType:{name:"boolean"},description:"",type:{name:"bool"}}},composes:["PropsWithChildren"]};const G=`${V.prefix}--datagrid`,O=(s,i)=>s&&i&&s.id===i.id,re=({columns:s,filterString:i,id:n,moveElement:u,onSelectColumn:c,setAriaRegionText:h})=>{const _=`${G}__draggable-item`,q=s.filter(a=>W(a.Header).trim().length!==0).filter(Boolean).filter(a=>!a.isAction).filter(a=>a.id!=="spacer").filter(a=>i.length===0||W(a.Header).toLowerCase().includes(i)),f=(()=>{const a=[...q];return a.forEach(g=>{g.sticky&&(g.disabled=!0)}),a})(),$=a=>{var m;const{active:g,over:S}=a,p=f.filter(l=>l.id===S.id);if(p!=null&&p.length&&((m=p[0])!=null&&m.disabled))return;const C=f.findIndex(l=>O(l,g)),P=f.findIndex(l=>O(l,S)),e=W(f[C].Header);h(`${e} dropped. New position ${P+1} of ${f.length}.`);const t=s.findIndex(l=>O(l,g)),d=s.findIndex(l=>O(l,S));u(t,d)},z=a=>{const{active:g}=a,S=f.findIndex(C=>O(C,g)),p=W(f[S].Header);h(`${p} grabbed. Current position ${S+1} of ${f.length}.`)},R=a=>{const{active:g,over:S}=a,p=f.findIndex(e=>O(e,g)),C=f.findIndex(e=>O(e,S)),P=W(f[p].Header);h(`${P} grabbed. Original position ${p+1}, new position ${C+1} of ${f.length}.`)},H=le(Fe,{activationConstraint:{distance:4}}),w=le(We,{coordinateGetter:(a,g)=>{const{currentCoordinates:S}=g;let p=a.target;for(;p&&!p.classList.contains(_);)p=p.parentNode;const C=p.offsetHeight;switch(a.code){case"ArrowRight":case"ArrowLeft":return S;case"ArrowUp":return{...S,y:S.y-C};case"ArrowDown":return{...S,y:S.y+C}}}}),L=Ge(H,w),I=(a,g)=>{if(a.code==="Space")return c(g,!Z(g)),a.preventDefault(),a.stopPropagation(),!1};return r.jsx(Ue,{collisionDetection:Ye,onDragEnd:$,onDragStart:z,onDragMove:R,sensors:L,modifiers:[Je,Ke],children:r.jsxs(r.Fragment,{children:[r.jsx("div",{className:`${G}__draggable-underlay`,"aria-hidden":"true",children:q.map(a=>r.jsx("div",{className:`${G}__draggable-underlay-item`},a.id))},`draggable-underlay-${n}`),r.jsx(Qe,{items:f,strategy:Xe,children:q.map(a=>{const g=W(a.Header),p=g.split(new RegExp(`(${i})`,"gi")).map(t=>t.toLowerCase()===i.toLowerCase()?`<strong>${t}</strong>`:t).join(""),C=!!a.sticky,P=a.disabled,e=r.jsxs(r.Fragment,{children:[r.jsx(Se,{checked:Z(a),disabled:P||C,onChange:(t,{checked:d})=>c(a,d),id:`${G}__customization-column-${a.id}`,labelText:g,title:g,className:`${G}__customize-columns-checkbox`,hideLabel:!0,onKeyDown:t=>I(t,a)}),r.jsx("div",{dangerouslySetInnerHTML:{__html:p},className:`${G}__customize-columns-checkbox-visible-label`})]});return r.jsx(se,{classList:_,id:a.id,disabled:i.length>0||C,ariaLabel:g,isSticky:C,selected:Z(a),children:e},a.id)})})]})})};re.propTypes={columns:F.PropTypes.array.isRequired,filterString:F.PropTypes.string.isRequired,id:F.PropTypes.string.isRequired,moveElement:F.PropTypes.func.isRequired,onSelectColumn:F.PropTypes.func.isRequired,setAriaRegionText:F.PropTypes.func.isRequired};re.__docgenInfo={description:"",methods:[],displayName:"DraggableItemsList",props:{columns:{description:"",type:{name:"array"},required:!0},filterString:{description:"",type:{name:"string"},required:!0},id:{description:"",type:{name:"string"},required:!0},moveElement:{description:"",type:{name:"func"},required:!0},onSelectColumn:{description:"",type:{name:"func"},required:!0},setAriaRegionText:{description:"",type:{name:"func"},required:!0}}};const A=`${V.prefix}--datagrid`,oe=({getVisibleColumnsCount:s,filterString:i,columns:n,setColumnsObject:u,onSelectColumn:c,assistiveTextInstructionsLabel:h,assistiveTextDisabledInstructionsLabel:_,selectAllLabel:q,customizeTearsheetHeadingLabel:T})=>{const f=D.useRef(tt()),$=D.useRef(null),[z,R]=K.useState(""),H=K.useCallback((L,I)=>{const a=n[L];u(lt(n,{$splice:[[L,1],[I,0,a]]}))},[n,u]),w=n==null?void 0:n.filter(L=>!L.sticky);return r.jsx("div",{className:`${A}__customize-columns-column-list`,ref:$,children:r.jsxs("ol",{className:`${A}__customize-columns-column-list--focus`,role:"listbox","aria-label":T,"aria-describedby":`${A}__customize-columns--instructions`,tabIndex:0,children:[r.jsx("span",{"aria-live":"assertive",className:`${A}__shared-ui--assistive-text`,children:z}),r.jsx("span",{id:`${A}__customize-columns--instructions`,className:`${A}__shared-ui--assistive-text`,children:i.length===0?h:_}),r.jsx("div",{id:`${A}__customize-columns-select-all`,className:J(`${A}__customize-columns-select-all`,{[`${A}__customize-columns-select-all--selected`]:s()>0}),selected:s()>0,children:r.jsx(Se,{className:`${A}__customize-columns-checkbox-wrapper`,checked:s()===n.length,indeterminate:s()<n.length&&s()>0,onChange:()=>{c(w,s()!==n.length)},id:`${A}__customization-column-select-all`,labelText:q})}),r.jsx(re,{id:f.current,columns:n,filterString:i,moveElement:H,setAriaRegionText:R,onSelectColumn:c})]})})};oe.propTypes={assistiveTextDisabledInstructionsLabel:o.string,assistiveTextInstructionsLabel:o.string,columns:o.array.isRequired,customizeTearsheetHeadingLabel:o.string,disabledInstructionsLabel:o.string,filterString:o.string.isRequired,getVisibleColumnsCount:o.func.isRequired,instructionsLabel:o.string,onSelectColumn:o.func.isRequired,selectAllLabel:o.string,setColumnStatus:o.func,setColumnsObject:o.func.isRequired};oe.__docgenInfo={description:"",methods:[],displayName:"Columns",props:{assistiveTextDisabledInstructionsLabel:{description:"",type:{name:"string"},required:!1},assistiveTextInstructionsLabel:{description:"",type:{name:"string"},required:!1},columns:{description:"",type:{name:"array"},required:!0},customizeTearsheetHeadingLabel:{description:"",type:{name:"string"},required:!1},disabledInstructionsLabel:{description:"",type:{name:"string"},required:!1},filterString:{description:"",type:{name:"string"},required:!0},getVisibleColumnsCount:{description:"",type:{name:"func"},required:!0},instructionsLabel:{description:"",type:{name:"string"},required:!1},onSelectColumn:{description:"",type:{name:"func"},required:!0},selectAllLabel:{description:"",type:{name:"string"},required:!1},setColumnStatus:{description:"",type:{name:"func"},required:!1},setColumnsObject:{description:"",type:{name:"func"},required:!0}}};const gt=`${V.prefix}--datagrid`,ie=({searchText:s,setSearchText:i,findColumnPlaceholderLabel:n})=>r.jsx("div",{className:`${gt}__customize-columns-tearsheet--actions`,children:r.jsx(st,{placeholder:n,value:s,size:"lg",labelText:n,onChange:u=>{i(u.target.value)}})});ie.propTypes={columns:o.array.isRequired,findColumnPlaceholderLabel:o.string,originalColumnDefinitions:o.array.isRequired,resetToDefaultLabel:o.string,searchText:o.string.isRequired,setColumnsObject:o.func.isRequired,setSearchText:o.func.isRequired};ie.__docgenInfo={description:"",methods:[],displayName:"Actions",props:{columns:{description:"",type:{name:"array"},required:!0},findColumnPlaceholderLabel:{description:"",type:{name:"string"},required:!1},originalColumnDefinitions:{description:"",type:{name:"array"},required:!0},resetToDefaultLabel:{description:"",type:{name:"string"},required:!1},searchText:{description:"",type:{name:"string"},required:!0},setColumnsObject:{description:"",type:{name:"func"},required:!0},setSearchText:{description:"",type:{name:"func"},required:!0}}};const ht=`${V.prefix}--datagrid`,ne=({isOpen:s,setIsTearsheetOpen:i,onSaveColumnPrefs:n,columnDefinitions:u,originalColumnDefinitions:c,customizeTearsheetHeadingLabel:h="Customize columns",primaryButtonTextLabel:_="Save",secondaryButtonTextLabel:q="Cancel",instructionsLabel:T="Select columns to display them. Click and drag the box to reorder the columns. These specifications will be saved and persist if you leave and return to the data table.",findColumnPlaceholderLabel:f="Find column",resetToDefaultLabel:$="Reset to default",assistiveTextInstructionsLabel:z="Press space bar to toggle drag drop mode, use arrow keys to move selected elements.",assistiveTextDisabledInstructionsLabel:R="Reordering columns are disabled because they are filtered currently.",selectAllLabel:H="Column name"})=>{const[w,L]=D.useState(""),[I,a]=D.useState(""),[g,S]=D.useState(""),[p,C]=D.useState(u),[P,e]=D.useState(!1),t=D.useRef(),d=()=>{C(u),i(!1)},m=()=>{i(!1);const x=p.map(k=>({id:k.id,isVisible:k.isVisible}));n(x)},l=(x,k)=>{const M=p.map(v=>Array.isArray(x)?x.includes(v)&&v.canFilter&&!v.disabled?{...v,isVisible:k}:v:x.id===v.id?{...v,isVisible:k}:v),Ie=M.filter(v=>v.isVisible&&!["datagridSelection","actions"].includes(v.id)).length,Pe=M.map(v=>Ie>0?["datagridSelection","actions"].includes(v.id)?{...v,isVisible:!0}:v:["datagridSelection","actions"].includes(v.id)?{...v,isVisible:!1}:v);C(Pe),y()},y=()=>{P||e(!0)},b=D.useCallback(()=>p.filter(x=>x.isVisible).length,[p]),X=g.trim().toLowerCase();return D.useEffect(()=>{t.current!==u&&C(u);const x=p.filter(M=>M.id==="actions").length,k=p.filter(M=>M.id==="datagridSelection").length;L(b()-x-k<0?0:b()-x-k),a(p.length-x-k),t.current=u},[b,p,u]),r.jsxs(rt,{className:`${ht}__customize-columns-tearsheet`,open:s,title:`${h} (${w}/${I})`,description:T,actions:[{kind:"secondary",label:q,onClick:d},{kind:"primary",label:_,onClick:m,disabled:!P}],children:[r.jsx(ie,{columns:p,originalColumnDefinitions:c,searchText:g,setColumnsObject:x=>{C(x),y()},setSearchText:S,findColumnPlaceholderLabel:f,resetToDefaultLabel:$}),s&&r.jsx(oe,{assistiveTextInstructionsLabel:z,assistiveTextDisabledInstructionsLabel:R,getVisibleColumnsCount:b,columns:p,filterString:X,onSelectColumn:l,setColumnsObject:x=>{C(x),y()},selectAllLabel:H,customizeTearsheetHeadingLabel:h})]})};ne.propTypes={assistiveTextDisabledInstructionsLabel:o.string,assistiveTextInstructionsLabel:o.string,columnDefinitions:o.array.isRequired,customizeTearsheetHeadingLabel:o.string,findColumnPlaceholderLabel:o.string,instructionsLabel:o.string,isOpen:o.bool.isRequired,onSaveColumnPrefs:o.func.isRequired,originalColumnDefinitions:o.array.isRequired,primaryButtonTextLabel:o.string,resetToDefaultLabel:o.string,secondaryButtonTextLabel:o.string,selectAllLabel:o.string,setIsTearsheetOpen:o.func.isRequired};ne.__docgenInfo={description:"",methods:[],displayName:"CustomizeColumnsTearsheet",props:{customizeTearsheetHeadingLabel:{defaultValue:{value:"'Customize columns'",computed:!1},description:"",type:{name:"string"},required:!1},primaryButtonTextLabel:{defaultValue:{value:"'Save'",computed:!1},description:"",type:{name:"string"},required:!1},secondaryButtonTextLabel:{defaultValue:{value:"'Cancel'",computed:!1},description:"",type:{name:"string"},required:!1},instructionsLabel:{defaultValue:{value:"'Select columns to display them. Click and drag the box to reorder the columns. These specifications will be saved and persist if you leave and return to the data table.'",computed:!1},description:"",type:{name:"string"},required:!1},findColumnPlaceholderLabel:{defaultValue:{value:"'Find column'",computed:!1},description:"",type:{name:"string"},required:!1},resetToDefaultLabel:{defaultValue:{value:"'Reset to default'",computed:!1},description:"",type:{name:"string"},required:!1},assistiveTextInstructionsLabel:{defaultValue:{value:"'Press space bar to toggle drag drop mode, use arrow keys to move selected elements.'",computed:!1},description:"",type:{name:"string"},required:!1},assistiveTextDisabledInstructionsLabel:{defaultValue:{value:"'Reordering columns are disabled because they are filtered currently.'",computed:!1},description:"",type:{name:"string"},required:!1},selectAllLabel:{defaultValue:{value:"'Column name'",computed:!1},description:"",type:{name:"string"},required:!1},columnDefinitions:{description:"",type:{name:"array"},required:!0},isOpen:{description:"",type:{name:"bool"},required:!0},onSaveColumnPrefs:{description:"",type:{name:"func"},required:!0},originalColumnDefinitions:{description:"",type:{name:"array"},required:!0},setIsTearsheetOpen:{description:"",type:{name:"func"},required:!0}}};const ae=({instance:s})=>{const{onSaveColumnPrefs:i,isTearsheetOpen:n,setIsTearsheetOpen:u,labels:c,...h}=s.customizeColumnsProps,{state:_}=D.useContext(Ae),{featureFlags:q}=_||{};return D.useEffect(()=>{q&&!(q!=null&&q["enable-datagrid-useCustomizeColumns"])&&console.error("Datagrid useCustomizeColumns extension has not been enabled via feature flag.")},[q]),r.jsx(ne,{...h,...c,isOpen:n,setIsTearsheetOpen:u,columnDefinitions:s.allColumns,originalColumnDefinitions:s.columns,onSaveColumnPrefs:T=>{const f=T.filter($=>!$.isVisible).map($=>$.id);s.setHiddenColumns(f),typeof s.setColumnOrder=="function"?s.setColumnOrder(T.map($=>$.id)):console.warn("Column order can not be updated. Did you forget to add 'useColumnOrder' in 'useDatagrid'"),typeof i=="function"&&i(T)}})};ae.propTypes={instance:o.object.isRequired};ae.__docgenInfo={description:"",methods:[],displayName:"TearsheetWrapper",props:{instance:{description:"",type:{name:"object"},required:!0}}};const yt=`${V.prefix}--datagrid`,Q=({onClick:s,setIsTearsheetOpen:i,isTearsheetOpen:n,iconTooltipLabel:u="Customize columns",...c})=>r.jsx(ke,{...c,renderIcon:h=>r.jsx(Ne,{size:16,...h}),iconDescription:u,tooltipPosition:"bottom",kind:"ghost",hasIconOnly:!0,"test-id":`${yt}__customize-columns-trigger`,onClick:()=>{i(!n),typeof s=="function"&&s()}});Q.defaultProps={onClick:()=>{}};Q.propTypes={iconTooltipLabel:o.string,isTearsheetOpen:o.bool.isRequired,onClick:o.func.isRequired,setIsTearsheetOpen:o.func.isRequired};Q.__docgenInfo={description:"",methods:[],displayName:"ButtonWrapper",props:{iconTooltipLabel:{defaultValue:{value:"'Customize columns'",computed:!1},description:"",type:{name:"string"},required:!1},onClick:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1},isTearsheetOpen:{description:"",type:{name:"bool"},required:!0},setIsTearsheetOpen:{description:"",type:{name:"func"},required:!0}}};const qe=s=>{const[i,n]=D.useState(!1);s.useInstance.push(u=>{const{customizeColumnsProps:c}=u,{labels:h}=c||{};Object.assign(u,{customizeColumnsProps:{...c,isTearsheetOpen:i,setIsTearsheetOpen:n},CustomizeColumnsButton:_=>r.jsx(Q,{iconTooltipLabel:h==null?void 0:h.iconTooltipLabel,isTearsheetOpen:i,setIsTearsheetOpen:n,..._}),CustomizeColumnsTearsheet:ae})})},$e=Oe.useColumnOrder,ze=()=>r.jsx(Ee,{omitCodedExample:!0,blocks:[{title:"Customizing columns",description:"Customizing columns allows user to reorder and hide certain columns of the datagrid. Consuming component can use the provided callback to save/update according to their persistent strategy.\n- Include `useCustomizeColumns` and `useColumnOrder` hooks (required)\n  - `useColumnOrder` comes from `react-table` but is exported by `@carbon/ibm-products` to be used alongside `useCustomizeColumns`.\n- Implement `options.DatagridActions` component\n  - this component will have props: `datagridState`\n  - render `datagridState.CustomizeColumnsButton` component wherever makes sense.\n- Options available to set:\n  - `options.initialState.hiddenColumns: Array<ColumnId: String>`\n    - Array of column ids that will be hidden after initial render\n    - [react-table doc](https://react-table.tanstack.com/docs/api/useTable#table-options)\n  - `options.initialState.columnOrder: Array<ColumnId: String>`\n    - Order of the columns. Any column ids not in this array will be ordered by their position in the `options.columns`\n    - [react-table doc](https://react-table.tanstack.com/docs/api/useColumnOrder#table-options)\n  - `options.customizeColumnsProps.onSaveColumnPrefs`\n    - type: `Function(Columns: Array<{ColumnId: String, isVisible: Boolean}>) => void`\n    - Callback function when 'Save' button clicked on the narrow tearsheet. It allows consumer to preserve the updated column preference. This output can also be used to compute the `hiddenColumns` and `columnOrder`\n        ",source:{code:`
const columns = React.useMemo(() => defaultHeader, []);
const [data] = useState(makeData(10));
const DatagridActions = (datagridState) => (
  <TableToolbarContent>
    <TableToolbarSearch ... />
    <Button ... />
    <datagridState.CustomizeColumnsButton />
  </TableToolbarContent>
)
const datagridState = useDatagrid(
  {
    columns,
    data,
    initialState: {
      hiddenColumns: ['age'],
      columnOrder: [],
    },
    customizeColumnsProps: {
      onSaveColumnPrefs: (newColDefs) => {
        console.log(newColDefs);
      },
    },
    DatagridActions,
  },
  useCustomizeColumns,
  useColumnOrder,
);

return (
  <Datagrid datagridState={datagridState} />
);
          `}}]});ze.__docgenInfo={description:"",methods:[],displayName:"DocsPage"};const Pr={title:"IBM Products/Components/Datagrid/ColumnCustomization",component:te,tags:["autodocs"],parameters:{styles:Re,docs:{page:ze},layout:"fullscreen"},argTypes:{featureFlags:{table:{disable:!0}}}},De=`${V.prefix}--datagrid`,we=[{Header:"Row Index",accessor:(s,i)=>i,id:"rowIndex"},{Header:"First Name",accessor:"firstName"},{Header:"Last Name",accessor:"lastName"},{Header:"Age",accessor:"age",width:50},{Header:"Visits",accessor:"visits",width:60},{Header:"Someone 1",accessor:"someone1"},{Header:"Someone 2",accessor:"someone2"},{Header:"Someone 3",accessor:"someone3"},{Header:"Someone 4",accessor:"someone4"},{Header:"Someone 5",accessor:"someone5"},{Header:"Someone 6",accessor:"someone6"},{Header:"Someone 7",accessor:"someone7"},{Header:"Someone 8",accessor:"someone8"},{Header:"Someone 9",accessor:"someone9"},{Header:"Someone 10",accessor:"someone10"}],Y={emptyStateTitle:"Empty state title",emptyStateDescription:"Description text explaining why table is empty",emptyStateSize:"lg",gridTitle:"Data table title",gridDescription:"Additional information if needed",useDenseHeader:!1,rowSize:"lg",rowSizes:[{value:"xl",labelText:"Extra large"},{value:"lg",labelText:"Large"},{value:"md",labelText:"Medium"},{value:"xs",labelText:"Small"}],onRowSizeChange:s=>{console.log("row size changed to: ",s)},rowActions:[{id:"edit",itemText:"Edit",icon:ve,onClick:U("Clicked row action: edit")},{id:"delete",itemText:"Delete",icon:_e,isDelete:!0,onClick:U("Clicked row action: delete")}],customizeColumnsProps:{onSaveColumnPrefs:s=>{console.log(s)},labels:{findColumnPlaceholderLabel:"Find column",resetToDefaultLabel:"Reset to default",customizeTearsheetHeadingLabel:"Customize columns",primaryButtonTextLabel:"Save",secondaryButtonTextLabel:"Cancel",instructionsLabel:"Deselect columns to hide them. Drag rows to change column order. These specifications will be saved if you leave and return to the data table.",iconTooltipLabel:"Customize columns",assistiveTextInstructionsLabel:"Press space bar to toggle drag drop mode, use arrow keys to move selected elements.",assistiveTextDisabledInstructionsLabel:"Reordering columns are disabled because they are filtered currently.",selectAllLabel:"Column name"}}},Ct=({...s})=>{const i=K.useMemo(()=>we,[]),[n]=D.useState(he(10)),u=ye({className:"c4p--datagrid__hidden--columns",columns:i,data:n,initialState:{pageSize:10,pageSizes:[5,10,25,50],hiddenColumns:["age"],columnOrder:[]},DatagridActions:Ce,DatagridPagination:be,...s.defaultGridProps},qe,$e);return r.jsxs(xe,{flags:{"enable-datagrid-useCustomizeColumns":!0},children:[r.jsx(te,{datagridState:u}),r.jsxs("div",{className:`${De}-story__hidden-column-id-snippet`,children:[r.jsx("p",{children:"Hidden column ids:"}),r.jsx(ge,{type:"multi",children:JSON.stringify(u.state.hiddenColumns,null,2)})]})]})},bt=({...s})=>r.jsx(Ct,{defaultGridProps:{...s}}),Le={gridTitle:Y.gridTitle,gridDescription:Y.gridDescription,useDenseHeader:Y.useDenseHeader,customizeColumnsProps:Y.customizeColumnsProps},xt="With column customization",j=bt.bind({});j.storyName=xt;j.argTypes={gridTitle:N.gridTitle,gridDescription:N.gridDescription,useDenseHeader:N.useDenseHeader,customizeColumnsProps:N.customizeColumnsProps};j.args={...Le};const St=({...s})=>{const i=we.slice(2,15),n=K.useMemo(()=>[{Header:"Row Index",accessor:(h,_)=>_,sticky:"left",id:"rowIndex"},{Header:"First Name",accessor:"firstName",disabled:!0},...i,{Header:"",accessor:"actions",sticky:"right",width:48,isAction:!0}],[]),[u]=D.useState(he(10)),c=ye({className:"c4p--datagrid__hidden--columns",columns:n,data:u,ascendingSortableLabelText:"ascending",descendingSortableLabelText:"descending",defaultSortableLabelText:"none",initialState:{pageSize:10,pageSizes:[5,10,25,50],hiddenColumns:["age"],columnOrder:[],sortableColumn:{id:"rowIndex",order:"ASC"}},DatagridActions:Ce,DatagridPagination:be,rowActions:[{id:"edit",itemText:"Edit",icon:ve,onClick:U("Clicked row action: edit")},{id:"approve",itemText:"Approve",icon:nt,onClick:U("Clicked row action: approve")},{id:"delete",itemText:"Delete",icon:_e,isDelete:!0,hasDivider:!0,onClick:U("Clicked row action: delete")}],...s.defaultGridProps},qe,$e,it,ot,He);return r.jsxs(xe,{flags:{"enable-datagrid-useCustomizeColumns":!0},children:[r.jsx(te,{datagridState:c}),r.jsxs("div",{className:`${De}-story__hidden-column-id-snippet`,children:[r.jsx("p",{children:"Hidden column ids:"}),r.jsx(ge,{type:"multi",children:JSON.stringify(c.state.hiddenColumns,null,2)})]})]})},Tt=({...s})=>r.jsx(St,{defaultGridProps:{...s}}),vt="With column customization and frozen columns",B=Tt.bind({});B.storyName=vt;B.argTypes={gridTitle:N.gridTitle,gridDescription:N.gridDescription,useDenseHeader:N.useDenseHeader,customizeColumnsProps:N.customizeColumnsProps};B.args={...Le};var de,ue,ce;j.parameters={...j.parameters,docs:{...(de=j.parameters)==null?void 0:de.docs,source:{originalSource:`({
  ...args
}) => {
  return <ColumnCustomizationUsage defaultGridProps={{
    ...args
  }} />;
}`,...(ce=(ue=j.parameters)==null?void 0:ue.docs)==null?void 0:ce.source}}};var me,pe,fe;B.parameters={...B.parameters,docs:{...(me=B.parameters)==null?void 0:me.docs,source:{originalSource:`({
  ...args
}) => {
  return <ColumnCustomizationWithFixedColumn defaultGridProps={{
    ...args
  }} />;
}`,...(fe=(pe=B.parameters)==null?void 0:pe.docs)==null?void 0:fe.source}}};const kr=["ColumnCustomizationUsageStory","ColumnCustomizationWithFixedColumnAndDisabledStory"];export{j as ColumnCustomizationUsageStory,B as ColumnCustomizationWithFixedColumnAndDisabledStory,kr as __namedExportsOrder,Pr as default};
