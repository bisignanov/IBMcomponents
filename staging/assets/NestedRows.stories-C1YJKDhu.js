import{p as Q,j as l,c as $}from"./settings-Bk-Ww79A.js";import{r as x,R as f}from"./index-BwDkhjyp.js";import{a as G}from"./chunk-MZXVCX43-CM0pFb8Z.js";import{D as N,a as Z,m as D,u as z}from"./_storybook-styles-h2dJWUFc.js";import{D as H}from"./DatagridActions-CW0O7ass.js";import{A as e}from"./getArgTypes-CUsKgYxs.js";import{S as ee}from"./StoryDocsPage-Cy75T9UZ.js";import{c as T}from"./useMergedRefs-DoviDd4t.js";import{u as te}from"./useFocusRowExpander-9BajiKyr.js";import{h as oe}from"./events-CiqBCP_Q.js";import{u as re}from"./useSelectRows-CY9EhYY1.js";import{a as se}from"./bucket-6-GhvU-pGQ.js";import{T as ie}from"./bucket-16-BPBZChqC.js";import"./_commonjsHelpers-BosuxZz1.js";import"./index-CJvxHwuA.js";import"./index-Dk74W0Oi.js";import"./index-8ToAQMOn.js";import"./index-BONylQH5.js";import"./v4-CQkTLCs1.js";import"./devtools-jK7s13u1.js";import"./feature-flags-B58iM6ui.js";import"./TableRow-avmtjWls.js";import"./wrapComponent-Bvlqi5D4.js";import"./bucket-0-W33F5V9e.js";import"./TableToolbar-gvgihfDM.js";import"./Text-BVB9JT_I.js";import"./ErrorEmptyState-DnW2J6se.js";import"./Link-BwB-I-vI.js";import"./EmptyState-D7C8Tfls.js";import"./props-helper-DKwMo5Mj.js";import"./EmptyStateV2-BYPEbPpC.js";import"./iframe-r8cxUnT0.js";import"../sb-preview/runtime.js";import"./ErrorIllustration-BYUfgo6s.js";import"./uuidv4-BQrI85uz.js";import"./NoDataEmptyState-CcxyGdLi.js";import"./NoDataIllustration-BN7hR1wg.js";import"./NotFoundEmptyState-B3XjHmUG.js";import"./NotFoundIllustration-CsQd4na7.js";import"./useMultipleKeyTracking-MH9qnoEi.js";import"./extends-CCbyfPlC.js";import"./index-wBCg0-F9.js";import"./index-C2eUe6cH.js";import"./index-BjQFKvNH.js";import"./isSymbol-BZYRlrjc.js";import"./index-DrFu-skq.js";import"./usePreviousValue-DDnp_zt4.js";import"./useResizeObserver-CYrpFlRY.js";import"./index-B57q81je.js";import"./useControllableState-DwpxGhsf.js";import"./useAttachedMenu-Cur6rMAi.js";import"./mergeRefs-CTUecegF.js";import"./getFocusableElements-BW7cf991.js";import"./index-Di2vWyb4.js";import"./index-DGzdVEvj.js";import"./useClickOutside-Dcd11u7q.js";import"./AccordionItem-CevKf_wO.js";import"./Search-C6T7hozM.js";import"./FormContext-C7kRVu4t.js";import"./bucket-14-BWqht3cs.js";import"./index-Cnj8eq3S.js";import"./LayerContext-DbU-6VX4.js";import"./motionConstants-CR5hPmRc.js";import"./tslib.es6-B4_xh3D5.js";import"./use-reduced-motion-BisnjenD.js";import"./index-DkUr2NOz.js";import"./ActionSet-rjy9XBbR.js";import"./ButtonSet-BfrcW0LA.js";import"./InlineLoading-BtULKugn.js";import"./Checkbox-kY2Abb91.js";import"./bucket-18-D3Jjo1Sn.js";import"./DatePicker-Cu2Bsrxt.js";import"./bucket-1-tyIf4h66.js";import"./Dropdown-CrpGuz_q.js";import"./index-CfaeQWAR.js";import"./index-DcAOwtUU.js";import"./FormGroup-BXEk7Ioy.js";import"./NumberInput-DTzyAg2C.js";import"./useNormalizedInputProps-Dn7BTqs3.js";import"./bucket-15-CXFcKitp.js";import"./RadioButton-V5H6Fpn_.js";import"./RadioButtonGroup-zAc8_5xc.js";import"./MultiSelect-DmjAMsU9.js";import"./index-n5c_F1iv.js";import"./FilterSummary-BvYU3s-S.js";import"./debounce-Bo8k2pkZ.js";import"./toNumber-DNhxxDfe.js";import"./useWindowResize-HTxQvUhS.js";import"./TagSet-CHeyTmMG.js";import"./Tag-BKIfEND7.js";import"./DefinitionTooltip-D-5Wnfe9.js";import"./ComposedModal-DJPTMTV_.js";import"./requiredIfGivenPropIsTruthy-CU7JwK8h.js";import"./wrapFocus-CuszVIVc.js";import"./index-Bxn63eqr.js";import"./usePortalTarget-DMYtlTkG.js";import"./SkeletonText-DUMYxvOQ.js";import"./getNodeTextContent-C8IeKkUQ.js";import"./index-CUF9UBSB.js";import"./bucket-17-CI5600gi.js";import"./index-pjE0epes.js";import"./bucket-12-CjYCkBh9.js";import"./TableToolbarSearch-D0FK6Xta.js";import"./bucket-5-VXADWwuF.js";import"./bucket-13-PtAwXpYp.js";import"./story-helper-Cn6RZn1q.js";import"./TableSelectRow-hpNxojUT.js";const b=`${Q.prefix}--datagrid`,ae=t=>{const s=x.useRef(),i=x.useRef(),d=R=>{s.current=R};te({instance:s==null?void 0:s.current,lastExpandedRowIndex:i==null?void 0:i.current,blockClass:b,activeElement:typeof document<"u"&&document.activeElement});const p=R=>[{id:"expander",Cell:({row:m})=>{const a={...m.getToggleRowExpandedProps(),onClick:c=>{c.stopPropagation(),m.toggleRowExpanded(),i.current=m.id}},{expanderButtonTitleExpanded:r="Collapse row",expanderButtonTitleCollapsed:o="Expand row"}=(s==null?void 0:s.current)||{},n=m.isExpanded?r:o;return m.canExpand&&l.jsx("button",{type:"button","aria-label":n,className:T(`${b}__row-expander`,`${$.prefix}--btn`,`${$.prefix}--btn--ghost`),...a,children:l.jsx(oe,{className:T(`${b}__expander-icon`,{[`${b}__expander-icon--not-open`]:!m.isExpanded,[`${b}__expander-icon--open`]:m.isExpanded})})})},width:48,disableResizing:!0,disableSortBy:!0,Header:""},...R];t.visibleColumns.push(p),t.useInstance.push(d)},L=`${Q.prefix}--datagrid`,v=t=>{ae(t);const s=i=>{x.useEffect(()=>{const{rows:a}=i,r=a.filter(o=>{var n;return(n=o==null?void 0:o.original)==null?void 0:n.defaultExpanded});r!=null&&r.length&&r.map(o=>{var n;if(!(o!=null&&o.isExpanded)&&!(o!=null&&o.hasExpanded)){(n=o==null?void 0:o.toggleRowExpanded)==null||n.call(o),o.hasExpanded=!0;return}})},[i,i.rows]),x.useEffect(()=>{const{rows:a,initialState:r}=i,{expandedRowIds:o}=r;o&&Object.keys(o).forEach(n=>{var E,I;const c=a.filter(_=>{var B,j;return _.id.toString()===n.toString()||((j=(B=_.original)==null?void 0:B.id)==null?void 0:j.toString())===n.toString()});(c.length&&n.toString()===c[0].id.toString()||c.length&&n.toString()===((I=(E=c[0].original)==null?void 0:E.id)==null?void 0:I.toString()))&&c[0].toggleRowExpanded()})},[i]);const d=24,p=(a,{row:r})=>[a,{className:T({[`${L}__carbon-nested-row`]:r.depth>0,[`${L}__carbon-row-expanded`]:r.isExpanded})}],R=(a,{row:r})=>[a,{style:{paddingLeft:`${r.depth>1?d*2+(r.depth-1)*(d+d/3):r.depth===1?d*2:0}px`}}],y=a=>32*a+16,m=(a,{cell:r,instance:o})=>{const n=o.columns.findIndex(c=>c.id===r.column.id)===0;return[a,{style:{marginRight:n&&r.row.depth>0&&parseInt(a.style.width,10)<=y(r.row.depth)+50?`${parseInt(a.style.width,10)-(y(r.row.depth)+50)}px`:"",width:n&&r.row.depth>0?parseInt(a.style.width,10)-y(r.row.depth):a.style.width}}]};Object.assign(i,{withNestedRows:!0}),t.getRowProps.push(p),t.getRowProps.push(R),t.getCellProps.push(m)};t.useInstance.push(s)},So={title:"IBM Products/Components/Datagrid/NestedRows",component:N,tags:["autodocs"],parameters:{styles:Z,docs:{page:()=>l.jsx(ee,{omitCodedExample:!0,blocks:[{title:"Nested rows",description:"Nested rows allow disclosing content in data tables progressively by displaying primary data first (parent row) and enabling users to navigate secondary information levels (child rows).\n- Include the `useNestedRows` hook\n- Make sure that any row you want to have nested rows in your data has a `subRows` property with an array of objects for each nested row. The row expander will be included by default as long as the `useNestedRows` hook is provided and it is detected that a row has `subRows` within it.\n          ",source:{code:`
const datagridState = useDatagrid(
  {
    columns,
    data,
    expanderButtonTitleExpanded: 'Collapse row',
    expanderButtonTitleCollapsed: 'Expand row',
  },
  useNestedRows
);

return <Datagrid datagridState={datagridState} />;
            `}}]})},layout:"padded"},argTypes:{featureFlags:{table:{disable:!0}}}},P=[{Header:"Row Index",accessor:(t,s)=>s,sticky:"left",id:"rowIndex"},{Header:"First Name",accessor:"firstName"},{Header:"Last Name",accessor:"lastName"},{Header:"Age",accessor:"age",width:50},{Header:"Visits",accessor:"visits",width:60},{Header:"Someone 1",accessor:"someone1"},{Header:"Someone 2",accessor:"someone2"},{Header:"Someone 3",accessor:"someone3"},{Header:"Someone 4",accessor:"someone4"},{Header:"Someone 5",accessor:"someone5"},{Header:"Someone 6",accessor:"someone6"},{Header:"Someone 7",accessor:"someone7"},{Header:"Someone 8",accessor:"someone8"},{Header:"Someone 9",accessor:"someone9"},{Header:"Someone 10",accessor:"someone10"}],h={emptyStateTitle:"Empty state title",emptyStateDescription:"Description text explaining why table is empty",emptyStateSize:"lg",gridTitle:"Data table title",gridDescription:"Additional information if needed",useDenseHeader:!1,rowSize:"lg",rowSizes:[{value:"xl",labelText:"Extra large"},{value:"lg",labelText:"Large"},{value:"md",labelText:"Medium"},{value:"xs",labelText:"Small"}],onRowSizeChange:t=>{console.log("row size changed to: ",t)},rowActions:[{id:"edit",itemText:"Edit",icon:se,onClick:G("Clicked row action: edit")},{id:"delete",itemText:"Delete",icon:ie,isDelete:!0,onClick:G("Clicked row action: delete")}]},C={gridTitle:h.gridTitle,gridDescription:h.gridDescription,useDenseHeader:h.useDenseHeader,rowSize:h.rowSize,rowSizes:h.rowSizes,onRowSizeChange:h.onRowSizeChange},ne=({...t})=>{const s=f.useMemo(()=>P,[]),[i]=x.useState(D(10,2)),d=z({columns:s,data:i,DatagridActions:H,...t.defaultGridProps,getSubRows:p=>p.subRows},v);return l.jsx(N,{datagridState:{...d}})},de=({...t})=>l.jsx(ne,{defaultGridProps:{...t}}),pe="With single-level nested rows",g=de.bind({});g.storyName=pe;g.argTypes={gridTitle:e.gridTitle,gridDescription:e.gridDescription,useDenseHeader:e.useDenseHeader,rowSize:e.rowSize,rowSizes:e.rowSizes,onRowSizeChange:e.onRowSizeChange,expanderButtonTitleExpanded:"Collapse row",expanderButtonTitleCollapsed:"Expand row"};g.args={...C,featureFlags:["Datagrid.useNestedRows"]};const me=({...t})=>{const s=f.useMemo(()=>P,[]),[i]=x.useState(D(10,5,2,2,{id:"testing-user-provided-id"})),d=z({columns:s,data:i,DatagridActions:H,...t.defaultGridProps,getSubRows:p=>p.subRows},v);return l.jsx(N,{datagridState:{...d}})},X=({...t})=>l.jsx(me,{defaultGridProps:{...t}}),ce="With nested rows",u=X.bind({});u.storyName=ce;u.argTypes={gridTitle:e.gridTitle,gridDescription:e.gridDescription,useDenseHeader:e.useDenseHeader,rowSize:e.rowSize,rowSizes:e.rowSizes,onRowSizeChange:e.onRowSizeChange,expanderButtonTitleExpanded:"Collapse row",expanderButtonTitleCollapsed:"Expand row"};u.args={...C};const le=({...t})=>{const s=f.useMemo(()=>P,[]),[i]=x.useState(D(10,5,2,2)),d=z({columns:s,data:i,DatagridActions:H,...t.defaultGridProps,getSubRows:p=>p.subRows},v,re);return l.jsx(N,{datagridState:{...d}})},ge=({...t})=>l.jsx(le,{defaultGridProps:{...t}}),ue="With selectable nested rows",w=ge.bind({});w.storyName=ue;w.argTypes={gridTitle:e.gridTitle,gridDescription:e.gridDescription,useDenseHeader:e.useDenseHeader,rowSize:e.rowSize,rowSizes:e.rowSizes,onRowSizeChange:e.onRowSizeChange,expanderButtonTitleExpanded:"Collapse row",expanderButtonTitleCollapsed:"Expand row"};w.args={...C};const we="With initially expanded nested rows",S=X.bind({});S.storyName=we;S.argTypes={gridTitle:e.gridTitle,gridDescription:e.gridDescription,useDenseHeader:e.useDenseHeader,rowSize:e.rowSize,rowSizes:e.rowSizes,onRowSizeChange:e.onRowSizeChange,expanderButtonTitleExpanded:"Collapse row",expanderButtonTitleCollapsed:"Expand row"};S.args={...C,initialState:{expandedRowIds:{"testing-user-provided-id__1":!0,3:!0}}};var k,U,W;g.parameters={...g.parameters,docs:{...(k=g.parameters)==null?void 0:k.docs,source:{originalSource:`({
  ...args
}) => {
  return <SingleLevelNestedRows defaultGridProps={{
    ...args
  }} />;
}`,...(W=(U=g.parameters)==null?void 0:U.docs)==null?void 0:W.source}}};var A,M,F;u.parameters={...u.parameters,docs:{...(A=u.parameters)==null?void 0:A.docs,source:{originalSource:`({
  ...args
}) => {
  return <NestedRows defaultGridProps={{
    ...args
  }} />;
}`,...(F=(M=u.parameters)==null?void 0:M.docs)==null?void 0:F.source}}};var O,V,Y;w.parameters={...w.parameters,docs:{...(O=w.parameters)==null?void 0:O.docs,source:{originalSource:`({
  ...args
}) => {
  return <SelectableNestedRows defaultGridProps={{
    ...args
  }} />;
}`,...(Y=(V=w.parameters)==null?void 0:V.docs)==null?void 0:Y.source}}};var q,J,K;S.parameters={...S.parameters,docs:{...(q=S.parameters)==null?void 0:q.docs,source:{originalSource:`({
  ...args
}) => {
  return <NestedRows defaultGridProps={{
    ...args
  }} />;
}`,...(K=(J=S.parameters)==null?void 0:J.docs)==null?void 0:K.source}}};const xo=["SingleLevelNestedRowsUsageStory","NestedRowsUsageStory","SelectableNestedRowsUsageStory","NestedRowsInitialUsageStory"];export{S as NestedRowsInitialUsageStory,u as NestedRowsUsageStory,w as SelectableNestedRowsUsageStory,g as SingleLevelNestedRowsUsageStory,xo as __namedExportsOrder,So as default};
