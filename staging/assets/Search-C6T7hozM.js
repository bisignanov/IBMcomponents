import{u as R,b as ae,e as te,c as S,_ as ne,C as se,d as re,a as b,E as oe,i as ce,S as le}from"./useMergedRefs-DoviDd4t.js";import{P as e}from"./index-Dk74W0Oi.js";import{R as n,r as d}from"./index-BwDkhjyp.js";import{d as I}from"./events-CiqBCP_Q.js";import{F as ie}from"./FormContext-C7kRVu4t.js";import{S as ue}from"./bucket-14-BWqht3cs.js";function de(l){const s=l.current||l;s&&s.focus&&document.activeElement!==s&&s.focus()}var N;const w=n.forwardRef(function(s,f){let{autoComplete:D="off",className:K,closeButtonLabelText:x="Clear search input",defaultValue:C,disabled:m,isExpanded:i=!0,id:O,labelText:V,light:B,onChange:E=()=>{},onClear:F=()=>{},onKeyDown:j,onExpand:r,placeholder:y="Search",renderIcon:_,role:k="searchbox",size:h="md",type:q="text",value:o,...z}=s;const H=!!(o||C),a=R(),{isFluid:L}=d.useContext(ie),c=d.useRef(null),M=ae([f,c]),$=d.useRef(null),A=te("search-input"),u=O||A,G=`${u}-search`,[J,g]=d.useState(H||!1),[Q,U]=d.useState(o),W=S({[`${a}--search`]:!0,[`${a}--search--sm`]:h==="sm",[`${a}--search--md`]:h==="md",[`${a}--search--lg`]:h==="lg",[`${a}--search--light`]:B,[`${a}--search--disabled`]:m,[`${a}--search--fluid`]:L},K),X=S({[`${a}--search-close`]:!0,[`${a}--search-close--hidden`]:!J||!i});o!==Q&&(g(!!o),U(o));function v(){!o&&c.current&&(c.current.value="");const p={target:Object.assign({},c.current,{value:""}),type:"change"};E(p),F(),g(!1),de(c)}function Y(t){g(t.target.value!=="")}function Z(t){var p,T;b(t,oe)&&(t.stopPropagation(),(p=c.current)!=null&&p.value?v():r&&i&&((T=$.current)==null||T.focus()))}function ee(t){(b(t,ce)||b(t,le))&&(t.stopPropagation(),r&&r(t))}return n.createElement("div",{role:"search","aria-label":y,className:W},n.createElement("div",{"aria-label":"button","aria-labelledby":r?u:void 0,role:"button",className:`${a}--search-magnifier`,onClick:r,onKeyDown:ee,tabIndex:r&&!i?0:-1,ref:$,"aria-expanded":!!(r&&i),"aria-controls":r?u:void 0},n.createElement(P,{icon:_})),n.createElement("label",{id:G,htmlFor:u,className:`${a}--label`},V),n.createElement("input",ne({autoComplete:D,className:`${a}--search-input`,defaultValue:C,disabled:m,role:k,ref:M,id:u,onChange:I([E,Y]),onKeyDown:I([j,Z]),placeholder:y,type:q,value:o,tabIndex:r&&!i?-1:void 0},z)),n.createElement("button",{"aria-label":x,className:X,disabled:m,onClick:v,title:x,type:"button"},N||(N=n.createElement(se,null))))});w.displayName="Search";w.propTypes={autoComplete:e.string,className:e.string,closeButtonLabelText:e.string,defaultValue:e.oneOfType([e.string,e.number]),disabled:e.bool,id:e.string,isExpanded:e.bool,labelText:e.node.isRequired,light:re(e.bool),onChange:e.func,onClear:e.func,onExpand:e.func,onKeyDown:e.func,placeholder:e.string,renderIcon:e.oneOfType([e.func,e.object]),role:e.string,size:e.oneOf(["sm","md","lg"]),type:e.string,value:e.oneOfType([e.string,e.number])};function P(l){let{icon:s}=l;const f=R();return s?n.createElement(s,{className:`${f}--search-magnifier-icon`}):n.createElement(ue,{className:`${f}--search-magnifier-icon`})}P.propTypes={icon:e.oneOfType([e.func,e.object])};export{w as S};
