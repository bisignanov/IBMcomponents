import{e as xe,u as j,c as D,g as te,_ as k,d as Ee,b as fe,C as Ie,h as Le,A as be,v as me,H as ve,w as he,a as H,D as $e}from"./useMergedRefs-DoviDd4t.js";import{b as _e}from"./index-g07FazYc.js";import{i as se,T as Ce}from"./settings-Bk-Ww79A.js";import{P as t}from"./index-Dk74W0Oi.js";import{r as s,R as n}from"./index-BwDkhjyp.js";import{r as re}from"./index-DcAOwtUU.js";import{u as ye}from"./useControllableState-DwpxGhsf.js";import{g as ae}from"./useNoInteractiveChildren-B4Ro9ZJd.js";import{e as oe}from"./index-8ToAQMOn.js";import{u as we}from"./useMatchMedia-xV7uxhgc.js";import{T as le}from"./Text-BVB9JT_I.js";import{k as Te,h as Pe}from"./events-CiqBCP_Q.js";function ne(m){const i=s.useRef(m),f=s.useRef(!1);s.useEffect(()=>{i.current=m}),s.useEffect(()=>{f.current!==!0&&(f.current=!0,i.current())},[])}function ce(m){let{onPress:i,onPressIn:f,onPressOut:o,onLongPress:x,delayLongPressMs:L=500}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const u=s.useRef(i),b=s.useRef(f),v=s.useRef(o),_=s.useRef(x),[p,$]=s.useState(!1),[l,E]=s.useState(!1),y=s.useRef({longPress:!1});s.useEffect(()=>{u.current=i},[i]),s.useEffect(()=>{b.current=f},[f]),s.useEffect(()=>{v.current=o},[o]),s.useEffect(()=>{_.current=x},[x]),s.useEffect(()=>{const{current:c}=m;function g(r){var R;$(!0),(R=b.current)==null||R.call(b),r.preventDefault()}function N(){var r;$(!1),E(!1),(r=v.current)==null||r.call(v,y.current)}function h(){var r;$(!1),E(!1),(r=v.current)==null||r.call(v),y.current.longPress=!1}function d(){var r;$(!1),E(!1),(r=v.current)==null||r.call(v),y.current.longPress=!1}function e(){var r;E(!1),$(!1),(r=u.current)==null||r.call(u,y.current),y.current.longPress=!1}function w(r){r.preventDefault()}return c.addEventListener("pointerdown",g),c.addEventListener("pointerup",N),c.addEventListener("pointercancel",h),c.addEventListener("pointerleave",d),c.addEventListener("click",e),c.addEventListener("contextmenu",w),()=>{c.removeEventListener("pointerdown",g),c.removeEventListener("pointerup",N),c.removeEventListener("pointercancel",h),c.removeEventListener("pointerleave",d),c.removeEventListener("click",e),c.removeEventListener("contextmenu",w)}},[m]),s.useEffect(()=>{if(p){const c=setTimeout(()=>{$(!1),E(!0)},L);return()=>{clearTimeout(c)}}},[p,L]),s.useEffect(()=>{var c;if(l)return y.current.longPress=!0,(c=_.current)==null?void 0:c.call(_)},[l])}var ie,ue;const K=n.createContext({baseId:"",activeIndex:0,defaultSelectedIndex:0,dismissable:!1,onTabCloseRequest(){},setActiveIndex(){},selectedIndex:0,setSelectedIndex(){}}),pe=n.createContext({index:0,hasSecondaryLabel:!1}),Ne=`(min-width: ${_e.lg.width})`,Re=n.createContext(0);function Se(m){let{children:i,defaultSelectedIndex:f=0,onChange:o,selectedIndex:x,dismissable:L,onTabCloseRequest:u}=m;const b=xe("ccs"),[v,_]=s.useState(f),[p,$]=ye({value:x,defaultValue:f,onChange:E=>o==null?void 0:o({selectedIndex:E})}),l={baseId:b,activeIndex:v,defaultSelectedIndex:f,dismissable:L,onTabCloseRequest:u,setActiveIndex:_,selectedIndex:p,setSelectedIndex:$};return n.createElement(K.Provider,{value:l},i)}Se.propTypes={children:t.node,defaultSelectedIndex:t.number,dismissable:t.bool,onChange:t.func,onTabCloseRequest:m=>{if(m.dismissable&&!m.onTabCloseRequest)return new Error("dismissable property specified without also providing an onTabCloseRequest property.")},selectedIndex:t.number};function We(m,i,f){switch(!0){case H(m,be):return(f+1)%i;case H(m,me):return(i+f-1)%i;case H(m,ve):return 0;case H(m,he):return i-1;default:return f}}function De(m){let{activation:i="automatic","aria-label":f,children:o,className:x,contained:L=!1,fullWidth:u=!1,iconSize:b,leftOverflowButtonProps:v,light:_,rightOverflowButtonProps:p,scrollDebounceWait:$=200,scrollIntoView:l,...E}=m;const{activeIndex:y,selectedIndex:c,setSelectedIndex:g,setActiveIndex:N,dismissable:h}=n.useContext(K),d=j(),e=s.useRef(null),w=s.useRef(null),r=s.useRef(null),[R,A]=s.useState(!1),[T,S]=s.useState(0);let q=!1;L&&(q=n.Children.toArray(o).some(a=>re.isElement(a)&&!!a.props.secondaryLabel));const G=we(Ne),Q=u&&L&&G&&n.Children.toArray(o).length<9,U=D(`${d}--tabs`,{[`${d}--tabs--contained`]:L,[`${d}--tabs--light`]:_,[`${d}--tabs__icon--default`]:b==="default",[`${d}--tabs__icon--lg`]:b==="lg",[`${d}--layout--size-lg`]:b==="lg",[`${d}--tabs--tall`]:q,[`${d}--tabs--full-width`]:Q,[`${d}--tabs--dismissable`]:h},x),B=44,[F,J]=s.useState(e.current?T+B+e.current.clientWidth<e.current.scrollWidth:!1),X=e.current?R&&T>0:!1,Y=D(`${d}--tab--overflow-nav-button`,`${d}--tab--overflow-nav-button--previous`,{[`${d}--tab--overflow-nav-button--hidden`]:!X}),P=D(`${d}--tab--overflow-nav-button`,`${d}--tab--overflow-nav-button--next`,{[`${d}--tab--overflow-nav-button--hidden`]:!F}),C=s.useRef([]),O=s.useCallback(()=>se(a=>{S(a.target.scrollLeft)},$),[$]);function z(a){var I;if(Le(a,[be,me,ve,he])){a.preventDefault();const M=C.current.filter(ee=>ee!==null).filter(ee=>!ee.disabled),Z=M.indexOf(C.current[i==="automatic"?c:y]),V=C.current.indexOf(M[We(a,M.length,Z)]);i==="automatic"?g(V):i==="manual"&&N(V),(I=C.current[V])==null||I.focus()}}return ne(()=>{const a=C.current[c];l&&a&&a.scrollIntoView({block:"nearest",inline:"nearest"})}),s.useEffect(()=>{J(e.current?T+B+e.current.clientWidth+1<e.current.scrollWidth:!1),h&&e.current&&A(e.current.scrollWidth>e.current.clientWidth)},[T,o,h,R]),ne(()=>{var a;if((a=C.current[c])!=null&&a.disabled){const I=C.current.filter(W=>!W.disabled);if(I.length>0){const W=I[0];g(C.current.indexOf(W))}}}),te(()=>{e.current&&A(e.current.scrollWidth>e.current.clientWidth+1);function a(){e.current&&A(e.current.scrollWidth>e.current.clientWidth+1)}const I=se(a,200);return window.addEventListener("resize",I),()=>{I.cancel(),window.removeEventListener("resize",I)}},[]),te(()=>{T!==null&&e.current&&(e.current.scrollLeft=T)},[T]),te(()=>{if(!R||!e.current)return;const a=i==="manual"?C.current[y]:C.current[c];if(a){const{width:I}=a.getBoundingClientRect(),W=a.offsetLeft,M=a.offsetLeft+I,Z=e.current.scrollLeft+B,V=e.current.scrollLeft+e.current.clientWidth-B;W<Z&&S(W-B),M>V&&S(M+B-e.current.clientWidth)}},[i,y,c,R,o]),ce(w,{onPress(a){let{longPress:I}=a;!I&&e.current&&S(Math.max(T-e.current.scrollWidth/C.current.length*1.5,0))},onLongPress(){return de(e,"backward",S)}}),ce(r,{onPress(a){let{longPress:I}=a;!I&&e.current&&S(Math.min(T+e.current.scrollWidth/C.current.length*1.5,e.current.scrollWidth-e.current.clientWidth))},onLongPress(){return de(e,"forward",S)}}),n.createElement("div",{className:U},n.createElement("button",k({"aria-hidden":"true",tabIndex:-1,"aria-label":"Scroll left",ref:w,className:Y,type:"button"},v),ie||(ie=n.createElement(Te,null))),n.createElement("div",k({},E,{"aria-label":f,ref:e,role:"tablist",className:`${d}--tab--list`,onScroll:O,onKeyDown:z}),n.Children.map(o,(a,I)=>re.isElement(a)?n.createElement(pe.Provider,{value:{index:I,hasSecondaryLabel:q,contained:L}},n.cloneElement(a,{ref:W=>{C.current[I]=W}})):null)),n.createElement("button",k({"aria-hidden":"true",tabIndex:-1,"aria-label":"Scroll right",ref:r,className:P,type:"button"},p),ue||(ue=n.createElement(Pe,null))))}De.propTypes={activation:t.oneOf(["automatic","manual"]),"aria-label":t.string.isRequired,children:t.node,className:t.string,contained:t.bool,fullWidth:t.bool,iconSize:t.oneOf(["default","lg"]),leftOverflowButtonProps:t.object,light:Ee(t.bool),rightOverflowButtonProps:t.object,scrollDebounceWait:t.number,scrollIntoView:t.bool};function de(m,i,f){const o=m.current;if(!o)return()=>{};const x=o==null?void 0:o.style["scroll-behavior"];o.style["scroll-behavior"]="auto";const L=i==="forward"?5:-5;let u=null;function b(){o&&(o.scrollLeft=o.scrollLeft+L,u=requestAnimationFrame(b))}return u=requestAnimationFrame(b),()=>{o.style["scroll-behavior"]=x,f(o.scrollLeft),u&&cancelAnimationFrame(u)}}const ge=s.forwardRef(function(i,f){let{as:o="button",children:x,className:L,disabled:u,onClick:b,onKeyDown:v,secondaryLabel:_,renderIcon:p,...$}=i;const l=j(),{selectedIndex:E,setSelectedIndex:y,baseId:c,dismissable:g,onTabCloseRequest:N}=n.useContext(K),{index:h,hasSecondaryLabel:d,contained:e}=n.useContext(pe),w=s.useRef(null),r=s.useRef(null),R=fe([f,r]),[A,T]=s.useState(!1),S=`${c}-tab-${h}`,q=`${c}-tabpanel-${h}`,G=D(`${l}--tabs__nav-item`,`${l}--tabs__nav-link`,{[`${l}--tabs__nav-item--selected`]:E===h,[`${l}--tabs__nav-item--disabled`]:u,[`${l}--tabs__nav-item--hover-off`]:A},L),Q=o,U=P=>{e&&r.current&&(P.stopPropagation(),T(!0),r.current.classList.add(`${l}--tabs__nav-item--hover-off`))},B=()=>{e&&r.current&&(r.current.classList.remove(`${l}--tabs__nav-item--hover-off`),T(!1))};oe(w,"mouseover",U),oe(w,"mouseleave",B);const F=P=>{var C;if(P.stopPropagation(),N==null||N(h),r.current&&r.current.parentElement){const O=Array.from(r.current.parentElement.childNodes).filter(z=>{const a=z;return a.classList.contains("cds--tabs__nav-link")&&!a.classList.contains("cds--tabs__nav-item--disabled")}).length;if(r.current&&h+1!==O)r.current.focus();else{const z=(O-2)*2;(C=r.current.parentElement.childNodes[z])==null||C.focus()}}},J=P=>{g&&H(P,$e)&&F(P),v==null||v(P)},X=n.createElement("div",{className:D({[`${l}--tabs__nav-item--close`]:g,[`${l}--tabs__nav-item--close--hidden`]:!g})},n.createElement("button",{type:"button",tabIndex:E===h&&g?0:-1,"aria-disabled":u,"aria-hidden":E===h&&g?"false":"true",disabled:u,className:D({[`${l}--tabs__nav-item--close-icon`]:g,[`${l}--visually-hidden`]:!g,[`${l}--tabs__nav-item--close-icon--selected`]:E===h,[`${l}--tabs__nav-item--close-icon--disabled`]:u}),onClick:F,title:`Remove ${typeof x=="string"?x:""} tab`,ref:w},n.createElement(Ie,{"aria-hidden":E===h&&g?"false":"true","aria-label":`Press delete to remove ${typeof x=="string"?x:""} tab`}))),Y=p??g;return n.createElement(n.Fragment,null,n.createElement(Q,k({},$,{"aria-controls":q,"aria-disabled":u,"aria-selected":E===h,ref:R,id:S,role:"tab",className:G,disabled:u,onClick:P=>{u||(y(h),b==null||b(P))},onKeyDown:J,tabIndex:E===h?"0":"-1",type:"button"}),n.createElement("div",{className:`${l}--tabs__nav-item-label-wrapper`},g&&p&&n.createElement("div",{className:`${l}--tabs__nav-item--icon-left`},n.createElement(p,{size:16})),n.createElement(le,{className:`${l}--tabs__nav-item-label`},x),!g&&p&&n.createElement("div",{className:D(`${l}--tabs__nav-item--icon`,{[`${l}--visually-hidden`]:!Y})},!g&&p&&n.createElement(p,{size:16}))),d&&_&&n.createElement(le,{as:"div",className:`${l}--tabs__nav-item-secondary-label`,title:_},_)),X)});ge.propTypes={as:t.oneOfType([t.string,t.elementType]),children:t.node,className:t.string,disabled:t.bool,onClick:t.func,onKeyDown:t.func,renderButton:t.func,renderIcon:t.oneOfType([t.func,t.object]),secondaryLabel:t.string};const Be=n.forwardRef(function(i,f){let{children:o,className:x,defaultOpen:L=!1,enterDelayMs:u,leaveDelayMs:b,label:v,..._}=i;const p=j(),$=D(`${p}--tabs__nav-item--icon-only`,x);return n.createElement(Ce,{align:"bottom",defaultOpen:L,className:`${p}--icon-tooltip`,enterDelayMs:u,label:v,leaveDelayMs:b},n.createElement(ge,k({className:$,ref:f},_),o))});Be.propTypes={children:t.node,className:t.string,defaultOpen:t.bool,enterDelayMs:t.number,label:t.node.isRequired,leaveDelayMs:t.number};const Me=n.forwardRef(function(i,f){let{children:o,className:x,...L}=i;const u=j(),b=s.useRef(null),v=fe([f,b]),[_,p]=s.useState(0),[$,l]=s.useState(!1),{selectedIndex:E,baseId:y}=n.useContext(K),c=n.useContext(Re),g=`${y}-tabpanel-${c}`,N=`${y}-tab-${c}`,h=D(`${u}--tab-content`,x,{[`${u}--tab-content--interactive`]:$});return ne(()=>{if(!b.current)return;ae(b.current)&&(l(!0),p(-1))}),s.useEffect(()=>{const d=b.current;if(!d)return;function e(){ae(d)?(l(!0),p(-1)):(l(!1),p(0))}const w=new MutationObserver(e);return w.observe(d,{childList:!0,subtree:!0}),()=>w.disconnect()},[]),n.createElement("div",k({},L,{"aria-labelledby":N,id:g,className:h,ref:v,role:"tabpanel",tabIndex:_,hidden:E!==c}),o)});Me.propTypes={children:t.node,className:t.string};t.node;export{Se as T,De as a,ge as b};
