import{e as Ee,u as j,c as D,g as te,_ as k,d as Ie,b as fe,C as Le,h as $e,A as be,t as me,H as ve,v as pe,a as F,D as _e}from"./useMergedRefs-CY5AfkP4.js";import{b as Ce}from"./index-g07FazYc.js";import{i as se,T as ye}from"./settings-B0yoEqB-.js";import{P as n}from"./index-Dk74W0Oi.js";import{r as s,R as e}from"./index-BwDkhjyp.js";import{r as re}from"./index-DcAOwtUU.js";import{u as we}from"./useControllableState-DwpxGhsf.js";import{g as ae}from"./useNoInteractiveChildren-B4Ro9ZJd.js";import{e as oe}from"./index-D2JPet7M.js";import{u as Te}from"./useMatchMedia-hLy35sFa.js";import{T as le}from"./Text-CiWJR74P.js";import{k as Pe,h as Ne}from"./events-D6dlm1BF.js";function ne(b){const i=s.useRef(b),u=s.useRef(!1);s.useEffect(()=>{i.current=b}),s.useEffect(()=>{u.current!==!0&&(u.current=!0,i.current())},[])}function ce(b){let{onPress:i,onPressIn:u,onPressOut:r,onLongPress:x,delayLongPressMs:L=500}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const d=s.useRef(i),m=s.useRef(u),v=s.useRef(r),_=s.useRef(x),[h,$]=s.useState(!1),[l,E]=s.useState(!1),y=s.useRef({longPress:!1});s.useEffect(()=>{d.current=i},[i]),s.useEffect(()=>{m.current=u},[u]),s.useEffect(()=>{v.current=r},[r]),s.useEffect(()=>{_.current=x},[x]),s.useEffect(()=>{const{current:c}=b;function g(a){var R;$(!0),(R=m.current)==null||R.call(m),a.preventDefault()}function N(){var a;$(!1),E(!1),(a=v.current)==null||a.call(v,y.current)}function p(){var a;$(!1),E(!1),(a=v.current)==null||a.call(v),y.current.longPress=!1}function f(){var a;$(!1),E(!1),(a=v.current)==null||a.call(v),y.current.longPress=!1}function t(){var a;E(!1),$(!1),(a=d.current)==null||a.call(d,y.current),y.current.longPress=!1}function w(a){a.preventDefault()}return c.addEventListener("pointerdown",g),c.addEventListener("pointerup",N),c.addEventListener("pointercancel",p),c.addEventListener("pointerleave",f),c.addEventListener("click",t),c.addEventListener("contextmenu",w),()=>{c.removeEventListener("pointerdown",g),c.removeEventListener("pointerup",N),c.removeEventListener("pointercancel",p),c.removeEventListener("pointerleave",f),c.removeEventListener("click",t),c.removeEventListener("contextmenu",w)}},[b]),s.useEffect(()=>{if(h){const c=setTimeout(()=>{$(!1),E(!0)},L);return()=>{clearTimeout(c)}}},[h,L]),s.useEffect(()=>{var c;if(l)return y.current.longPress=!0,(c=_.current)==null?void 0:c.call(_)},[l])}var ie,ue;const K=e.createContext({baseId:"",activeIndex:0,defaultSelectedIndex:0,dismissable:!1,onTabCloseRequest(){},setActiveIndex(){},selectedIndex:0,setSelectedIndex(){}}),he=e.createContext({index:0,hasSecondaryLabel:!1}),Re=`(min-width: ${Ce.lg.width})`,ge=e.createContext(0);function Se(b){let{children:i,defaultSelectedIndex:u=0,onChange:r,selectedIndex:x,dismissable:L,onTabCloseRequest:d}=b;const m=Ee("ccs"),[v,_]=s.useState(u),[h,$]=we({value:x,defaultValue:u,onChange:E=>r==null?void 0:r({selectedIndex:E})}),l={baseId:m,activeIndex:v,defaultSelectedIndex:u,dismissable:L,onTabCloseRequest:d,setActiveIndex:_,selectedIndex:h,setSelectedIndex:$};return e.createElement(K.Provider,{value:l},i)}Se.propTypes={children:n.node,defaultSelectedIndex:n.number,dismissable:n.bool,onChange:n.func,onTabCloseRequest:b=>{if(b.dismissable&&!b.onTabCloseRequest)return new Error("dismissable property specified without also providing an onTabCloseRequest property.")},selectedIndex:n.number};function We(b,i,u){switch(!0){case F(b,be):return(u+1)%i;case F(b,me):return(i+u-1)%i;case F(b,ve):return 0;case F(b,pe):return i-1;default:return u}}function De(b){let{activation:i="automatic","aria-label":u,children:r,className:x,contained:L=!1,fullWidth:d=!1,iconSize:m,leftOverflowButtonProps:v,light:_,rightOverflowButtonProps:h,scrollDebounceWait:$=200,scrollIntoView:l,...E}=b;const{activeIndex:y,selectedIndex:c,setSelectedIndex:g,setActiveIndex:N,dismissable:p}=e.useContext(K),f=j(),t=s.useRef(null),w=s.useRef(null),a=s.useRef(null),[R,A]=s.useState(!1),[T,S]=s.useState(0);let q=!1;L&&(q=e.Children.toArray(r).some(o=>re.isElement(o)&&!!o.props.secondaryLabel));const G=Te(Re),Q=d&&L&&G&&e.Children.toArray(r).length<9,U=D(`${f}--tabs`,{[`${f}--tabs--contained`]:L,[`${f}--tabs--light`]:_,[`${f}--tabs__icon--default`]:m==="default",[`${f}--tabs__icon--lg`]:m==="lg",[`${f}--layout--size-lg`]:m==="lg",[`${f}--tabs--tall`]:q,[`${f}--tabs--full-width`]:Q,[`${f}--tabs--dismissable`]:p},x),B=44,[H,J]=s.useState(t.current?T+B+t.current.clientWidth<t.current.scrollWidth:!1),X=t.current?R&&T>0:!1,Y=D(`${f}--tab--overflow-nav-button`,`${f}--tab--overflow-nav-button--previous`,{[`${f}--tab--overflow-nav-button--hidden`]:!X}),P=D(`${f}--tab--overflow-nav-button`,`${f}--tab--overflow-nav-button--next`,{[`${f}--tab--overflow-nav-button--hidden`]:!H}),C=s.useRef([]),O=s.useCallback(()=>se(o=>{S(o.target.scrollLeft)},$),[$]);function z(o){var I;if($e(o,[be,me,ve,pe])){o.preventDefault();const M=C.current.filter(ee=>ee!==null).filter(ee=>!ee.disabled),Z=M.indexOf(C.current[i==="automatic"?c:y]),V=C.current.indexOf(M[We(o,M.length,Z)]);i==="automatic"?g(V):i==="manual"&&N(V),(I=C.current[V])==null||I.focus()}}return ne(()=>{const o=C.current[c];l&&o&&o.scrollIntoView({block:"nearest",inline:"nearest"})}),s.useEffect(()=>{J(t.current?T+B+t.current.clientWidth+1<t.current.scrollWidth:!1),p&&t.current&&A(t.current.scrollWidth>t.current.clientWidth)},[T,r,p,R]),ne(()=>{var o;if((o=C.current[c])!=null&&o.disabled){const I=C.current.filter(W=>!W.disabled);if(I.length>0){const W=I[0];g(C.current.indexOf(W))}}}),te(()=>{t.current&&A(t.current.scrollWidth>t.current.clientWidth+1);function o(){t.current&&A(t.current.scrollWidth>t.current.clientWidth+1)}const I=se(o,200);return window.addEventListener("resize",I),()=>{I.cancel(),window.removeEventListener("resize",I)}},[]),te(()=>{T!==null&&t.current&&(t.current.scrollLeft=T)},[T]),te(()=>{if(!R||!t.current)return;const o=i==="manual"?C.current[y]:C.current[c];if(o){const{width:I}=o.getBoundingClientRect(),W=o.offsetLeft,M=o.offsetLeft+I,Z=t.current.scrollLeft+B,V=t.current.scrollLeft+t.current.clientWidth-B;W<Z&&S(W-B),M>V&&S(M+B-t.current.clientWidth)}},[i,y,c,R,r]),ce(w,{onPress(o){let{longPress:I}=o;!I&&t.current&&S(Math.max(T-t.current.scrollWidth/C.current.length*1.5,0))},onLongPress(){return de(t,"backward",S)}}),ce(a,{onPress(o){let{longPress:I}=o;!I&&t.current&&S(Math.min(T+t.current.scrollWidth/C.current.length*1.5,t.current.scrollWidth-t.current.clientWidth))},onLongPress(){return de(t,"forward",S)}}),e.createElement("div",{className:U},e.createElement("button",k({"aria-hidden":"true",tabIndex:-1,"aria-label":"Scroll left",ref:w,className:Y,type:"button"},v),ie||(ie=e.createElement(Pe,null))),e.createElement("div",k({},E,{"aria-label":u,ref:t,role:"tablist",className:`${f}--tab--list`,onScroll:O,onKeyDown:z}),e.Children.map(r,(o,I)=>re.isElement(o)?e.createElement(he.Provider,{value:{index:I,hasSecondaryLabel:q,contained:L}},e.cloneElement(o,{ref:W=>{C.current[I]=W}})):null)),e.createElement("button",k({"aria-hidden":"true",tabIndex:-1,"aria-label":"Scroll right",ref:a,className:P,type:"button"},h),ue||(ue=e.createElement(Ne,null))))}De.propTypes={activation:n.oneOf(["automatic","manual"]),"aria-label":n.string.isRequired,children:n.node,className:n.string,contained:n.bool,fullWidth:n.bool,iconSize:n.oneOf(["default","lg"]),leftOverflowButtonProps:n.object,light:Ie(n.bool),rightOverflowButtonProps:n.object,scrollDebounceWait:n.number,scrollIntoView:n.bool};function de(b,i,u){const r=b.current;if(!r)return()=>{};const x=r==null?void 0:r.style["scroll-behavior"];r.style["scroll-behavior"]="auto";const L=i==="forward"?5:-5;let d=null;function m(){r&&(r.scrollLeft=r.scrollLeft+L,d=requestAnimationFrame(m))}return d=requestAnimationFrame(m),()=>{r.style["scroll-behavior"]=x,u(r.scrollLeft),d&&cancelAnimationFrame(d)}}const xe=s.forwardRef(function(i,u){let{as:r="button",children:x,className:L,disabled:d,onClick:m,onKeyDown:v,secondaryLabel:_,renderIcon:h,...$}=i;const l=j(),{selectedIndex:E,setSelectedIndex:y,baseId:c,dismissable:g,onTabCloseRequest:N}=e.useContext(K),{index:p,hasSecondaryLabel:f,contained:t}=e.useContext(he),w=s.useRef(null),a=s.useRef(null),R=fe([u,a]),[A,T]=s.useState(!1),S=`${c}-tab-${p}`,q=`${c}-tabpanel-${p}`,G=D(`${l}--tabs__nav-item`,`${l}--tabs__nav-link`,{[`${l}--tabs__nav-item--selected`]:E===p,[`${l}--tabs__nav-item--disabled`]:d,[`${l}--tabs__nav-item--hover-off`]:A},L),Q=r,U=P=>{t&&a.current&&(P.stopPropagation(),T(!0),a.current.classList.add(`${l}--tabs__nav-item--hover-off`))},B=()=>{t&&a.current&&(a.current.classList.remove(`${l}--tabs__nav-item--hover-off`),T(!1))};oe(w,"mouseover",U),oe(w,"mouseleave",B);const H=P=>{var C;if(P.stopPropagation(),N==null||N(p),a.current&&a.current.parentElement){const O=Array.from(a.current.parentElement.childNodes).filter(z=>{const o=z;return o.classList.contains("cds--tabs__nav-link")&&!o.classList.contains("cds--tabs__nav-item--disabled")}).length;if(a.current&&p+1!==O)a.current.focus();else{const z=(O-2)*2;(C=a.current.parentElement.childNodes[z])==null||C.focus()}}},J=P=>{g&&F(P,_e)&&H(P),v==null||v(P)},X=e.createElement("div",{className:D({[`${l}--tabs__nav-item--close`]:g,[`${l}--tabs__nav-item--close--hidden`]:!g})},e.createElement("button",{type:"button",tabIndex:E===p&&g?0:-1,"aria-disabled":d,"aria-hidden":E===p&&g?"false":"true",disabled:d,className:D({[`${l}--tabs__nav-item--close-icon`]:g,[`${l}--visually-hidden`]:!g,[`${l}--tabs__nav-item--close-icon--selected`]:E===p,[`${l}--tabs__nav-item--close-icon--disabled`]:d}),onClick:H,title:`Remove ${typeof x=="string"?x:""} tab`,ref:w},e.createElement(Le,{"aria-hidden":E===p&&g?"false":"true","aria-label":`Press delete to remove ${typeof x=="string"?x:""} tab`}))),Y=h??g;return e.createElement(e.Fragment,null,e.createElement(Q,k({},$,{"aria-controls":q,"aria-disabled":d,"aria-selected":E===p,ref:R,id:S,role:"tab",className:G,disabled:d,onClick:P=>{d||(y(p),m==null||m(P))},onKeyDown:J,tabIndex:E===p?"0":"-1",type:"button"}),e.createElement("div",{className:`${l}--tabs__nav-item-label-wrapper`},g&&h&&e.createElement("div",{className:`${l}--tabs__nav-item--icon-left`},e.createElement(h,{size:16})),e.createElement(le,{className:`${l}--tabs__nav-item-label`},x),!g&&h&&e.createElement("div",{className:D(`${l}--tabs__nav-item--icon`,{[`${l}--visually-hidden`]:!Y})},!g&&h&&e.createElement(h,{size:16}))),f&&_&&e.createElement(le,{as:"div",className:`${l}--tabs__nav-item-secondary-label`,title:_},_)),X)});xe.propTypes={as:n.oneOfType([n.string,n.elementType]),children:n.node,className:n.string,disabled:n.bool,onClick:n.func,onKeyDown:n.func,renderButton:n.func,renderIcon:n.oneOfType([n.func,n.object]),secondaryLabel:n.string};const Be=e.forwardRef(function(i,u){let{children:r,className:x,defaultOpen:L=!1,enterDelayMs:d,leaveDelayMs:m,label:v,..._}=i;const h=j(),$=D(`${h}--tabs__nav-item--icon-only`,x);return e.createElement(ye,{align:"bottom",defaultOpen:L,className:`${h}--icon-tooltip`,enterDelayMs:d,label:v,leaveDelayMs:m},e.createElement(xe,k({className:$,ref:u},_),r))});Be.propTypes={children:n.node,className:n.string,defaultOpen:n.bool,enterDelayMs:n.number,label:n.node.isRequired,leaveDelayMs:n.number};const Me=e.forwardRef(function(i,u){let{children:r,className:x,...L}=i;const d=j(),m=s.useRef(null),v=fe([u,m]),[_,h]=s.useState(0),[$,l]=s.useState(!1),{selectedIndex:E,baseId:y}=e.useContext(K),c=e.useContext(ge),g=`${y}-tabpanel-${c}`,N=`${y}-tab-${c}`,p=D(`${d}--tab-content`,x,{[`${d}--tab-content--interactive`]:$});return ne(()=>{if(!m.current)return;ae(m.current)&&(l(!0),h(-1))}),s.useEffect(()=>{const f=m.current;if(!f)return;function t(){ae(f)?(l(!0),h(-1)):(l(!1),h(0))}const w=new MutationObserver(t);return w.observe(f,{childList:!0,subtree:!0}),()=>w.disconnect()},[]),e.createElement("div",k({},L,{"aria-labelledby":N,id:g,className:p,ref:v,role:"tabpanel",tabIndex:_,hidden:E!==c}),r)});Me.propTypes={children:n.node,className:n.string};function ke(b){let{children:i}=b;return e.createElement(e.Fragment,null,e.Children.map(i,(u,r)=>e.createElement(ge.Provider,{value:r},u)))}ke.propTypes={children:n.node};export{Se as T,De as a,xe as b,ke as c,Me as d};
