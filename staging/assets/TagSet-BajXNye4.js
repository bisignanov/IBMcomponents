import{p as B,j as l}from"./settings-CljJQLyl.js";import{r as a,R as P}from"./index-BwDkhjyp.js";import{P as e}from"./index-Dk74W0Oi.js";import{c as w}from"./floating-ui.react-C-lGofMW.js";import{T as R}from"./Tag-ZScs8sso.js";import{C as ge,M as he,a as ye}from"./ComposedModal-qy9RXrDA.js";import{S as ve}from"./Search-D4hFpBcN.js";import{p as be,i as Te}from"./props-helper-BM8tfO54.js";import{u as we}from"./usePortalTarget-BZfsLKvG.js";import{L as Se}from"./Link-Nc6ULaYi.js";import{P as _e,a as Ne}from"./index-1ulDwjQN.js";import{u as xe}from"./useClickOutside-Dcd11u7q.js";import{g as qe}from"./devtools-C9kUiWhx.js";import{u as te}from"./useResizeObserver-CYrpFlRY.js";const Ce="TagSetModal",M=`${B.prefix}--tag-set-modal`,$e={searchLabel:""},K=({allTags:o,className:V,title:O,onClose:S,open:c,portalTarget:m,searchLabel:d=$e.searchLabel,searchPlaceholder:j,...v})=>{const[n,z]=a.useState([]),[b,_]=a.useState(""),r=we(m);a.useEffect(()=>{let u=[];if(c)if(b===""&&o)u=o==null?void 0:o.slice(0);else{const s=b.toLocaleLowerCase();o==null||o.forEach(i=>{var k,W,D,H;const N=(W=(k=i["data-search"])==null?void 0:k.toLocaleLowerCase())==null?void 0:W.indexOf(s),x=(H=(D=i.label)==null?void 0:D.toLocaleLowerCase())==null?void 0:H.indexOf(s);(N>-1||x>-1)&&u.push(i)})}z(u)},[o,c,b]);const f=u=>{_(u.target.value||"")};return r(l.jsxs(ge,{...v,containerClassName:`${M}__container`,className:w(V,`${M}`),size:"sm",open:c,onClose:S,children:[l.jsx(he,{className:`${M}__header`,closeModal:S,title:O,children:l.jsx(ve,{"data-modal-primary-focus":!0,className:`${M}__search`,labelText:d,placeholder:j,onChange:f,size:"lg"})}),l.jsx(ye,{className:`${M}__body`,hasForm:!0,children:n.map(({label:u,...s},i)=>a.createElement(R,{...s,filter:!1,key:`all-tags-${i}`},u))}),l.jsx("div",{className:`${M}__fade`})]}))};K.propTypes={allTags:e.arrayOf(e.shape({...be(R.propTypes,"filter"),label:e.string.isRequired})),className:e.string,onClose:e.func,open:e.bool,portalTarget:e.node,searchLabel:e.string,searchPlaceholder:e.string,title:e.string};K.displayName=Ce;const je="TagSetOverflow",p=`${B.prefix}--tag-set-overflow`,ke={allTagsModalSearchThreshold:10},G=P.forwardRef(({allTagsModalSearchThreshold:o=ke.allTagsModalSearchThreshold,className:V,onShowAllClick:O,overflowAlign:S="bottom",overflowAutoAlign:c,overflowTags:m,overflowType:d,showAllTagsLabel:j,popoverOpen:v,setPopoverOpen:n,...z},b)=>{const _=a.useRef(null),r=a.useRef(null);xe(b||_,()=>{v&&(n==null||n(!1))});const f=s=>{s.stopPropagation(),s.preventDefault(),n==null||n(!1),O()},u=s=>{const{key:i}=s;i==="Escape"&&(n==null||n(!1))};return l.jsx("span",{...z,"aria-hidden":m.length===0,className:w(`${p}`,{[`${p}--hidden`]:m.length===0}),ref:b||_,children:l.jsxs(_e,{align:S,className:w(V,`${p}__tagset-popover`),dropShadow:!0,highContrast:!0,onKeyDown:u,open:v,autoAlign:c,children:[l.jsx(R,{onClick:()=>n==null?void 0:n(!v),className:w(`${p}__popover-trigger`),children:`+${m.length}`}),l.jsx(Ne,{children:l.jsxs("div",{ref:r,className:`${p}__content`,children:[l.jsx("ul",{className:`${p}__tag-list`,children:m.filter((s,i)=>m.length>o?i<o:i<=o).map((s,i)=>{const N={};if(d==="tag"&&(N.type="high-contrast"),d==="default"&&(N.filter=!1),P.isValidElement(s))return l.jsx("li",{className:w(`${p}__tag-item`,{[`${p}__tag-item--default`]:d==="default",[`${p}__tag-item--tag`]:d==="tag"}),children:P.cloneElement(s,N)},i)})}),m.length>o&&l.jsx(Se,{className:`${p}__show-all-tags-link`,href:"",onClick:f,role:"button",children:j})]})})]})})});G.displayName=je;G.propTypes={allTagsModalSearchThreshold:e.number,className:e.string,onShowAllClick:e.func.isRequired,overflowAlign:e.oneOf(["top","top-left","top-right","bottom","bottom-left","bottom-right","left","left-bottom","left-top","right","right-bottom","right-top"]),overflowAutoAlign:e.bool,overflowTags:e.arrayOf(e.object).isRequired,overflowType:e.oneOf(["default","tag"]),popoverOpen:e.bool,setPopoverOpen:e.func,showAllTagsLabel:e.string};G.__docgenInfo={description:"",methods:[],displayName:"TagSetOverflow",props:{allTagsModalSearchThreshold:{required:!1,tsType:{name:"number"},description:"count of overflowTags over which a modal is offered",defaultValue:{value:"10",computed:!1},type:{name:"number"}},className:{required:!1,tsType:{name:"string"},description:"className",type:{name:"string"}},onShowAllClick:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"function to execute on clicking show all",type:{name:"func"}},overflowAlign:{required:!1,tsType:{name:"union",raw:`| 'top'
| 'top-left'
| 'top-right'
| 'bottom'
| 'bottom-left'
| 'bottom-right'
| 'left'
| 'left-bottom'
| 'left-top'
| 'right'
| 'right-bottom'
| 'right-top'`,elements:[{name:"literal",value:"'top'"},{name:"literal",value:"'top-left'"},{name:"literal",value:"'top-right'"},{name:"literal",value:"'bottom'"},{name:"literal",value:"'bottom-left'"},{name:"literal",value:"'bottom-right'"},{name:"literal",value:"'left'"},{name:"literal",value:"'left-bottom'"},{name:"literal",value:"'left-top'"},{name:"literal",value:"'right'"},{name:"literal",value:"'right-bottom'"},{name:"literal",value:"'right-top'"}]},description:"overflowAlign from the standard tooltip",defaultValue:{value:"'bottom'",computed:!1},type:{name:"enum",value:[{value:"'top'",computed:!1},{value:"'top-left'",computed:!1},{value:"'top-right'",computed:!1},{value:"'bottom'",computed:!1},{value:"'bottom-left'",computed:!1},{value:"'bottom-right'",computed:!1},{value:"'left'",computed:!1},{value:"'left-bottom'",computed:!1},{value:"'left-top'",computed:!1},{value:"'right'",computed:!1},{value:"'right-bottom'",computed:!1},{value:"'right-top'",computed:!1}]}},overflowTags:{required:!0,tsType:{name:"Array",elements:[{name:"ReactNode"}],raw:"ReactNode[]"},description:`@type {Array<any>}
tags shown in overflow`,type:{name:"arrayOf",value:{name:"object"}}},overflowType:{required:!1,tsType:{name:"union",raw:"'default' | 'tag'",elements:[{name:"literal",value:"'default'"},{name:"literal",value:"'tag'"}]},description:"Type of rendering displayed inside of the tag overflow component",type:{name:"enum",value:[{value:"'default'",computed:!1},{value:"'tag'",computed:!1}]}},overflowAutoAlign:{required:!1,tsType:{name:"boolean"},description:"Will auto-align the popover on first render if it is not visible. This prop is currently experimental and is subject to future changes.",type:{name:"bool"}},popoverOpen:{required:!1,tsType:{name:"boolean"},description:"Open state of the popover",type:{name:"bool"}},setPopoverOpen:{required:!1,tsType:{name:"union",raw:"((value: boolean) => void) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:"Setter function for the popoverOpen state value",type:{name:"func"}},showAllTagsLabel:{required:!1,tsType:{name:"string"},description:"label for the overflow show all tags link",type:{name:"string"}}}};const U="TagSet",y=`${B.prefix}--tag-set`,le=10,ae={align:"start",measurementOffset:0,overflowAlign:"bottom",overflowType:"default",onOverflowTagChange:()=>{}};let L=P.forwardRef(({align:o="start",allTagsModalTarget:V,className:O,maxVisible:S,multiline:c,overflowAutoAlign:m,overflowAlign:d="bottom",overflowClassName:j,overflowType:v="default",allTagsModalTitle:n="All tags",allTagsModalSearchLabel:z="Search all tags",allTagsModalSearchPlaceholderText:b="Search all tags",showAllTagsLabel:_="View all tags",tags:r,containingElementRef:f,measurementOffset:u=ae.measurementOffset,onOverflowTagChange:s=ae.onOverflowTagChange,...i},N)=>{const[x,k]=a.useState(3),[W,D]=a.useState([]),[H,se]=a.useState([]),[re,Y]=a.useState(!1),ne=a.useRef(null),A=N||ne,J=a.useRef(null),ie=a.useRef(null),[q,ue]=a.useState([]),I=a.useRef(null),[E,me]=a.useState(0),[Q,X]=a.useState(!1),ce=()=>{Y(!0)};a.useEffect(()=>{const t=S||(r==null?void 0:r.length)||0;me(t)},[S,r]),a.useEffect(()=>{const t=[];se(r&&r.length>0?r.map(({label:g,id:T,...C},h)=>l.jsx("div",{className:`${y}__sizing-tag`,ref:$=>{$!=null&&(t[h]=$)},children:l.jsx(R,{...C,"data-original-id":T,children:g})},h)):[]),ue(t)},[r]);const Z=a.useCallback((t,g)=>{t==null||t(),g<=x-1&&X(!1)},[x]);a.useEffect(()=>{let t=r&&r.length>0?r.map(({label:T,onClose:C,...h},$)=>a.createElement(R,{...h,key:`displayed-tag-${$}`,onClose:()=>Z(C,$)},T)):[];const g=t.splice(x,t.length-x);t=t.map((T,C)=>l.jsx("div",{className:`${y}__displayed-tag`,children:T},C)),t.push(l.jsx(G,{allTagsModalSearchThreshold:le,overflowAutoAlign:m,className:j,onShowAllClick:ce,overflowTags:g,overflowAlign:d,overflowType:v,showAllTagsLabel:_,ref:I,popoverOpen:Q,setPopoverOpen:X},"displayed-tag-overflow")),s==null||s(g),D(t)},[x,d,j,v,_,r,s,Q,Z,m]);const F=a.useCallback(()=>{var g;if(c)return k(E);let t=0;if(q.length>0){const T=f==null?void 0:f.current,C=typeof u=="number"?u:0;let h=T?T.offsetWidth-C:A==null?void 0:A.current.offsetWidth;for(const $ in q){const ee=((g=q[$])==null?void 0:g.offsetWidth)||0;if(h>=ee)h-=ee,t+=1;else break}if(t<q.length&&I.current)for(;t>0&&h<I.current.offsetWidth;)t-=1,h+=q[t].offsetWidth}t<1?k(0):k(E?Math.min(t,E):t)},[E,c,q,A,u,f]);a.useEffect(()=>{F()},[F,E,c,q]);const fe=()=>{F()},pe=()=>{F()},de=()=>{Y(!1)};return te(J,pe),te(f||A,fe),l.jsxs("div",{...i,className:w([y,O]),ref:A,...qe(U),children:[l.jsxs("div",{className:w([`${y}__space`,`${y}__space--align-${o}`]),children:[l.jsx("div",{className:`${y}__tag-container ${y}__tag-container--hidden`,"aria-hidden":!0,ref:J,children:H}),l.jsx("div",{className:w([`${y}__tag-container`,c&&`${y}__tag-container--multiline`]),ref:ie,children:W})]}),l.jsx(K,{allTags:r,open:re,title:n,onClose:de,searchLabel:z,searchPlaceholder:b,portalTarget:V})]})});L=B.checkComponentEnabled(L,U);const Ke=Te(e.string,({tags:o})=>o&&o.length>le),Ae={red:"Red",magenta:"Magenta",purple:"Purple",blue:"Blue",cyan:"Cyan",teal:"Teal",green:"Green",gray:"Gray","cool-gray":"Cool-Gray","warm-gray":"Warm-Gray","high-contrast":"High-Contrast",outline:"Outline"},oe=Object.keys(Ae);L.types=oe;L.propTypes={align:e.oneOf(["start","center","end"]),allTagsModalSearchLabel:e.string,allTagsModalSearchPlaceholderText:e.string,allTagsModalTarget:e.node,allTagsModalTitle:e.string,className:e.string,containingElementRef:e.object,maxVisible:e.number,measurementOffset:e.number,multiline:e.bool,onOverflowTagChange:e.func,overflowAlign:e.oneOf(["top","top-left","top-right","bottom","bottom-left","bottom-right","left","left-bottom","left-top","right","right-bottom","right-top"]),overflowAutoAlign:e.bool,overflowClassName:e.string,overflowType:e.oneOf(["default","tag"]),showAllTagsLabel:e.string,tags:e.arrayOf(e.shape({...R.propTypes,label:e.string.isRequired,type:e.oneOf(oe)}))};L.displayName=U;L.__docgenInfo={description:"",methods:[],displayName:"TagSet",props:{align:{required:!1,tsType:{name:"union",raw:"'start' | 'center' | 'end'",elements:[{name:"literal",value:"'start'"},{name:"literal",value:"'center'"},{name:"literal",value:"'end'"}]},description:"align the Tags displayed by the TagSet. Default start.",defaultValue:{value:"'start'",computed:!1},type:{name:"enum",value:[{value:"'start'",computed:!1},{value:"'center'",computed:!1},{value:"'end'",computed:!1}]}},allTagsModalSearchLabel:{required:!1,tsType:{name:"string"},description:"label text for the show all search.",defaultValue:{value:"'Search all tags'",computed:!1},type:{name:"string"}},allTagsModalSearchPlaceholderText:{required:!1,tsType:{name:"string"},description:"placeholder text for the show all search.",defaultValue:{value:"'Search all tags'",computed:!1},type:{name:"string"}},allTagsModalTarget:{required:!1,tsType:{name:"ReactNode"},description:"portal target for the all tags modal",type:{name:"node"}},allTagsModalTitle:{required:!1,tsType:{name:"string"},description:"title for the show all modal.",defaultValue:{value:"'All tags'",computed:!1},type:{name:"string"}},className:{required:!1,tsType:{name:"string"},description:"className",type:{name:"string"}},containingElementRef:{required:!1,tsType:{name:"ReactRefObject",raw:"React.RefObject<HTMLElement>",elements:[{name:"HTMLElement"}]},description:`Optional ref for custom resize container to measure available space
Default will measure the available space of the TagSet container itself.`,type:{name:"object"}},maxVisible:{required:!1,tsType:{name:"number"},description:"maximum visible tags",type:{name:"number"}},measurementOffset:{required:!1,tsType:{name:"number"},description:"Specify offset amount for measure available space, only used when `containingElementSelector`\nis also provided",defaultValue:{value:"0",computed:!1},type:{name:"number"}},multiline:{required:!1,tsType:{name:"boolean"},description:"display tags in multiple lines",type:{name:"bool"}},onOverflowTagChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: ReactNode) => void",signature:{arguments:[{type:{name:"ReactNode"},name:"value"}],return:{name:"void"}}},description:"Handler to get overflow tags",defaultValue:{value:"() => {}",computed:!1},type:{name:"func"}},overflowAlign:{required:!1,tsType:{name:"union",raw:`| 'top'
| 'top-left'
| 'top-right'
| 'bottom'
| 'bottom-left'
| 'bottom-right'
| 'left'
| 'left-bottom'
| 'left-top'
| 'right'
| 'right-bottom'
| 'right-top'`,elements:[{name:"literal",value:"'top'"},{name:"literal",value:"'top-left'"},{name:"literal",value:"'top-right'"},{name:"literal",value:"'bottom'"},{name:"literal",value:"'bottom-left'"},{name:"literal",value:"'bottom-right'"},{name:"literal",value:"'left'"},{name:"literal",value:"'left-bottom'"},{name:"literal",value:"'left-top'"},{name:"literal",value:"'right'"},{name:"literal",value:"'right-bottom'"},{name:"literal",value:"'right-top'"}]},description:"overflowAlign from the standard tooltip. Default center.",defaultValue:{value:"'bottom'",computed:!1},type:{name:"enum",value:[{value:"'top'",computed:!1},{value:"'top-left'",computed:!1},{value:"'top-right'",computed:!1},{value:"'bottom'",computed:!1},{value:"'bottom-left'",computed:!1},{value:"'bottom-right'",computed:!1},{value:"'left'",computed:!1},{value:"'left-bottom'",computed:!1},{value:"'left-top'",computed:!1},{value:"'right'",computed:!1},{value:"'right-bottom'",computed:!1},{value:"'right-top'",computed:!1}]}},overflowAutoAlign:{required:!1,tsType:{name:"boolean"},description:"Will auto-align the popover on first render if it is not visible. This prop is currently experimental and is subject to future changes.",type:{name:"bool"}},overflowClassName:{required:!1,tsType:{name:"string"},description:"overflowClassName for the tooltip popup",type:{name:"string"}},overflowType:{required:!1,tsType:{name:"union",raw:"'default' | 'tag'",elements:[{name:"literal",value:"'default'"},{name:"literal",value:"'tag'"}]},description:"Type of rendering displayed inside of the tag overflow component",defaultValue:{value:"'default'",computed:!1},type:{name:"enum",value:[{value:"'default'",computed:!1},{value:"'tag'",computed:!1}]}},showAllTagsLabel:{required:!1,tsType:{name:"string"},description:"label for the overflow show all tags link.",defaultValue:{value:"'View all tags'",computed:!1},type:{name:"string"}},tags:{required:!1,tsType:{name:"Array",elements:[{name:"intersection",raw:`{
  label: string;
  type?: keyof typeof tagTypes;
} & TagBaseProps`,elements:[{name:"signature",type:"object",raw:`{
  label: string;
  type?: keyof typeof tagTypes;
}`,signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"type",value:{name:"unknown",required:!1}}]}},{name:"TagBaseProps"}]}],raw:"TagType[]"},description:`The tags to be shown in the TagSet. Each tag is specified as an object
with properties: **label**\\* (required) to supply the tag content, and
other properties will be passed to the Carbon Tag component, such as
**type**, **disabled**, **ref**, **className** , and any other Tag props.

See https://react.carbondesignsystem.com/?path=/docs/components-tag--default`,type:{name:"arrayOf",value:{name:"shape",value:{label:{name:"string",required:!0},type:{name:"enum",value:[{value:'"red"',computed:!1},{value:'"magenta"',computed:!1},{value:'"purple"',computed:!1},{value:'"blue"',computed:!1},{value:'"cyan"',computed:!1},{value:'"teal"',computed:!1},{value:'"green"',computed:!1},{value:'"gray"',computed:!1},{value:'"cool-gray"',computed:!1},{value:'"warm-gray"',computed:!1},{value:'"high-contrast"',computed:!1},{value:'"outline"',computed:!1}],required:!1}}}}}},composes:["PropsWithChildren"]};export{L as T,Ke as s};
