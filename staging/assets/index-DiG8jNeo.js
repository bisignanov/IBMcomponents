import{u as v,c as E,_ as M}from"./deprecate-D9ms-jbM.js";import{P as e}from"./index-Dk74W0Oi.js";import{r as t,R as n}from"./index-BwDkhjyp.js";import{u as Q}from"./useControllableState-DwpxGhsf.js";import{u as U,m as L,C as X,A as ne,f as se,S as oe,a as ae,k as re}from"./events-Bq7WR1mU.js";import{M as G,u as ie,a as Y,b as ce}from"./useAttachedMenu-BGzc4N1_.js";import{T as le}from"./Text-_TFgs5hl.js";import{C as ue,a as me}from"./bucket-1-Bggqt_K0.js";import{B as de}from"./settings-DrdbGLhD.js";var W,H;const fe=150,P=t.forwardRef(function(g,C){let{children:d,className:I,disabled:f,kind:i="default",label:p,onClick:c,renderIcon:l,shortcut:h,...u}=g;const o=v(),a=t.useContext(G),r=t.useRef(null),y=U([C,r]),[k,m]=t.useState({x:-1,y:-1}),[R,x]=t.useState(!1),b=!!d,[S,T]=t.useState(!1),w=t.useRef(null),_=f&&!b,q=i==="danger"&&!b;function A(){a.dispatch({type:"registerItem",payload:{ref:r,disabled:!!f}})}function $(){if(!r.current)return;const{x:s,y:O,width:j,height:F}=r.current.getBoundingClientRect();m(R?{x:[-s,s-j],y:[O,O+F]}:{x:[s,s+j],y:[O,O+F]}),T(!0)}function B(){T(!1),m({x:-1,y:-1})}function D(s){_||(b?$():(a.state.requestCloseRoot(s),c&&c(s)))}function K(){w.current=setTimeout(()=>{$()},fe)}function Z(){var s;w.current&&(clearTimeout(w.current),B(),(s=r.current)==null||s.focus())}function ee(s){b&&L(s,ne)&&($(),s.stopPropagation()),(L(s,se)||L(s,oe))&&D(s),u.onKeyDown&&u.onKeyDown(s)}const te=E(I,`${o}--menu-item`,{[`${o}--menu-item--disabled`]:_,[`${o}--menu-item--danger`]:q});t.useEffect(()=>{A()},[]);const{direction:V}=ie();t.useEffect(()=>{(document==null?void 0:document.dir)==="rtl"||V==="rtl"?x(!0):x(!1)},[V]);const z=a.state.mode==="basic"||u.role==="menuitemcheckbox"||u.role==="menuitemradio";return t.useEffect(()=>{z&&l&&!a.state.hasIcons&&a.dispatch({type:"enableIcons"})},[z,l,a.state.hasIcons,a]),n.createElement("li",M({role:"menuitem"},u,{ref:y,className:te,tabIndex:-1,"aria-disabled":_??void 0,"aria-haspopup":b??void 0,"aria-expanded":b?S:void 0,onClick:D,onMouseEnter:b?K:void 0,onMouseLeave:b?Z:void 0,onKeyDown:ee}),n.createElement("div",{className:`${o}--menu-item__icon`},z&&l&&n.createElement(l,null)),n.createElement(le,{as:"div",className:`${o}--menu-item__label`,title:p},p),h&&!b&&n.createElement("div",{className:`${o}--menu-item__shortcut`},h),b&&n.createElement(n.Fragment,null,n.createElement("div",{className:`${o}--menu-item__shortcut`},R?W||(W=n.createElement(ue,null)):H||(H=n.createElement(me,null))),n.createElement(Y,{label:p,open:S,onClose:()=>{var s;B(),(s=r.current)==null||s.focus()},x:k.x,y:k.y},d)))});P.propTypes={children:e.node,className:e.string,disabled:e.bool,kind:e.oneOf(["default","danger"]),label:e.string.isRequired,onClick:e.func,renderIcon:e.oneOfType([e.func,e.object]),shortcut:e.string};const pe=t.forwardRef(function(g,C){let{className:d,defaultSelected:I,label:f,onChange:i,selected:p,...c}=g;const l=v(),h=t.useContext(G);h.state.mode;const[u,o]=Q({value:p,onChange:i,defaultValue:I??!1});function a(y){o(!u),i&&i(y)}t.useEffect(()=>{h.state.hasIcons||h.dispatch({type:"enableIcons"})},[h.state.hasIcons,h]);const r=E(d,`${l}--menu-item-selectable--selected`);return n.createElement(P,M({},c,{ref:C,label:f,className:r,role:"menuitemcheckbox","aria-checked":u,renderIcon:u?X:void 0,onClick:a}))});pe.propTypes={className:e.string,defaultSelected:e.bool,label:e.string.isRequired,onChange:e.func,selected:e.bool};const he=t.forwardRef(function(g,C){let{children:d,className:I,label:f,...i}=g;const p=v(),c=E(I,`${p}--menu-item-group`);return n.createElement("li",{className:c,role:"none",ref:C},n.createElement("ul",M({},i,{role:"group","aria-label":f}),d))});he.propTypes={children:e.node,className:e.string,label:e.string.isRequired};const be=N=>N.toString(),ge=t.forwardRef(function(g,C){let{className:d,defaultSelectedItem:I,items:f,itemToString:i=be,label:p,onChange:c,selectedItem:l,...h}=g;const u=v(),o=t.useContext(G);o.state.mode;const[a,r]=Q({value:l,onChange:c,defaultValue:I});function y(m,R){r(m),c&&c(R)}t.useEffect(()=>{o.state.hasIcons||o.dispatch({type:"enableIcons"})},[o.state.hasIcons,o]);const k=E(d,`${u}--menu-item-radio-group`);return n.createElement("li",{className:k,role:"none",ref:C},n.createElement("ul",M({},h,{role:"group","aria-label":p}),f.map((m,R)=>n.createElement(P,{key:R,label:i(m),role:"menuitemradio","aria-checked":m===a,renderIcon:m===a?X:void 0,onClick:x=>{y(m,x)}}))))});ge.propTypes={className:e.string,defaultSelectedItem:e.any,itemToString:e.func,items:e.array,label:e.string.isRequired,onChange:e.func,selectedItem:e.any};const Ce=t.forwardRef(function(g,C){let{className:d,...I}=g;const f=v(),i=E(d,`${f}--menu-item-divider`);return n.createElement("li",M({},I,{className:i,role:"separator",ref:C}))});Ce.propTypes={className:e.string};const J=0,Ie=["primary","tertiary","ghost"],ye="primary",xe=t.forwardRef(function(g,C){let{children:d,className:I,disabled:f,kind:i=ye,label:p,size:c="lg",menuAlignment:l="bottom",tabIndex:h=0,...u}=g;const o=ae("MenuButton"),a=v(),r=t.useRef(null),y=t.useRef(null),k=U([C,r]),[m,R]=t.useState(0),{open:x,x:b,y:S,handleClick:T,handleMousedown:w,handleClose:_}=ce(r);function q(){if(r.current){const{width:K}=r.current.getBoundingClientRect();R(K),T()}}function A(){y.current&&(y.current.style.inlineSize=`${m}px`,y.current.style.minInlineSize=`${m}px`,l!=="bottom"&&l!=="top"&&(y.current.style.inlineSize="fit-content"))}const $=E(`${a}--menu-button__container`,I),B=E(`${a}--menu-button__trigger`,{[`${a}--menu-button__trigger--open`]:x}),D=E(`${a}--menu-button__${l}`);return n.createElement("div",M({},u,{ref:k,"aria-owns":x?o:void 0,className:$}),n.createElement(de,{className:B,size:c,tabIndex:h,kind:i,renderIcon:re,disabled:f,"aria-haspopup":!0,"aria-expanded":x,onClick:q,onMouseDown:w,"aria-controls":x?o:void 0},p),n.createElement(Y,{containerRef:r,menuAlignment:l,className:D,ref:y,id:o,label:p,mode:"basic",size:c,open:x,onClose:_,onOpen:A,x:b,y:[S[0]-J,S[1]+J]},d))});xe.propTypes={children:e.node.isRequired,className:e.string,disabled:e.bool,kind:e.oneOf(Ie),label:e.string.isRequired,menuAlignment:e.oneOf(["top","top-start","top-end","bottom","bottom-start","bottom-end"]),size:e.oneOf(["sm","md","lg"]),tabIndex:e.number};export{xe as M,P as a};
