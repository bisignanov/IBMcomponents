import{p as S,j as a,c as T}from"./settings-DrdbGLhD.js";import{r as g}from"./index-BwDkhjyp.js";import{c as h}from"./deprecate-D9ms-jbM.js";import{T as N}from"./TableSelectRow-C0GP32jO.js";import{s as W,S as A,h as H}from"./_storybook-styles-vc0dWCV4.js";const m=`${S.prefix}--datagrid`,f=`${S.prefix}--datagrid__checkbox-cell`,J=o=>{O(o);const i=t=>{const{rows:e}=t,s=e.map(c=>({...c,isSelectable:!0}));Object.assign(t,{rows:s})};o.useInstance.push(i),o.useInstance.push(t=>{Object.assign(t,{withSelectRows:!0})}),o.visibleColumns.push(t=>{const e=[...t],s=e.findIndex(n=>n.id==="expander"),c=s>-1?e.splice(s,1):[];return[...s>-1&&c&&c.length?c:[],{id:W,Header:n=>a.jsx(A,{...n}),Cell:n=>a.jsx(v,{...n})},...e]})},O=o=>{const i=(t,{row:e})=>{const{checked:s}=e.getToggleRowSelectedProps();return[t,{className:h([`${m}__carbon-row`,{[`${T.prefix}--data-table--selected`]:s,[`${m}__active-row`]:s}])}]};o.getRowProps.push(i)},v=o=>{var u;const{isFetching:i=!1,tableId:t,row:e,cell:s,radio:c,toggleAllRowsSelected:n,onRadioSelect:d,onRowSelect:r,columns:x,withStickyColumn:b,dispatch:C,getRowId:R}=o,[P,$]=g.useState(typeof window<"u"?window.innerWidth:"");g.useLayoutEffect(()=>{function l(){$(window.innerWidth)}return window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]);const k=l=>{l.stopPropagation(),c&&(n(!1),d&&d(e)),j(l),r==null||r(e,l),H({dispatch:C,rowData:e,isChecked:l.target.checked,getRowId:R,selectAll:null})},I=i||e.getRowProps().disabled,{onChange:j,title:y,..._}=e.getToggleRowSelectedProps(),p=s.getCellProps(),z=((u=x[0])==null?void 0:u.sticky)==="left"&&b,w=`${t}-${e.id}-${e.index}`,{key:E,_cellProps:L}=p;return a.jsx(N,{...L,..._,radio:c,onSelect:k,id:w,name:`${w}-name`,className:h([f,p.className,{[`${f}-sticky-left`]:z&&Number(P)>671}]),ariaLabel:y,disabled:I},E)};export{J as u};
